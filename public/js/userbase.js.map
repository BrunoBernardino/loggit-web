{"version":3,"sources":["webpack://userbase/webpack/bootstrap","webpack://userbase/./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","webpack://userbase/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://userbase/./node_modules/uuid/v4.js","webpack://userbase/(webpack)/buildin/global.js","webpack://userbase/./node_modules/node-libs-browser/node_modules/buffer/index.js","webpack://userbase/./node_modules/bn.js/lib/bn.js","webpack://userbase/./node_modules/diffie-hellman/lib/generatePrime.js","webpack://userbase/./node_modules/randombytes/browser.js","webpack://userbase/./node_modules/process/browser.js","webpack://userbase/./node_modules/miller-rabin/lib/mr.js","webpack://userbase/./node_modules/diffie-hellman/browser.js","webpack://userbase/./node_modules/scrypt-js/scrypt.js","webpack://userbase/./node_modules/sorted-array/sorted-array.js","webpack://userbase/./node_modules/uuid/lib/rng-browser.js","webpack://userbase/./node_modules/uuid/lib/bytesToUuid.js","webpack://userbase/./node_modules/base64-js/index.js","webpack://userbase/./node_modules/ieee754/index.js","webpack://userbase/./node_modules/isarray/index.js","webpack://userbase/./node_modules/safe-buffer/index.js","webpack://userbase/(webpack)/buildin/module.js","webpack://userbase/./node_modules/brorand/index.js","webpack://userbase/./node_modules/diffie-hellman/lib/dh.js","webpack://userbase/./node_modules/timers-browserify/main.js","webpack://userbase/./node_modules/setimmediate/setImmediate.js","webpack://userbase/./src/statusCodes.js","webpack://userbase/./src/errors/auth.js","webpack://userbase/./src/errors/db.js","webpack://userbase/./src/errors/config.js","webpack://userbase/./src/errors/payments.js","webpack://userbase/./src/errors/index.js","webpack://userbase/./src/config.js","webpack://userbase/./src/api/utils.js","webpack://userbase/./src/api/auth.js","webpack://userbase/./src/localData.js","webpack://userbase/./src/Crypto/utils.js","webpack://userbase/./src/Crypto/sha-256.js","webpack://userbase/./src/Crypto/hkdf.js","webpack://userbase/./src/Crypto/aes-gcm.js","webpack://userbase/./src/Crypto/diffie-hellman.js","webpack://userbase/./src/Crypto/ecdsa.js","webpack://userbase/./src/Crypto/ecdh.js","webpack://userbase/./src/Crypto/hmac.js","webpack://userbase/./src/Crypto/index.js","webpack://userbase/./src/Crypto/scrypt.js","webpack://userbase/./src/utils.js","webpack://userbase/./src/worker.js","webpack://userbase/./src/api/db.js","webpack://userbase/./src/ws.js","webpack://userbase/./src/auth.js","webpack://userbase/./src/db.js","webpack://userbase/./src/payments.js","webpack://userbase/./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","chars","lookup","Uint8Array","length","charCodeAt","encode","arraybuffer","bytes","len","base64","substring","decode","encoded1","encoded2","encoded3","encoded4","bufferLength","ArrayBuffer","obj","configurable","writable","rng","bytesToUuid","options","buf","offset","Array","rnds","random","ii","g","this","Function","e","window","ieee754","isArray","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","__proto__","arg","encodingOrOffset","Error","allocUnsafe","from","TypeError","array","byteOffset","byteLength","undefined","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","slice","fromString","isBuffer","checked","copy","buffer","val","type","data","fromObject","assertSize","size","toString","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","start","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","b","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","indexOf","lastIndexOf","arr","indexSize","arrLength","valLength","String","read","readUInt16BE","foundIndex","found","j","hexWrite","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","push","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","Math","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","apply","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","fill","allocUnsafeSlow","_isBuffer","compare","a","x","y","concat","list","pos","swap16","swap32","swap64","arguments","equals","inspect","max","match","join","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","toHex","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","set","code","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","trim","replace","stringtrim","base64clean","src","dst","assert","msg","inherits","ctor","superCtor","super_","TempCtor","constructor","BN","number","base","endian","isBN","negative","words","red","_init","wordSize","parseHex","parseBase","num","left","right","cmp","_initNumber","_initArray","_parseHex","_parseBase","strip","toArray","ceil","w","off","limbLen","limbPow","total","mod","word","imuln","_iaddn","dest","clone","_expand","_normSign","zeros","groupSizes","groupBases","smallMulTo","self","carry","k","ncarry","rword","maxJ","padding","groupSize","groupBase","isZero","modn","idivn","toNumber","toBuffer","toArrayLike","ArrayType","reqLength","q","andln","iushrn","clz32","_countBits","_zeroBits","bitLength","zeroBits","toTwos","width","abs","inotn","iaddn","fromTwos","testn","notn","ineg","isNeg","neg","iuor","ior","or","uor","iuand","iand","and","uand","iuxor","ixor","xor","uxor","bytesNeeded","bitsLeft","setn","bit","wbit","iadd","isub","add","comb10MulTo","mid","a0","al0","ah0","a1","al1","ah1","a2","al2","ah2","a3","al3","ah3","a4","al4","ah4","a5","al5","ah5","a6","al6","ah6","a7","al7","ah7","a8","al8","ah8","a9","al9","ah9","b0","bl0","bh0","b1","bl1","bh1","b2","bl2","bh2","b3","bl3","bh3","b4","bl4","bh4","b5","bl5","bh5","b6","bl6","bh6","b7","bl7","bh7","b8","bl8","bh8","b9","bl9","bh9","w0","imul","w1","w2","w3","w4","w5","w6","w7","w8","w9","w10","w11","w12","w13","w14","w15","w16","w17","w18","jumboMulTo","FFTM","mulp","mulTo","hncarry","bigMulTo","makeRBT","N","revBin","rb","permute","rbt","rws","iws","rtws","itws","transform","rtwdf","cos","PI","itwdf","sin","rtwdf_","itwdf_","re","ie","ro","io","rx","guessLen13b","odd","conjugate","normalize13b","ws","round","convert13b","stub","ph","_","rwst","iwst","nrws","nrwst","niwst","rmws","mulf","muln","sqr","isqr","toBitArray","iushln","bits","carryMask","newCarry","ishln","hint","extended","h","mask","maskedWords","ishrn","shln","ushln","shrn","ushrn","imaskn","maskn","isubn","addn","subn","iabs","_ishlnsubmul","shift","_wordDiv","bhi","diff","qj","div","divmod","positive","divn","umod","divRound","dm","half","r2","acc","egcd","A","B","C","D","isEven","yp","xp","im","isOdd","jm","gcd","_invmp","x1","x2","delta","cmpn","invm","bincn","ucmp","gtn","gt","gten","gte","ltn","lt","lten","lte","eqn","eq","Red","toRed","ctx","convertTo","_forceRed","fromRed","convertFrom","forceRed","redAdd","redIAdd","redSub","redISub","redShl","shl","redMul","_verify2","redIMul","redSqr","_verify1","redISqr","redSqrt","sqrt","redInvm","redNeg","redPow","primes","k256","p224","p192","p25519","MPrime","tmp","_tmp","K256","P224","P192","P25519","prime","_prime","Mont","imod","rinv","minv","ireduce","rlen","split","imulK","_strip","input","output","outLen","prev","next","mod3","one","nOne","lpow","z","inv","wnd","current","currentLen","mont","u","randomBytes","findPrime","simpleSieve","fermatTest","TWENTYFOUR","millerRabin","ONE","TWO","FIVE","TEN","THREE","ELEVEN","FOUR","_getPrimes","gen","n2","test","crypto","msCrypto","getRandomValues","cb","generated","process","nextTick","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","args","title","browser","env","argv","version","versions","on","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","bn","brorand","MillerRabin","rand","Rand","_randbelow","min_bytes","generate","_randrange","stop","rone","n1","rn1","getDivisor","DH","ENCODINGS","DiffieHellmanGroup","createDiffieHellmanGroup","getDiffieHellman","createDiffieHellman","DiffieHellman","enc","generator","genc","generatePrime","root","SHA256","K","Uint32Array","h0","h1","h2","h3","h4","h5","h6","h7","blocks","t1","t2","f","bytesLeft","bitLenHi","bitLenLo","numZeros","PBKDF2_HMAC_SHA256_OneIter","password","salt","dkLen","innerLen","inner","outerKey","dk","incrementCounter","blockmix_salsa8","BY","Yi","_X","arraycopy","blockxor","salsa20_8","R","S","Si","srcPos","destPos","checkBufferish","v","ensureInteger","_scrypt","callback","XY","V","totalOps","i1","Bi","currentOp","lastPercent10","state","i0","setImmediate","incrementalSMix","steps","percent10","derivedKey","lib","scrypt","progressCallback","Promise","resolve","reject","lastProgress","error","progress","syncScrypt","SortedArray","compareDefault","index","insert","element","ordering","high","low","search","remove","splice","comparing","rnds8","byteToHex","bth","b64","lens","getLens","validLen","placeHoldersLen","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","len2","encodeChunk","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","log","LN2","copyProps","SafeBuffer","webpackPolyfill","deprecate","paths","children","_rand","getBytes","getByte","SEVEN","setPublicKey","pub","_pub","setPrivateKey","priv","_priv","primeCache","malleable","setGenerator","__prime","_primeLen","_primeCode","formatReturnValue","hex","rem","checkPrime","__gen","generateKeys","_gen","getPublicKey","computeSecret","other","secret","getPrime","front","getPrivateKey","getGenerator","Timeout","id","clearFn","_id","_clearFn","scope","setInterval","clearInterval","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","registerImmediate","html","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","document","attachTo","getPrototypeOf","handle","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","event","port2","createElement","documentElement","script","onreadystatechange","removeChild","appendChild","source","addEventListener","attachEvent","task","UsernameAlreadyExists","params","super","message","status","statusCodes","UsernameMissing","UsernameCannotBeBlank","UsernameTooLong","maxLen","UsernameMustBeString","PasswordMissing","PasswordCannotBeBlank","PasswordTooShort","minLen","PasswordTooLong","PasswordMustBeString","PasswordAttemptLimitExceeded","delay","UsernameOrPasswordMismatch","SessionLengthMustBeNumber","SessionLengthTooShort","SessionLengthTooLong","AllowServerSideEncryptionMustBeBoolean","UserAlreadySignedIn","username","UserPendingDeletion","AppIdNotValid","DomainNotWhitelisted","domain","UserNotSignedIn","UserNotFound","UserEmailNotFound","UserMustChangePassword","EmailNotValid","ProfileMustBeObject","ProfileCannotBeEmpty","ProfileHasTooManyKeys","maxKeys","ProfileKeyTooLong","ProfileValueMustBeString","ProfileValueCannotBeBlank","ProfileValueTooLong","RememberMeValueNotValid","JSON","stringify","keys","ParamsMissing","TrialExceededLimit","CurrentPasswordMissing","CurrentPasswordIncorrect","KeyNotFound","DeleteEndToEndEncryptedDataMustBeBoolean","DatabaseNameMissing","DatabaseNameCannotBeBlank","DatabaseNameMustBeString","DatabaseNameTooLong","maxLength","DatabaseNameRestricted","databaseName","DatabaseAlreadyOpening","ChangeHandlerMissing","ChangeHandlerMustBeFunction","EncryptionModeNotValid","ServerSideEncryptionNotEnabledInClient","DatabaseNotOpen","DatabaseNotFound","DatabaseIsReadOnly","DatabaseIdMustBeString","DatabaseIdCannotBeBlank","DatabaseIdNotAllowed","DatabaseIdNotAllowedForOwnDatabase","DatabaseIdInvalidLength","ShareTokenInvalid","ShareTokenNotFound","ShareTokenNotAllowed","reason","ShareTokenNotAllowedForOwnDatabase","ReadOnlyMustBeBoolean","ReadOnlyParamNotAllowed","ResharingAllowedParamNotAllowed","ResharingAllowedMustBeBoolean","ResharingNotAllowed","ResharingWithWriteAccessNotAllowed","SharingWithSelfNotAllowed","ModifyingOwnPermissionsNotAllowed","ModifyingOwnerPermissionsNotAllowed","ModifyingPermissionsNotAllowed","GrantingWriteAccessNotAllowed","RequireVerifiedMustBeBoolean","RequireVerifiedParamNotNecessary","RevokeMustBeBoolean","ItemMissing","ItemInvalid","ItemTooLarge","maxKb","ItemIdMustBeString","ItemIdTooLong","ItemIdMissing","ItemIdCannotBeBlank","ItemAlreadyExists","ItemDoesNotExist","ItemUpdateConflict","FileMissing","FileMustBeFile","FileCannotBeEmpty","FileUploadConflict","FileNotFound","FileIdMissing","FileIdMustBeString","FileIdCannotBeBlank","FileIdTooLong","RangeMustBeObject","RangeMissingStart","RangeMissingEnd","RangeStartMustBeNumber","RangeEndMustBeNumber","RangeStartMustBeGreaterThanZero","RangeEndMustBeGreaterThanRangeStart","RangeEndMustBeLessThanFileSize","OperationsMissing","OperationsMustBeArray","CommandNotRecognized","command","OperationsConflict","OperationsExceedLimit","UserNotVerified","UserMustBeReverified","UserUnableToReceiveDatabase","VerificationMessageMissing","VerificationMessageCannotBeBlank","VerificationMessageMustBeString","VerificationMessageInvalid","VerifyingSelfNotAllowed","ProgressHandlerMustBeFunction","TransactionUnauthorized","WriteAccessParamNotAllowed","AppIdAlreadySet","appId","AppIdMustBeString","AppIdMissing","AppIdCannotBeBlank","WebCryptoUnavailable","UpdateUserHandlerMustBeFunction","SuccessUrlMissing","SuccessUrlMustBeString","SuccessUrlInvalid","invalidProtocol","CancelUrlMissing","CancelUrlMustBeString","CancelUrlInvalid","StripeJsLibraryMissing","PaymentsDisabled","PriceIdOrPlanIdAllowed","PriceIdOrPlanIdMissing","SubscriptionPlanAlreadyPurchased","StripeAccountNotConnected","SubscriptionNotFound","SubscriptionInactive","subscriptionStatus","SubscriptionNotPurchased","SubscriptionAlreadyCanceled","TrialExpired","StripeError","AppIdNotSet","ServiceUnavailable","ParamsMustBeObject","TooManyRequests","retryDelay","retryDelaySeconds","auth","db","config","payments","InternalServerError","Reconnecting","UnknownServiceUnavailable","console","userbaseAppId","userbaseUpdateUserHandler","userbaseAllowServerSideEncryptionMode","errors","_userbaseEndpoint","updateUserHandler","allowServerSideEncryption","isProduction","_USERBASE_STRIPE_PRODUCTION_PUBLISHABLE_KEY","_USERBASE_STRIPE_TEST_PUBLISHABLE_KEY","RequestError","statusText","response","TimeoutError","processXhr","xhr","onload","parse","handleResponse","onerror","ontimeout","passwordToken","ecKeyData","passwordSalts","keySalts","email","profile","passwordBasedBackup","sessionLength","XMLHttpRequest","url","open","setRequestHeader","send","encodeURIComponent","async","sessionId","responseType","tryCatchWrapper","func","warn","_getSeedName","setCurrentSession","rememberMe","signedIn","creationDate","expirationDate","session","sessionString","localStorage","setItem","sessionStorage","signInSession","signOutSession","getCurrentSession","sessionStorageCurrentSessionString","getItem","localCurrentSessionString","localCurrentSession","localSessionString","saveSeedString","seedString","removeSeedString","seedName","removeItem","getSeedString","removeCurrentSession","arrayBufferToString","minified","bufView","Uint16Array","result","chunkSize","chunk","stringToArrayBuffer","appendBuffer","buffer1","buffer2","hash","subtle","digest","BYTE_SIZE","HASH_ALGORITHM_NAME","hashBase64String","dataString","hashString","KEY_WILL_BE_USED_TO","importHkdfKey","importKey","seed","SALT_BYTE_SIZE","sha256","getParams","keyName","info","importHkdfKeyFromString","generateSalt","getPasswordToken","hkdfKey","passwordTokenBits","deriveBits","windowOrSelfObject","getEncryptionKeyParams","getCiphertextParams","iv","tagLength","generateIv","sliceEncryptedArrayBuffer","encryptedArrayBuffer","ivStartIndex","ciphertextArrayBuffer","generateKey","getKeyFromRawKey","rawKey","getRawKeyFromKey","exportKey","encrypt","plaintext","encryptString","plaintextString","plaintextArrayBuffer","encrypted","decrypt","decryptString","encryptedString","importKeyFromMaster","masterKey","encryptionKeyName","deriveKey","hkdf","getKeyStringFromKey","getKeyFromKeyString","keyString","encryptJson","plaintextJson","decryptJson","encryptedJsonString","getPasswordBasedEncryptionKey","generateAndEncryptKeyEncryptionKey","keyEncryptionKey","keyEncryptionKeyRaw","RAW_KEY_TYPE","PRIME","hexString","halfHexStringLen","byteStartIndex","byte","byteAsInt","hexStringToArrayBuffer","GENERATOR","serverPublicKey","privateKey","diffieHellman","setPrivateKeyAndGenerateKeys","getSharedKey","otherPublicKey","sharedSecret","sharedRawKey","aesGcm","getSharedKeyWithServer","authApi","getServerPublicKey","KEY_PAIR_WILL_BE_USED_TO","PRIVATE_KEY_WILL_BE_USED_TO","PUBLIC_KEY_WILL_BE_USED_TO","ECDSA_PARAMS","namedCurve","ECDSA_SIGNING_PARAMS","getRawPublicKeyFromPublicKey","publicKey","getPublicKeyStringFromPublicKey","rawPublicKey","importEcdsaKeyEncryptionKeyFromMaster","sign","verify","signature","generateEcdsaKeyData","ecdsaKeyPair","generateKeyPair","ecdsaKeyEncryptionKeySalt","ecdsaKeyEncryptionKey","ecdsaRawPrivateKey","jwkPrivateKey","getRawPrivateKeyFromPrivateKey","encryptedEcdsaPrivateKey","ecdsaPrivateKey","ecdsaPublicKey","getPrivateKeyFromRawPrivateKey","rawPrivateKey","getPublicKeyFromRawPublicKey","getPublicKeyFromPrivateKey","key_ops","signString","verifyString","signatureString","ECDH_PARAMS","importEcdhKeyEncryptionKeyFromMaster","generateEcdhKeyData","ecdhKeyPair","ecdhKeyEncryptionKeySalt","ecdhKeyEncryptionKey","ecdhRawPrivateKey","encryptedEcdhPrivateKey","ecdhPublicKey","signedEcdhPublicKey","ecdsa","ecdhPrivateKey","computeSharedKeyEncryptionKey","otherEcdhPublicKey","public","KEY_WILL_BE_USED_TO_SIGN","KEY_WILL_BE_USED_TO_SIGN_AND_VERIFY","importKeyFromRawBits","rawBits","generateSeed","ecdh","hmac","passwordString","passwordHashAlgo","scryptJs","passwordArrayBuffer","passwordHash","getProtocolFromEndpoint","endpoint","getWsUrl","host","removeProtocolFromEndpoint","byteSizeOfString","objectHasOwnProperty","Queue","getLength","isEmpty","enqueue","dequeue","peek","newWorker","blobURL","URL","createObjectURL","Blob","compress","decompress","LZString","charAt","compressToBase64","_compress","decompressFromBase64","_decompress","compressToUTF16","decompressFromUTF16","compressToUint8Array","decompressFromUint8Array","forEach","compressToEncodedURIComponent","decompressFromEncodedURIComponent","position","worker","Worker","revokeObjectURL","terminate","uploadBundleChunk","userId","databaseId","seqNo","bundleId","chunkNo","clientId","uuidv4","RequestFailed","action","WebSocketError","init","resolveConnection","rejectConnection","changePassword","encryptionMode","pingTimeout","connected","connectionResolved","authToken","salts","userData","stripeData","requests","dbNameToHash","databases","databasesByDbId","shareTokenIdToDbId","connect","reconnectDelay","timeoutToOpenWebSocket","reconnecting","WebSocket","onopen","route","heartbeat","validationMessage","encryptedValidationMessage","setKeys","validateKey","DOMException","dbId","dbNameHash","database","isOwner","applyTransactionsQueue","startApplyingThisBatchOfTransactions","dbKey","plaintextDbKey","shareTokenEncryptedDbKey","dbKeyString","encryptionKey","decryptShareTokenEncryptedDbKey","shareTokenEncryptionKeySalt","writers","attributionEnabled","usernamesByUserId","waitForFullBundle","finishedWaitingForBundle","bundle","rebuildBundle","bundleSeqNo","encryptedBundleEncryptionKey","applyBundle","alert","newTransactions","transactionLog","applyTransactions","ownerId","buildBundle","startApplyingNextBatchInQueue","isFirstChunk","isLastChunk","bundleChunks","handleUpdateUser","updatedUser","requestId","request","promiseResolve","promiseReject","onclose","serviceRestart","clientDisconnected","wasClean","reconnect","reconnected","currentState","dbsToReopen","dbsToReopenById","reopenDatabases","openDatabasePromises","reopenAtSeqNo","lastSeqNo","shareTokenHkdfKey","shareTokenAuthData","authenticateShareToken","shareTokenId","all","localData","encryptionKeySalt","hmacKey","hmacKeySalt","rawEcdsaPrivateKey","rawEcdhPrivateKey","dhKeySalt","dhPrivateKey","ecdsaKeyWrapperSalt","ecdsaKeyData","ecdhKeyData","newEcKeyData","sharedKey","responseWatcher","watch","chunkArrayBuffer","bundleArrayBuffer","buffers","bufferByteLengths","map","totalByteLength","reduce","byteLengthSum","bufferByteLength","currentByteLength","byteLengths","appendBuffers","plaintextMetadata","bundleEncryptionKeyRaw","bundleEncryptionKey","decrypted","decryptedString","decompressedEncrypted","decompressedPlaintextMetdata","chunkNumber","batch","initResponse","orderedItems","items","itemsIndex","orderedItemsArray","itemId","prepareBundle","itemsPlaintextMetadata","bundledAtSeqNo","initBundleUpload","compressedBeforeEncryption","compressedPlaintextMetadataString","compressedArrayBufferBeforeEncryption","encryptedItems","numChunks","uploadBundle","buildUserResult","protectedProfile","usedTempPassword","passwordChanged","paymentsMode","cancelSubscriptionAt","subscriptionPlanId","trialExpirationDate","user","newSeedString","newKeyData","shareTokenAuthKeyData","shareTokenEcdsaPrivateKey","shareTokenEcdsaKeyEncryptionKeySalt","shareTokenEcdsaKeyEncryptionKey","shareTokenEncryptedEcdsaPrivateKey","shareTokenEcdsaPrivateKeyRaw","signedValidationMessage","REMEMBER_ME_OPTIONS","local","none","KEY_NOT_FOUND_ON_SIGN_IN","KEY_NOT_FOUND_ON_FORGOT_PASSWORD","_parseGenericErrors","location","origin","_connectWebSocket","_parseGenericUsernamePasswordError","_parseSessionLengthError","_parseUserResponseError","_calculateSessionLengthMs","_validateUsername","_validatePassword","_validateSignUpOrSignInInput","_generatePasswordToken","passwordSalt","passwordHkdfKey","passwordTokenSalt","passwordBasedEncryptionKeySalt","passwordBasedEncryptionKey","passwordEncryptedSeed","_generateKeys","_validateProfile","keyExists","_getPasswordSaltsOverWebSocket","_rebuildPasswordToken","signInWithSession","lastUsedUsername","currentSession","savedSeedString","Date","apiSignInWithSessionResult","_getMasterKeyAndKeyNotFoundMessage","signUp","_validateSignUpInput","_generateKeysAndSignUp","signOut","signIn","_getPasswordSaltsOverRestEndpoint","apiSignInResult","_signInWrapper","seedStringFromBackup","seedFromBackup","_getSeedStringFromPasswordBasedBackup","updateUser","currentPassword","newPassword","_validateUpdatedUserInput","startingUserId","newSeed","finalParams","currentPasswordSalts","newPasswordPromise","currentPasswordToken","_buildUpdateUserParams","rotateKeys","deleteUser","_checkSignedInState","forgotPassword","deleteEndToEndEncryptedData","forgotPasswordWs","encryptedForgotPasswordToken","forgotPasswordToken","signedForgotPasswordToken","ENCRYPTION_MODE_OPTIONS","UnverifiedTransaction","startSeqNo","txSeqNo","transactions","getStartSeqNo","getIndex","setIndex","promise","verifyPromise","addTransaction","transaction","Database","changeHandler","receivedMessage","onChange","_setChangeHandler","fileIds","operationIndex","unverifiedTransactions","Map","transactionCode","applyTransaction","getItems","itemIndex","file","fileEncryptionKeyString","fileEncryptionKey","fileId","record","createdBy","attributionFromTransaction","writeAccess","validateInsert","applyInsert","updatedBy","__v","validateUpdate","applyUpdate","deletedBy","validateUpdateOrDelete","applyDelete","operations","attribution","recordPromises","operation","records","validateBatchTransaction","applyBatchTransaction","fileEncryptionKeyRaw","fileMetadata","fileVersion","fileName","fileSize","fileType","fileUploadedBy","validateUploadFile","applyUploadFile","timestamp","createdByUserId","updatedByUserId","getItemVersionNumber","validateAccessPermissions","getFileVersionNumber","modifiedByUserId","userIsAuthorized","onlyCreator","users","itemExists","existingFile","uniqueItemIds","registerUnverifiedTransaction","unverifiedTransaction","unregisterUnverifiedTransaction","pendingTransaction","prop","userDeleted","shareTokenEncryptionKey","_idempotentOpenDatabase","currentReceivedMessage","_getShareTokenIdFromShareToken","shareTokenArrayBuffer","shareTokenIdArrayBuffer","_openDatabaseByShareToken","shareToken","shareTokenIdAndShareTokenSeed","shareTokenResult","shareTokenSeed","_getShareTokenIdAndShareTokenSeed","_openDatabaseByDatabaseId","_openDatabase","firstMessageFromWebSocket","newDatabaseParams","_openDatabaseByNameHash","_validateEncryptionMode","_validateDbInput","dbName","_validateDbName","allowVerifiedUsersDatabase","_validateDbId","openDatabase","openByDbNameHashParams","encryptedDbKey","encryptedDbName","fingerprint","_getMyFingerprint","_createDatabase","openByDbIdParams","openByShareToken","getOpenDb","insertItem","insertParams","_buildInsertParams","postTransaction","itemString","MAX_ITEM_KB","itemRecord","itemKey","encryptedItem","updateItem","updateParams","_buildUpdateParams","_buildDeleteParams","pendingTx","paramsWithDbData","sequenceNo","getResult","_uploadChunk","bytesTransferredObject","progressHandler","plaintextChunk","reader","FileReader","readAsArrayBuffer","blob","_readBlob","chunkEncryptionKey","encryptedChunkEncryptionKey","encryptedChunk","uploadChunkParams","uploadChunkRequest","bytesTransferred","_uploadChunkRequest","_getChunk","chunkRawBuffer","chunkEncryptionKeyRawBuffer","chunkEncryptionKeyRaw","_verifyUsersParent","verifiedUsers","databaseUser","senderUsername","verificationValues","sentSignature","receivedSignature","senderEcdsaPublicKey","verifiedFingerprint","parentRawEcdsaPublicKey","parentFingerprint","_getFingerprint","parentEcdsaPublicKey","expectedSentSignature","_signFingerprintWithDbKey","verifiedParentSent","recipientEcdsaPublicKey","expectedReceivedSignature","verifiedReceivedFromParent","_verifyReceivedDatabaseFromUser","myFingerprint","myEcdsaPublicKey","mySentSignature","myReceivedSignature","verifiedReceived","mySenderEcdsaPublicKey","_verifySentDatabaseToUser","verifiedSent","_buildDatabaseUserResult","databaseUsers","myUsername","mySenderUsername","sentDatabaseToUser","isChild","receivedDatabaseFromUser","verified","verifiedReceivedDatabaseFromUser","verifiedGrandparent","verifiedUsersParent","receivedFromUsername","_buildDatabaseResult","databaseNameHash","readOnly","resharingAllowed","wrappedDbKey","senderRawEcdsaPublicKey","ephemeralPublicKey","signedEphemeralPublicKey","sharedEncryptedDbKey","senderEphemeralEcdhPublicKey","sharedKeyEncryptionKey","senderFingerprint","_signDbKeyAndFingerprint","databaseUsersResponse","nextPageTokenLessThanUserId","nextPageTokenMoreThanUserId","_getDatabaseUsers","_databaseHasOwner","_getDatabase","requestParams","rawDbKey","dbKeyHash","signedFingerprint","_getDatabaseEncryptionKey","_shareDatabaseWithUsername","requireVerified","recipientPublicKey","_openVerifiedUsersDatabase","recipientRawEcdsaPublicKey","recipientFingerprint","verifiedRecipientFingerprint","foundOldFingerprint","verifiedUsersArray","verifiedUsername","_verifyDatabaseRecipientFingerprint","recipientEcdhPublicKey","ephemeralEcdhKeyPair","rawEphemeralEcdhPublicKey","signedEphemeralEcdhPublicKey","sharedEncryptedDbKeyString","_validateDbSharingInput","ecdsaPublicKeyHash","ecdsaRawPublicKey","getDatabases","databasesResponse","databaseResults","nextPageToken","filter","deleteItem","deleteParams","putTransaction","operationParamsPromises","operationParamsPromiseResults","operationParams","uploadFile","_validateUploadFile","File","currentVersion","_buildFileMetadata","encryptedFileEncryptionKey","encryptedFileMetadata","_completeFileUpload","getFile","range","_validateGetFileParams","chunks","startChunkNumber","endChunkNumber","_getByteRange","finalChunkNumber","_getFile","shareDatabase","shareTokenEncryptedDbKeyString","keyData","shareTokenPublicKey","shareTokenResponse","_getShareToken","modifyDatabasePermissions","revoke","getVerificationMessage","verificationMessage","btoa","_packVerificationMessage","verifyUser","atob","_unpackVerificationMessage","_validatePurchaseOrUpdate","stripeAccountId","successUrl","successUrlProtocol","cancelUrl","cancelUrlProtocol","_validateModifySubscriptionConditions","purchaseSubscription","stripeSessionId","stripePk","Stripe","stripeAccount","redirectToCheckout","cancelSubscription","resumeSubscription","updatePaymentMethod"],"mappings":"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","file":"userbase.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 27);\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","(function (module, exports) {\n  'use strict';\n\n  // Utils\n  function assert (val, msg) {\n    if (!val) throw new Error(msg || 'Assertion failed');\n  }\n\n  // Could use `inherits` module, but don't want to move from single file\n  // architecture yet.\n  function inherits (ctor, superCtor) {\n    ctor.super_ = superCtor;\n    var TempCtor = function () {};\n    TempCtor.prototype = superCtor.prototype;\n    ctor.prototype = new TempCtor();\n    ctor.prototype.constructor = ctor;\n  }\n\n  // BN\n\n  function BN (number, base, endian) {\n    if (BN.isBN(number)) {\n      return number;\n    }\n\n    this.negative = 0;\n    this.words = null;\n    this.length = 0;\n\n    // Reduction context\n    this.red = null;\n\n    if (number !== null) {\n      if (base === 'le' || base === 'be') {\n        endian = base;\n        base = 10;\n      }\n\n      this._init(number || 0, base || 10, endian || 'be');\n    }\n  }\n  if (typeof module === 'object') {\n    module.exports = BN;\n  } else {\n    exports.BN = BN;\n  }\n\n  BN.BN = BN;\n  BN.wordSize = 26;\n\n  var Buffer;\n  try {\n    Buffer = require('buffer').Buffer;\n  } catch (e) {\n  }\n\n  BN.isBN = function isBN (num) {\n    if (num instanceof BN) {\n      return true;\n    }\n\n    return num !== null && typeof num === 'object' &&\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\n  };\n\n  BN.max = function max (left, right) {\n    if (left.cmp(right) > 0) return left;\n    return right;\n  };\n\n  BN.min = function min (left, right) {\n    if (left.cmp(right) < 0) return left;\n    return right;\n  };\n\n  BN.prototype._init = function init (number, base, endian) {\n    if (typeof number === 'number') {\n      return this._initNumber(number, base, endian);\n    }\n\n    if (typeof number === 'object') {\n      return this._initArray(number, base, endian);\n    }\n\n    if (base === 'hex') {\n      base = 16;\n    }\n    assert(base === (base | 0) && base >= 2 && base <= 36);\n\n    number = number.toString().replace(/\\s+/g, '');\n    var start = 0;\n    if (number[0] === '-') {\n      start++;\n    }\n\n    if (base === 16) {\n      this._parseHex(number, start);\n    } else {\n      this._parseBase(number, base, start);\n    }\n\n    if (number[0] === '-') {\n      this.negative = 1;\n    }\n\n    this.strip();\n\n    if (endian !== 'le') return;\n\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\n    if (number < 0) {\n      this.negative = 1;\n      number = -number;\n    }\n    if (number < 0x4000000) {\n      this.words = [ number & 0x3ffffff ];\n      this.length = 1;\n    } else if (number < 0x10000000000000) {\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff\n      ];\n      this.length = 2;\n    } else {\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff,\n        1\n      ];\n      this.length = 3;\n    }\n\n    if (endian !== 'le') return;\n\n    // Reverse the bytes\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initArray = function _initArray (number, base, endian) {\n    // Perhaps a Uint8Array\n    assert(typeof number.length === 'number');\n    if (number.length <= 0) {\n      this.words = [ 0 ];\n      this.length = 1;\n      return this;\n    }\n\n    this.length = Math.ceil(number.length / 3);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    var off = 0;\n    if (endian === 'be') {\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    } else if (endian === 'le') {\n      for (i = 0, j = 0; i < number.length; i += 3) {\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    }\n    return this.strip();\n  };\n\n  function parseHex (str, start, end) {\n    var r = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r <<= 4;\n\n      // 'a' - 'f'\n      if (c >= 49 && c <= 54) {\n        r |= c - 49 + 0xa;\n\n      // 'A' - 'F'\n      } else if (c >= 17 && c <= 22) {\n        r |= c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        r |= c & 0xf;\n      }\n    }\n    return r;\n  }\n\n  BN.prototype._parseHex = function _parseHex (number, start) {\n    // Create possibly bigger array to ensure that it fits the number\n    this.length = Math.ceil((number.length - start) / 6);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    // Scan 24-bit chunks and add them to the number\n    var off = 0;\n    for (i = number.length - 6, j = 0; i >= start; i -= 6) {\n      w = parseHex(number, i, i + 6);\n      this.words[j] |= (w << off) & 0x3ffffff;\n      // NOTE: `0x3fffff` is intentional here, 26bits max shift + 24bit hex limb\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\n      off += 24;\n      if (off >= 26) {\n        off -= 26;\n        j++;\n      }\n    }\n    if (i + 6 !== start) {\n      w = parseHex(number, start, i + 6);\n      this.words[j] |= (w << off) & 0x3ffffff;\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\n    }\n    this.strip();\n  };\n\n  function parseBase (str, start, end, mul) {\n    var r = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r *= mul;\n\n      // 'a'\n      if (c >= 49) {\n        r += c - 49 + 0xa;\n\n      // 'A'\n      } else if (c >= 17) {\n        r += c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        r += c;\n      }\n    }\n    return r;\n  }\n\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\n    // Initialize as zero\n    this.words = [ 0 ];\n    this.length = 1;\n\n    // Find length of limb in base\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\n      limbLen++;\n    }\n    limbLen--;\n    limbPow = (limbPow / base) | 0;\n\n    var total = number.length - start;\n    var mod = total % limbLen;\n    var end = Math.min(total, total - mod) + start;\n\n    var word = 0;\n    for (var i = start; i < end; i += limbLen) {\n      word = parseBase(number, i, i + limbLen, base);\n\n      this.imuln(limbPow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n\n    if (mod !== 0) {\n      var pow = 1;\n      word = parseBase(number, i, number.length, base);\n\n      for (i = 0; i < mod; i++) {\n        pow *= base;\n      }\n\n      this.imuln(pow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n  };\n\n  BN.prototype.copy = function copy (dest) {\n    dest.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      dest.words[i] = this.words[i];\n    }\n    dest.length = this.length;\n    dest.negative = this.negative;\n    dest.red = this.red;\n  };\n\n  BN.prototype.clone = function clone () {\n    var r = new BN(null);\n    this.copy(r);\n    return r;\n  };\n\n  BN.prototype._expand = function _expand (size) {\n    while (this.length < size) {\n      this.words[this.length++] = 0;\n    }\n    return this;\n  };\n\n  // Remove leading `0` from `this`\n  BN.prototype.strip = function strip () {\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\n      this.length--;\n    }\n    return this._normSign();\n  };\n\n  BN.prototype._normSign = function _normSign () {\n    // -0 = 0\n    if (this.length === 1 && this.words[0] === 0) {\n      this.negative = 0;\n    }\n    return this;\n  };\n\n  BN.prototype.inspect = function inspect () {\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\n  };\n\n  /*\n\n  var zeros = [];\n  var groupSizes = [];\n  var groupBases = [];\n\n  var s = '';\n  var i = -1;\n  while (++i < BN.wordSize) {\n    zeros[i] = s;\n    s += '0';\n  }\n  groupSizes[0] = 0;\n  groupSizes[1] = 0;\n  groupBases[0] = 0;\n  groupBases[1] = 0;\n  var base = 2 - 1;\n  while (++base < 36 + 1) {\n    var groupSize = 0;\n    var groupBase = 1;\n    while (groupBase < (1 << BN.wordSize) / base) {\n      groupBase *= base;\n      groupSize += 1;\n    }\n    groupSizes[base] = groupSize;\n    groupBases[base] = groupBase;\n  }\n\n  */\n\n  var zeros = [\n    '',\n    '0',\n    '00',\n    '000',\n    '0000',\n    '00000',\n    '000000',\n    '0000000',\n    '00000000',\n    '000000000',\n    '0000000000',\n    '00000000000',\n    '000000000000',\n    '0000000000000',\n    '00000000000000',\n    '000000000000000',\n    '0000000000000000',\n    '00000000000000000',\n    '000000000000000000',\n    '0000000000000000000',\n    '00000000000000000000',\n    '000000000000000000000',\n    '0000000000000000000000',\n    '00000000000000000000000',\n    '000000000000000000000000',\n    '0000000000000000000000000'\n  ];\n\n  var groupSizes = [\n    0, 0,\n    25, 16, 12, 11, 10, 9, 8,\n    8, 7, 7, 7, 7, 6, 6,\n    6, 6, 6, 6, 6, 5, 5,\n    5, 5, 5, 5, 5, 5, 5,\n    5, 5, 5, 5, 5, 5, 5\n  ];\n\n  var groupBases = [\n    0, 0,\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\n  ];\n\n  BN.prototype.toString = function toString (base, padding) {\n    base = base || 10;\n    padding = padding | 0 || 1;\n\n    var out;\n    if (base === 16 || base === 'hex') {\n      out = '';\n      var off = 0;\n      var carry = 0;\n      for (var i = 0; i < this.length; i++) {\n        var w = this.words[i];\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\n        carry = (w >>> (24 - off)) & 0xffffff;\n        if (carry !== 0 || i !== this.length - 1) {\n          out = zeros[6 - word.length] + word + out;\n        } else {\n          out = word + out;\n        }\n        off += 2;\n        if (off >= 26) {\n          off -= 26;\n          i--;\n        }\n      }\n      if (carry !== 0) {\n        out = carry.toString(16) + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    if (base === (base | 0) && base >= 2 && base <= 36) {\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\n      var groupSize = groupSizes[base];\n      // var groupBase = Math.pow(base, groupSize);\n      var groupBase = groupBases[base];\n      out = '';\n      var c = this.clone();\n      c.negative = 0;\n      while (!c.isZero()) {\n        var r = c.modn(groupBase).toString(base);\n        c = c.idivn(groupBase);\n\n        if (!c.isZero()) {\n          out = zeros[groupSize - r.length] + r + out;\n        } else {\n          out = r + out;\n        }\n      }\n      if (this.isZero()) {\n        out = '0' + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    assert(false, 'Base should be between 2 and 36');\n  };\n\n  BN.prototype.toNumber = function toNumber () {\n    var ret = this.words[0];\n    if (this.length === 2) {\n      ret += this.words[1] * 0x4000000;\n    } else if (this.length === 3 && this.words[2] === 0x01) {\n      // NOTE: at this stage it is known that the top bit is set\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\n    } else if (this.length > 2) {\n      assert(false, 'Number can only safely store up to 53 bits');\n    }\n    return (this.negative !== 0) ? -ret : ret;\n  };\n\n  BN.prototype.toJSON = function toJSON () {\n    return this.toString(16);\n  };\n\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\n    assert(typeof Buffer !== 'undefined');\n    return this.toArrayLike(Buffer, endian, length);\n  };\n\n  BN.prototype.toArray = function toArray (endian, length) {\n    return this.toArrayLike(Array, endian, length);\n  };\n\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\n    var byteLength = this.byteLength();\n    var reqLength = length || Math.max(1, byteLength);\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\n    assert(reqLength > 0, 'Requested array length <= 0');\n\n    this.strip();\n    var littleEndian = endian === 'le';\n    var res = new ArrayType(reqLength);\n\n    var b, i;\n    var q = this.clone();\n    if (!littleEndian) {\n      // Assume big-endian\n      for (i = 0; i < reqLength - byteLength; i++) {\n        res[i] = 0;\n      }\n\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[reqLength - i - 1] = b;\n      }\n    } else {\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[i] = b;\n      }\n\n      for (; i < reqLength; i++) {\n        res[i] = 0;\n      }\n    }\n\n    return res;\n  };\n\n  if (Math.clz32) {\n    BN.prototype._countBits = function _countBits (w) {\n      return 32 - Math.clz32(w);\n    };\n  } else {\n    BN.prototype._countBits = function _countBits (w) {\n      var t = w;\n      var r = 0;\n      if (t >= 0x1000) {\n        r += 13;\n        t >>>= 13;\n      }\n      if (t >= 0x40) {\n        r += 7;\n        t >>>= 7;\n      }\n      if (t >= 0x8) {\n        r += 4;\n        t >>>= 4;\n      }\n      if (t >= 0x02) {\n        r += 2;\n        t >>>= 2;\n      }\n      return r + t;\n    };\n  }\n\n  BN.prototype._zeroBits = function _zeroBits (w) {\n    // Short-cut\n    if (w === 0) return 26;\n\n    var t = w;\n    var r = 0;\n    if ((t & 0x1fff) === 0) {\n      r += 13;\n      t >>>= 13;\n    }\n    if ((t & 0x7f) === 0) {\n      r += 7;\n      t >>>= 7;\n    }\n    if ((t & 0xf) === 0) {\n      r += 4;\n      t >>>= 4;\n    }\n    if ((t & 0x3) === 0) {\n      r += 2;\n      t >>>= 2;\n    }\n    if ((t & 0x1) === 0) {\n      r++;\n    }\n    return r;\n  };\n\n  // Return number of used bits in a BN\n  BN.prototype.bitLength = function bitLength () {\n    var w = this.words[this.length - 1];\n    var hi = this._countBits(w);\n    return (this.length - 1) * 26 + hi;\n  };\n\n  function toBitArray (num) {\n    var w = new Array(num.bitLength());\n\n    for (var bit = 0; bit < w.length; bit++) {\n      var off = (bit / 26) | 0;\n      var wbit = bit % 26;\n\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\n    }\n\n    return w;\n  }\n\n  // Number of trailing zero bits\n  BN.prototype.zeroBits = function zeroBits () {\n    if (this.isZero()) return 0;\n\n    var r = 0;\n    for (var i = 0; i < this.length; i++) {\n      var b = this._zeroBits(this.words[i]);\n      r += b;\n      if (b !== 26) break;\n    }\n    return r;\n  };\n\n  BN.prototype.byteLength = function byteLength () {\n    return Math.ceil(this.bitLength() / 8);\n  };\n\n  BN.prototype.toTwos = function toTwos (width) {\n    if (this.negative !== 0) {\n      return this.abs().inotn(width).iaddn(1);\n    }\n    return this.clone();\n  };\n\n  BN.prototype.fromTwos = function fromTwos (width) {\n    if (this.testn(width - 1)) {\n      return this.notn(width).iaddn(1).ineg();\n    }\n    return this.clone();\n  };\n\n  BN.prototype.isNeg = function isNeg () {\n    return this.negative !== 0;\n  };\n\n  // Return negative clone of `this`\n  BN.prototype.neg = function neg () {\n    return this.clone().ineg();\n  };\n\n  BN.prototype.ineg = function ineg () {\n    if (!this.isZero()) {\n      this.negative ^= 1;\n    }\n\n    return this;\n  };\n\n  // Or `num` with `this` in-place\n  BN.prototype.iuor = function iuor (num) {\n    while (this.length < num.length) {\n      this.words[this.length++] = 0;\n    }\n\n    for (var i = 0; i < num.length; i++) {\n      this.words[i] = this.words[i] | num.words[i];\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ior = function ior (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuor(num);\n  };\n\n  // Or `num` with `this`\n  BN.prototype.or = function or (num) {\n    if (this.length > num.length) return this.clone().ior(num);\n    return num.clone().ior(this);\n  };\n\n  BN.prototype.uor = function uor (num) {\n    if (this.length > num.length) return this.clone().iuor(num);\n    return num.clone().iuor(this);\n  };\n\n  // And `num` with `this` in-place\n  BN.prototype.iuand = function iuand (num) {\n    // b = min-length(num, this)\n    var b;\n    if (this.length > num.length) {\n      b = num;\n    } else {\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = this.words[i] & num.words[i];\n    }\n\n    this.length = b.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.iand = function iand (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuand(num);\n  };\n\n  // And `num` with `this`\n  BN.prototype.and = function and (num) {\n    if (this.length > num.length) return this.clone().iand(num);\n    return num.clone().iand(this);\n  };\n\n  BN.prototype.uand = function uand (num) {\n    if (this.length > num.length) return this.clone().iuand(num);\n    return num.clone().iuand(this);\n  };\n\n  // Xor `num` with `this` in-place\n  BN.prototype.iuxor = function iuxor (num) {\n    // a.length > b.length\n    var a;\n    var b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = a.words[i] ^ b.words[i];\n    }\n\n    if (this !== a) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = a.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.ixor = function ixor (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuxor(num);\n  };\n\n  // Xor `num` with `this`\n  BN.prototype.xor = function xor (num) {\n    if (this.length > num.length) return this.clone().ixor(num);\n    return num.clone().ixor(this);\n  };\n\n  BN.prototype.uxor = function uxor (num) {\n    if (this.length > num.length) return this.clone().iuxor(num);\n    return num.clone().iuxor(this);\n  };\n\n  // Not ``this`` with ``width`` bitwidth\n  BN.prototype.inotn = function inotn (width) {\n    assert(typeof width === 'number' && width >= 0);\n\n    var bytesNeeded = Math.ceil(width / 26) | 0;\n    var bitsLeft = width % 26;\n\n    // Extend the buffer with leading zeroes\n    this._expand(bytesNeeded);\n\n    if (bitsLeft > 0) {\n      bytesNeeded--;\n    }\n\n    // Handle complete words\n    for (var i = 0; i < bytesNeeded; i++) {\n      this.words[i] = ~this.words[i] & 0x3ffffff;\n    }\n\n    // Handle the residue\n    if (bitsLeft > 0) {\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\n    }\n\n    // And remove leading zeroes\n    return this.strip();\n  };\n\n  BN.prototype.notn = function notn (width) {\n    return this.clone().inotn(width);\n  };\n\n  // Set `bit` of `this`\n  BN.prototype.setn = function setn (bit, val) {\n    assert(typeof bit === 'number' && bit >= 0);\n\n    var off = (bit / 26) | 0;\n    var wbit = bit % 26;\n\n    this._expand(off + 1);\n\n    if (val) {\n      this.words[off] = this.words[off] | (1 << wbit);\n    } else {\n      this.words[off] = this.words[off] & ~(1 << wbit);\n    }\n\n    return this.strip();\n  };\n\n  // Add `num` to `this` in-place\n  BN.prototype.iadd = function iadd (num) {\n    var r;\n\n    // negative + positive\n    if (this.negative !== 0 && num.negative === 0) {\n      this.negative = 0;\n      r = this.isub(num);\n      this.negative ^= 1;\n      return this._normSign();\n\n    // positive + negative\n    } else if (this.negative === 0 && num.negative !== 0) {\n      num.negative = 0;\n      r = this.isub(num);\n      num.negative = 1;\n      return r._normSign();\n    }\n\n    // a.length > b.length\n    var a, b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n\n    this.length = a.length;\n    if (carry !== 0) {\n      this.words[this.length] = carry;\n      this.length++;\n    // Copy the rest of the words\n    } else if (a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    return this;\n  };\n\n  // Add `num` to `this`\n  BN.prototype.add = function add (num) {\n    var res;\n    if (num.negative !== 0 && this.negative === 0) {\n      num.negative = 0;\n      res = this.sub(num);\n      num.negative ^= 1;\n      return res;\n    } else if (num.negative === 0 && this.negative !== 0) {\n      this.negative = 0;\n      res = num.sub(this);\n      this.negative = 1;\n      return res;\n    }\n\n    if (this.length > num.length) return this.clone().iadd(num);\n\n    return num.clone().iadd(this);\n  };\n\n  // Subtract `num` from `this` in-place\n  BN.prototype.isub = function isub (num) {\n    // this - (-num) = this + num\n    if (num.negative !== 0) {\n      num.negative = 0;\n      var r = this.iadd(num);\n      num.negative = 1;\n      return r._normSign();\n\n    // -this - num = -(this + num)\n    } else if (this.negative !== 0) {\n      this.negative = 0;\n      this.iadd(num);\n      this.negative = 1;\n      return this._normSign();\n    }\n\n    // At this point both numbers are positive\n    var cmp = this.cmp(num);\n\n    // Optimization - zeroify\n    if (cmp === 0) {\n      this.negative = 0;\n      this.length = 1;\n      this.words[0] = 0;\n      return this;\n    }\n\n    // a > b\n    var a, b;\n    if (cmp > 0) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n\n    // Copy rest of the words\n    if (carry === 0 && i < a.length && a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = Math.max(this.length, i);\n\n    if (a !== this) {\n      this.negative = 1;\n    }\n\n    return this.strip();\n  };\n\n  // Subtract `num` from `this`\n  BN.prototype.sub = function sub (num) {\n    return this.clone().isub(num);\n  };\n\n  function smallMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    var len = (self.length + num.length) | 0;\n    out.length = len;\n    len = (len - 1) | 0;\n\n    // Peel one iteration (compiler can't do it, because of code complexity)\n    var a = self.words[0] | 0;\n    var b = num.words[0] | 0;\n    var r = a * b;\n\n    var lo = r & 0x3ffffff;\n    var carry = (r / 0x4000000) | 0;\n    out.words[0] = lo;\n\n    for (var k = 1; k < len; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = carry >>> 26;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = (k - j) | 0;\n        a = self.words[i] | 0;\n        b = num.words[j] | 0;\n        r = a * b + rword;\n        ncarry += (r / 0x4000000) | 0;\n        rword = r & 0x3ffffff;\n      }\n      out.words[k] = rword | 0;\n      carry = ncarry | 0;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry | 0;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\n  // multiplication (like elliptic secp256k1).\n  var comb10MulTo = function comb10MulTo (self, num, out) {\n    var a = self.words;\n    var b = num.words;\n    var o = out.words;\n    var c = 0;\n    var lo;\n    var mid;\n    var hi;\n    var a0 = a[0] | 0;\n    var al0 = a0 & 0x1fff;\n    var ah0 = a0 >>> 13;\n    var a1 = a[1] | 0;\n    var al1 = a1 & 0x1fff;\n    var ah1 = a1 >>> 13;\n    var a2 = a[2] | 0;\n    var al2 = a2 & 0x1fff;\n    var ah2 = a2 >>> 13;\n    var a3 = a[3] | 0;\n    var al3 = a3 & 0x1fff;\n    var ah3 = a3 >>> 13;\n    var a4 = a[4] | 0;\n    var al4 = a4 & 0x1fff;\n    var ah4 = a4 >>> 13;\n    var a5 = a[5] | 0;\n    var al5 = a5 & 0x1fff;\n    var ah5 = a5 >>> 13;\n    var a6 = a[6] | 0;\n    var al6 = a6 & 0x1fff;\n    var ah6 = a6 >>> 13;\n    var a7 = a[7] | 0;\n    var al7 = a7 & 0x1fff;\n    var ah7 = a7 >>> 13;\n    var a8 = a[8] | 0;\n    var al8 = a8 & 0x1fff;\n    var ah8 = a8 >>> 13;\n    var a9 = a[9] | 0;\n    var al9 = a9 & 0x1fff;\n    var ah9 = a9 >>> 13;\n    var b0 = b[0] | 0;\n    var bl0 = b0 & 0x1fff;\n    var bh0 = b0 >>> 13;\n    var b1 = b[1] | 0;\n    var bl1 = b1 & 0x1fff;\n    var bh1 = b1 >>> 13;\n    var b2 = b[2] | 0;\n    var bl2 = b2 & 0x1fff;\n    var bh2 = b2 >>> 13;\n    var b3 = b[3] | 0;\n    var bl3 = b3 & 0x1fff;\n    var bh3 = b3 >>> 13;\n    var b4 = b[4] | 0;\n    var bl4 = b4 & 0x1fff;\n    var bh4 = b4 >>> 13;\n    var b5 = b[5] | 0;\n    var bl5 = b5 & 0x1fff;\n    var bh5 = b5 >>> 13;\n    var b6 = b[6] | 0;\n    var bl6 = b6 & 0x1fff;\n    var bh6 = b6 >>> 13;\n    var b7 = b[7] | 0;\n    var bl7 = b7 & 0x1fff;\n    var bh7 = b7 >>> 13;\n    var b8 = b[8] | 0;\n    var bl8 = b8 & 0x1fff;\n    var bh8 = b8 >>> 13;\n    var b9 = b[9] | 0;\n    var bl9 = b9 & 0x1fff;\n    var bh9 = b9 >>> 13;\n\n    out.negative = self.negative ^ num.negative;\n    out.length = 19;\n    /* k = 0 */\n    lo = Math.imul(al0, bl0);\n    mid = Math.imul(al0, bh0);\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\n    hi = Math.imul(ah0, bh0);\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\n    w0 &= 0x3ffffff;\n    /* k = 1 */\n    lo = Math.imul(al1, bl0);\n    mid = Math.imul(al1, bh0);\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\n    hi = Math.imul(ah1, bh0);\n    lo = (lo + Math.imul(al0, bl1)) | 0;\n    mid = (mid + Math.imul(al0, bh1)) | 0;\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\n    w1 &= 0x3ffffff;\n    /* k = 2 */\n    lo = Math.imul(al2, bl0);\n    mid = Math.imul(al2, bh0);\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\n    hi = Math.imul(ah2, bh0);\n    lo = (lo + Math.imul(al1, bl1)) | 0;\n    mid = (mid + Math.imul(al1, bh1)) | 0;\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\n    lo = (lo + Math.imul(al0, bl2)) | 0;\n    mid = (mid + Math.imul(al0, bh2)) | 0;\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\n    w2 &= 0x3ffffff;\n    /* k = 3 */\n    lo = Math.imul(al3, bl0);\n    mid = Math.imul(al3, bh0);\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\n    hi = Math.imul(ah3, bh0);\n    lo = (lo + Math.imul(al2, bl1)) | 0;\n    mid = (mid + Math.imul(al2, bh1)) | 0;\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\n    lo = (lo + Math.imul(al1, bl2)) | 0;\n    mid = (mid + Math.imul(al1, bh2)) | 0;\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\n    lo = (lo + Math.imul(al0, bl3)) | 0;\n    mid = (mid + Math.imul(al0, bh3)) | 0;\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\n    w3 &= 0x3ffffff;\n    /* k = 4 */\n    lo = Math.imul(al4, bl0);\n    mid = Math.imul(al4, bh0);\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\n    hi = Math.imul(ah4, bh0);\n    lo = (lo + Math.imul(al3, bl1)) | 0;\n    mid = (mid + Math.imul(al3, bh1)) | 0;\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\n    lo = (lo + Math.imul(al2, bl2)) | 0;\n    mid = (mid + Math.imul(al2, bh2)) | 0;\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\n    lo = (lo + Math.imul(al1, bl3)) | 0;\n    mid = (mid + Math.imul(al1, bh3)) | 0;\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\n    lo = (lo + Math.imul(al0, bl4)) | 0;\n    mid = (mid + Math.imul(al0, bh4)) | 0;\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\n    w4 &= 0x3ffffff;\n    /* k = 5 */\n    lo = Math.imul(al5, bl0);\n    mid = Math.imul(al5, bh0);\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\n    hi = Math.imul(ah5, bh0);\n    lo = (lo + Math.imul(al4, bl1)) | 0;\n    mid = (mid + Math.imul(al4, bh1)) | 0;\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\n    lo = (lo + Math.imul(al3, bl2)) | 0;\n    mid = (mid + Math.imul(al3, bh2)) | 0;\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\n    lo = (lo + Math.imul(al2, bl3)) | 0;\n    mid = (mid + Math.imul(al2, bh3)) | 0;\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\n    lo = (lo + Math.imul(al1, bl4)) | 0;\n    mid = (mid + Math.imul(al1, bh4)) | 0;\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\n    lo = (lo + Math.imul(al0, bl5)) | 0;\n    mid = (mid + Math.imul(al0, bh5)) | 0;\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\n    w5 &= 0x3ffffff;\n    /* k = 6 */\n    lo = Math.imul(al6, bl0);\n    mid = Math.imul(al6, bh0);\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\n    hi = Math.imul(ah6, bh0);\n    lo = (lo + Math.imul(al5, bl1)) | 0;\n    mid = (mid + Math.imul(al5, bh1)) | 0;\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\n    lo = (lo + Math.imul(al4, bl2)) | 0;\n    mid = (mid + Math.imul(al4, bh2)) | 0;\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\n    lo = (lo + Math.imul(al3, bl3)) | 0;\n    mid = (mid + Math.imul(al3, bh3)) | 0;\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\n    lo = (lo + Math.imul(al2, bl4)) | 0;\n    mid = (mid + Math.imul(al2, bh4)) | 0;\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\n    lo = (lo + Math.imul(al1, bl5)) | 0;\n    mid = (mid + Math.imul(al1, bh5)) | 0;\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\n    lo = (lo + Math.imul(al0, bl6)) | 0;\n    mid = (mid + Math.imul(al0, bh6)) | 0;\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\n    w6 &= 0x3ffffff;\n    /* k = 7 */\n    lo = Math.imul(al7, bl0);\n    mid = Math.imul(al7, bh0);\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\n    hi = Math.imul(ah7, bh0);\n    lo = (lo + Math.imul(al6, bl1)) | 0;\n    mid = (mid + Math.imul(al6, bh1)) | 0;\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\n    lo = (lo + Math.imul(al5, bl2)) | 0;\n    mid = (mid + Math.imul(al5, bh2)) | 0;\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\n    lo = (lo + Math.imul(al4, bl3)) | 0;\n    mid = (mid + Math.imul(al4, bh3)) | 0;\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\n    lo = (lo + Math.imul(al3, bl4)) | 0;\n    mid = (mid + Math.imul(al3, bh4)) | 0;\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\n    lo = (lo + Math.imul(al2, bl5)) | 0;\n    mid = (mid + Math.imul(al2, bh5)) | 0;\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\n    lo = (lo + Math.imul(al1, bl6)) | 0;\n    mid = (mid + Math.imul(al1, bh6)) | 0;\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\n    lo = (lo + Math.imul(al0, bl7)) | 0;\n    mid = (mid + Math.imul(al0, bh7)) | 0;\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\n    w7 &= 0x3ffffff;\n    /* k = 8 */\n    lo = Math.imul(al8, bl0);\n    mid = Math.imul(al8, bh0);\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\n    hi = Math.imul(ah8, bh0);\n    lo = (lo + Math.imul(al7, bl1)) | 0;\n    mid = (mid + Math.imul(al7, bh1)) | 0;\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\n    lo = (lo + Math.imul(al6, bl2)) | 0;\n    mid = (mid + Math.imul(al6, bh2)) | 0;\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\n    lo = (lo + Math.imul(al5, bl3)) | 0;\n    mid = (mid + Math.imul(al5, bh3)) | 0;\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\n    lo = (lo + Math.imul(al4, bl4)) | 0;\n    mid = (mid + Math.imul(al4, bh4)) | 0;\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\n    lo = (lo + Math.imul(al3, bl5)) | 0;\n    mid = (mid + Math.imul(al3, bh5)) | 0;\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\n    lo = (lo + Math.imul(al2, bl6)) | 0;\n    mid = (mid + Math.imul(al2, bh6)) | 0;\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\n    lo = (lo + Math.imul(al1, bl7)) | 0;\n    mid = (mid + Math.imul(al1, bh7)) | 0;\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\n    lo = (lo + Math.imul(al0, bl8)) | 0;\n    mid = (mid + Math.imul(al0, bh8)) | 0;\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\n    w8 &= 0x3ffffff;\n    /* k = 9 */\n    lo = Math.imul(al9, bl0);\n    mid = Math.imul(al9, bh0);\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\n    hi = Math.imul(ah9, bh0);\n    lo = (lo + Math.imul(al8, bl1)) | 0;\n    mid = (mid + Math.imul(al8, bh1)) | 0;\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\n    lo = (lo + Math.imul(al7, bl2)) | 0;\n    mid = (mid + Math.imul(al7, bh2)) | 0;\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\n    lo = (lo + Math.imul(al6, bl3)) | 0;\n    mid = (mid + Math.imul(al6, bh3)) | 0;\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\n    lo = (lo + Math.imul(al5, bl4)) | 0;\n    mid = (mid + Math.imul(al5, bh4)) | 0;\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\n    lo = (lo + Math.imul(al4, bl5)) | 0;\n    mid = (mid + Math.imul(al4, bh5)) | 0;\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\n    lo = (lo + Math.imul(al3, bl6)) | 0;\n    mid = (mid + Math.imul(al3, bh6)) | 0;\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\n    lo = (lo + Math.imul(al2, bl7)) | 0;\n    mid = (mid + Math.imul(al2, bh7)) | 0;\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\n    lo = (lo + Math.imul(al1, bl8)) | 0;\n    mid = (mid + Math.imul(al1, bh8)) | 0;\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\n    lo = (lo + Math.imul(al0, bl9)) | 0;\n    mid = (mid + Math.imul(al0, bh9)) | 0;\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\n    w9 &= 0x3ffffff;\n    /* k = 10 */\n    lo = Math.imul(al9, bl1);\n    mid = Math.imul(al9, bh1);\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\n    hi = Math.imul(ah9, bh1);\n    lo = (lo + Math.imul(al8, bl2)) | 0;\n    mid = (mid + Math.imul(al8, bh2)) | 0;\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\n    lo = (lo + Math.imul(al7, bl3)) | 0;\n    mid = (mid + Math.imul(al7, bh3)) | 0;\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\n    lo = (lo + Math.imul(al6, bl4)) | 0;\n    mid = (mid + Math.imul(al6, bh4)) | 0;\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\n    lo = (lo + Math.imul(al5, bl5)) | 0;\n    mid = (mid + Math.imul(al5, bh5)) | 0;\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\n    lo = (lo + Math.imul(al4, bl6)) | 0;\n    mid = (mid + Math.imul(al4, bh6)) | 0;\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\n    lo = (lo + Math.imul(al3, bl7)) | 0;\n    mid = (mid + Math.imul(al3, bh7)) | 0;\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\n    lo = (lo + Math.imul(al2, bl8)) | 0;\n    mid = (mid + Math.imul(al2, bh8)) | 0;\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\n    lo = (lo + Math.imul(al1, bl9)) | 0;\n    mid = (mid + Math.imul(al1, bh9)) | 0;\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\n    w10 &= 0x3ffffff;\n    /* k = 11 */\n    lo = Math.imul(al9, bl2);\n    mid = Math.imul(al9, bh2);\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\n    hi = Math.imul(ah9, bh2);\n    lo = (lo + Math.imul(al8, bl3)) | 0;\n    mid = (mid + Math.imul(al8, bh3)) | 0;\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\n    lo = (lo + Math.imul(al7, bl4)) | 0;\n    mid = (mid + Math.imul(al7, bh4)) | 0;\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\n    lo = (lo + Math.imul(al6, bl5)) | 0;\n    mid = (mid + Math.imul(al6, bh5)) | 0;\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\n    lo = (lo + Math.imul(al5, bl6)) | 0;\n    mid = (mid + Math.imul(al5, bh6)) | 0;\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\n    lo = (lo + Math.imul(al4, bl7)) | 0;\n    mid = (mid + Math.imul(al4, bh7)) | 0;\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\n    lo = (lo + Math.imul(al3, bl8)) | 0;\n    mid = (mid + Math.imul(al3, bh8)) | 0;\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\n    lo = (lo + Math.imul(al2, bl9)) | 0;\n    mid = (mid + Math.imul(al2, bh9)) | 0;\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\n    w11 &= 0x3ffffff;\n    /* k = 12 */\n    lo = Math.imul(al9, bl3);\n    mid = Math.imul(al9, bh3);\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\n    hi = Math.imul(ah9, bh3);\n    lo = (lo + Math.imul(al8, bl4)) | 0;\n    mid = (mid + Math.imul(al8, bh4)) | 0;\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\n    lo = (lo + Math.imul(al7, bl5)) | 0;\n    mid = (mid + Math.imul(al7, bh5)) | 0;\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\n    lo = (lo + Math.imul(al6, bl6)) | 0;\n    mid = (mid + Math.imul(al6, bh6)) | 0;\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\n    lo = (lo + Math.imul(al5, bl7)) | 0;\n    mid = (mid + Math.imul(al5, bh7)) | 0;\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\n    lo = (lo + Math.imul(al4, bl8)) | 0;\n    mid = (mid + Math.imul(al4, bh8)) | 0;\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\n    lo = (lo + Math.imul(al3, bl9)) | 0;\n    mid = (mid + Math.imul(al3, bh9)) | 0;\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\n    w12 &= 0x3ffffff;\n    /* k = 13 */\n    lo = Math.imul(al9, bl4);\n    mid = Math.imul(al9, bh4);\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\n    hi = Math.imul(ah9, bh4);\n    lo = (lo + Math.imul(al8, bl5)) | 0;\n    mid = (mid + Math.imul(al8, bh5)) | 0;\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\n    lo = (lo + Math.imul(al7, bl6)) | 0;\n    mid = (mid + Math.imul(al7, bh6)) | 0;\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\n    lo = (lo + Math.imul(al6, bl7)) | 0;\n    mid = (mid + Math.imul(al6, bh7)) | 0;\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\n    lo = (lo + Math.imul(al5, bl8)) | 0;\n    mid = (mid + Math.imul(al5, bh8)) | 0;\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\n    lo = (lo + Math.imul(al4, bl9)) | 0;\n    mid = (mid + Math.imul(al4, bh9)) | 0;\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\n    w13 &= 0x3ffffff;\n    /* k = 14 */\n    lo = Math.imul(al9, bl5);\n    mid = Math.imul(al9, bh5);\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\n    hi = Math.imul(ah9, bh5);\n    lo = (lo + Math.imul(al8, bl6)) | 0;\n    mid = (mid + Math.imul(al8, bh6)) | 0;\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\n    lo = (lo + Math.imul(al7, bl7)) | 0;\n    mid = (mid + Math.imul(al7, bh7)) | 0;\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\n    lo = (lo + Math.imul(al6, bl8)) | 0;\n    mid = (mid + Math.imul(al6, bh8)) | 0;\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\n    lo = (lo + Math.imul(al5, bl9)) | 0;\n    mid = (mid + Math.imul(al5, bh9)) | 0;\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\n    w14 &= 0x3ffffff;\n    /* k = 15 */\n    lo = Math.imul(al9, bl6);\n    mid = Math.imul(al9, bh6);\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\n    hi = Math.imul(ah9, bh6);\n    lo = (lo + Math.imul(al8, bl7)) | 0;\n    mid = (mid + Math.imul(al8, bh7)) | 0;\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\n    lo = (lo + Math.imul(al7, bl8)) | 0;\n    mid = (mid + Math.imul(al7, bh8)) | 0;\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\n    lo = (lo + Math.imul(al6, bl9)) | 0;\n    mid = (mid + Math.imul(al6, bh9)) | 0;\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\n    w15 &= 0x3ffffff;\n    /* k = 16 */\n    lo = Math.imul(al9, bl7);\n    mid = Math.imul(al9, bh7);\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\n    hi = Math.imul(ah9, bh7);\n    lo = (lo + Math.imul(al8, bl8)) | 0;\n    mid = (mid + Math.imul(al8, bh8)) | 0;\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\n    lo = (lo + Math.imul(al7, bl9)) | 0;\n    mid = (mid + Math.imul(al7, bh9)) | 0;\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\n    w16 &= 0x3ffffff;\n    /* k = 17 */\n    lo = Math.imul(al9, bl8);\n    mid = Math.imul(al9, bh8);\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\n    hi = Math.imul(ah9, bh8);\n    lo = (lo + Math.imul(al8, bl9)) | 0;\n    mid = (mid + Math.imul(al8, bh9)) | 0;\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\n    w17 &= 0x3ffffff;\n    /* k = 18 */\n    lo = Math.imul(al9, bl9);\n    mid = Math.imul(al9, bh9);\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\n    hi = Math.imul(ah9, bh9);\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\n    w18 &= 0x3ffffff;\n    o[0] = w0;\n    o[1] = w1;\n    o[2] = w2;\n    o[3] = w3;\n    o[4] = w4;\n    o[5] = w5;\n    o[6] = w6;\n    o[7] = w7;\n    o[8] = w8;\n    o[9] = w9;\n    o[10] = w10;\n    o[11] = w11;\n    o[12] = w12;\n    o[13] = w13;\n    o[14] = w14;\n    o[15] = w15;\n    o[16] = w16;\n    o[17] = w17;\n    o[18] = w18;\n    if (c !== 0) {\n      o[19] = c;\n      out.length++;\n    }\n    return out;\n  };\n\n  // Polyfill comb\n  if (!Math.imul) {\n    comb10MulTo = smallMulTo;\n  }\n\n  function bigMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    out.length = self.length + num.length;\n\n    var carry = 0;\n    var hncarry = 0;\n    for (var k = 0; k < out.length - 1; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = hncarry;\n      hncarry = 0;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = k - j;\n        var a = self.words[i] | 0;\n        var b = num.words[j] | 0;\n        var r = a * b;\n\n        var lo = r & 0x3ffffff;\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\n        lo = (lo + rword) | 0;\n        rword = lo & 0x3ffffff;\n        ncarry = (ncarry + (lo >>> 26)) | 0;\n\n        hncarry += ncarry >>> 26;\n        ncarry &= 0x3ffffff;\n      }\n      out.words[k] = rword;\n      carry = ncarry;\n      ncarry = hncarry;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  function jumboMulTo (self, num, out) {\n    var fftm = new FFTM();\n    return fftm.mulp(self, num, out);\n  }\n\n  BN.prototype.mulTo = function mulTo (num, out) {\n    var res;\n    var len = this.length + num.length;\n    if (this.length === 10 && num.length === 10) {\n      res = comb10MulTo(this, num, out);\n    } else if (len < 63) {\n      res = smallMulTo(this, num, out);\n    } else if (len < 1024) {\n      res = bigMulTo(this, num, out);\n    } else {\n      res = jumboMulTo(this, num, out);\n    }\n\n    return res;\n  };\n\n  // Cooley-Tukey algorithm for FFT\n  // slightly revisited to rely on looping instead of recursion\n\n  function FFTM (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  FFTM.prototype.makeRBT = function makeRBT (N) {\n    var t = new Array(N);\n    var l = BN.prototype._countBits(N) - 1;\n    for (var i = 0; i < N; i++) {\n      t[i] = this.revBin(i, l, N);\n    }\n\n    return t;\n  };\n\n  // Returns binary-reversed representation of `x`\n  FFTM.prototype.revBin = function revBin (x, l, N) {\n    if (x === 0 || x === N - 1) return x;\n\n    var rb = 0;\n    for (var i = 0; i < l; i++) {\n      rb |= (x & 1) << (l - i - 1);\n      x >>= 1;\n    }\n\n    return rb;\n  };\n\n  // Performs \"tweedling\" phase, therefore 'emulating'\n  // behaviour of the recursive algorithm\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\n    for (var i = 0; i < N; i++) {\n      rtws[i] = rws[rbt[i]];\n      itws[i] = iws[rbt[i]];\n    }\n  };\n\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\n    this.permute(rbt, rws, iws, rtws, itws, N);\n\n    for (var s = 1; s < N; s <<= 1) {\n      var l = s << 1;\n\n      var rtwdf = Math.cos(2 * Math.PI / l);\n      var itwdf = Math.sin(2 * Math.PI / l);\n\n      for (var p = 0; p < N; p += l) {\n        var rtwdf_ = rtwdf;\n        var itwdf_ = itwdf;\n\n        for (var j = 0; j < s; j++) {\n          var re = rtws[p + j];\n          var ie = itws[p + j];\n\n          var ro = rtws[p + j + s];\n          var io = itws[p + j + s];\n\n          var rx = rtwdf_ * ro - itwdf_ * io;\n\n          io = rtwdf_ * io + itwdf_ * ro;\n          ro = rx;\n\n          rtws[p + j] = re + ro;\n          itws[p + j] = ie + io;\n\n          rtws[p + j + s] = re - ro;\n          itws[p + j + s] = ie - io;\n\n          /* jshint maxdepth : false */\n          if (j !== l) {\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\n\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\n            rtwdf_ = rx;\n          }\n        }\n      }\n    }\n  };\n\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\n    var N = Math.max(m, n) | 1;\n    var odd = N & 1;\n    var i = 0;\n    for (N = N / 2 | 0; N; N = N >>> 1) {\n      i++;\n    }\n\n    return 1 << i + 1 + odd;\n  };\n\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\n    if (N <= 1) return;\n\n    for (var i = 0; i < N / 2; i++) {\n      var t = rws[i];\n\n      rws[i] = rws[N - i - 1];\n      rws[N - i - 1] = t;\n\n      t = iws[i];\n\n      iws[i] = -iws[N - i - 1];\n      iws[N - i - 1] = -t;\n    }\n  };\n\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\n    var carry = 0;\n    for (var i = 0; i < N / 2; i++) {\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\n        Math.round(ws[2 * i] / N) +\n        carry;\n\n      ws[i] = w & 0x3ffffff;\n\n      if (w < 0x4000000) {\n        carry = 0;\n      } else {\n        carry = w / 0x4000000 | 0;\n      }\n    }\n\n    return ws;\n  };\n\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\n    var carry = 0;\n    for (var i = 0; i < len; i++) {\n      carry = carry + (ws[i] | 0);\n\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\n    }\n\n    // Pad with zeroes\n    for (i = 2 * len; i < N; ++i) {\n      rws[i] = 0;\n    }\n\n    assert(carry === 0);\n    assert((carry & ~0x1fff) === 0);\n  };\n\n  FFTM.prototype.stub = function stub (N) {\n    var ph = new Array(N);\n    for (var i = 0; i < N; i++) {\n      ph[i] = 0;\n    }\n\n    return ph;\n  };\n\n  FFTM.prototype.mulp = function mulp (x, y, out) {\n    var N = 2 * this.guessLen13b(x.length, y.length);\n\n    var rbt = this.makeRBT(N);\n\n    var _ = this.stub(N);\n\n    var rws = new Array(N);\n    var rwst = new Array(N);\n    var iwst = new Array(N);\n\n    var nrws = new Array(N);\n    var nrwst = new Array(N);\n    var niwst = new Array(N);\n\n    var rmws = out.words;\n    rmws.length = N;\n\n    this.convert13b(x.words, x.length, rws, N);\n    this.convert13b(y.words, y.length, nrws, N);\n\n    this.transform(rws, _, rwst, iwst, N, rbt);\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\n\n    for (var i = 0; i < N; i++) {\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\n      rwst[i] = rx;\n    }\n\n    this.conjugate(rwst, iwst, N);\n    this.transform(rwst, iwst, rmws, _, N, rbt);\n    this.conjugate(rmws, _, N);\n    this.normalize13b(rmws, N);\n\n    out.negative = x.negative ^ y.negative;\n    out.length = x.length + y.length;\n    return out.strip();\n  };\n\n  // Multiply `this` by `num`\n  BN.prototype.mul = function mul (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return this.mulTo(num, out);\n  };\n\n  // Multiply employing FFT\n  BN.prototype.mulf = function mulf (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return jumboMulTo(this, num, out);\n  };\n\n  // In-place Multiplication\n  BN.prototype.imul = function imul (num) {\n    return this.clone().mulTo(num, this);\n  };\n\n  BN.prototype.imuln = function imuln (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n\n    // Carry\n    var carry = 0;\n    for (var i = 0; i < this.length; i++) {\n      var w = (this.words[i] | 0) * num;\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\n      carry >>= 26;\n      carry += (w / 0x4000000) | 0;\n      // NOTE: lo is 27bit maximum\n      carry += lo >>> 26;\n      this.words[i] = lo & 0x3ffffff;\n    }\n\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n\n    return this;\n  };\n\n  BN.prototype.muln = function muln (num) {\n    return this.clone().imuln(num);\n  };\n\n  // `this` * `this`\n  BN.prototype.sqr = function sqr () {\n    return this.mul(this);\n  };\n\n  // `this` * `this` in-place\n  BN.prototype.isqr = function isqr () {\n    return this.imul(this.clone());\n  };\n\n  // Math.pow(`this`, `num`)\n  BN.prototype.pow = function pow (num) {\n    var w = toBitArray(num);\n    if (w.length === 0) return new BN(1);\n\n    // Skip leading zeroes\n    var res = this;\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\n      if (w[i] !== 0) break;\n    }\n\n    if (++i < w.length) {\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\n        if (w[i] === 0) continue;\n\n        res = res.mul(q);\n      }\n    }\n\n    return res;\n  };\n\n  // Shift-left in-place\n  BN.prototype.iushln = function iushln (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\n    var i;\n\n    if (r !== 0) {\n      var carry = 0;\n\n      for (i = 0; i < this.length; i++) {\n        var newCarry = this.words[i] & carryMask;\n        var c = ((this.words[i] | 0) - newCarry) << r;\n        this.words[i] = c | carry;\n        carry = newCarry >>> (26 - r);\n      }\n\n      if (carry) {\n        this.words[i] = carry;\n        this.length++;\n      }\n    }\n\n    if (s !== 0) {\n      for (i = this.length - 1; i >= 0; i--) {\n        this.words[i + s] = this.words[i];\n      }\n\n      for (i = 0; i < s; i++) {\n        this.words[i] = 0;\n      }\n\n      this.length += s;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishln = function ishln (bits) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushln(bits);\n  };\n\n  // Shift-right in-place\n  // NOTE: `hint` is a lowest bit before trailing zeroes\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var h;\n    if (hint) {\n      h = (hint - (hint % 26)) / 26;\n    } else {\n      h = 0;\n    }\n\n    var r = bits % 26;\n    var s = Math.min((bits - r) / 26, this.length);\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n    var maskedWords = extended;\n\n    h -= s;\n    h = Math.max(0, h);\n\n    // Extended mode, copy masked part\n    if (maskedWords) {\n      for (var i = 0; i < s; i++) {\n        maskedWords.words[i] = this.words[i];\n      }\n      maskedWords.length = s;\n    }\n\n    if (s === 0) {\n      // No-op, we should not move anything at all\n    } else if (this.length > s) {\n      this.length -= s;\n      for (i = 0; i < this.length; i++) {\n        this.words[i] = this.words[i + s];\n      }\n    } else {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    var carry = 0;\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\n      var word = this.words[i] | 0;\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\n      carry = word & mask;\n    }\n\n    // Push carried bits as a mask\n    if (maskedWords && carry !== 0) {\n      maskedWords.words[maskedWords.length++] = carry;\n    }\n\n    if (this.length === 0) {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushrn(bits, hint, extended);\n  };\n\n  // Shift-left\n  BN.prototype.shln = function shln (bits) {\n    return this.clone().ishln(bits);\n  };\n\n  BN.prototype.ushln = function ushln (bits) {\n    return this.clone().iushln(bits);\n  };\n\n  // Shift-right\n  BN.prototype.shrn = function shrn (bits) {\n    return this.clone().ishrn(bits);\n  };\n\n  BN.prototype.ushrn = function ushrn (bits) {\n    return this.clone().iushrn(bits);\n  };\n\n  // Test if n bit is set\n  BN.prototype.testn = function testn (bit) {\n    assert(typeof bit === 'number' && bit >= 0);\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) return false;\n\n    // Check bit and return\n    var w = this.words[s];\n\n    return !!(w & q);\n  };\n\n  // Return only lowers bits of number (in-place)\n  BN.prototype.imaskn = function imaskn (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\n\n    if (this.length <= s) {\n      return this;\n    }\n\n    if (r !== 0) {\n      s++;\n    }\n    this.length = Math.min(s, this.length);\n\n    if (r !== 0) {\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n      this.words[this.length - 1] &= mask;\n    }\n\n    return this.strip();\n  };\n\n  // Return only lowers bits of number\n  BN.prototype.maskn = function maskn (bits) {\n    return this.clone().imaskn(bits);\n  };\n\n  // Add plain number `num` to `this`\n  BN.prototype.iaddn = function iaddn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.isubn(-num);\n\n    // Possible sign change\n    if (this.negative !== 0) {\n      if (this.length === 1 && (this.words[0] | 0) < num) {\n        this.words[0] = num - (this.words[0] | 0);\n        this.negative = 0;\n        return this;\n      }\n\n      this.negative = 0;\n      this.isubn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    // Add without checks\n    return this._iaddn(num);\n  };\n\n  BN.prototype._iaddn = function _iaddn (num) {\n    this.words[0] += num;\n\n    // Carry\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\n      this.words[i] -= 0x4000000;\n      if (i === this.length - 1) {\n        this.words[i + 1] = 1;\n      } else {\n        this.words[i + 1]++;\n      }\n    }\n    this.length = Math.max(this.length, i + 1);\n\n    return this;\n  };\n\n  // Subtract plain number `num` from `this`\n  BN.prototype.isubn = function isubn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.iaddn(-num);\n\n    if (this.negative !== 0) {\n      this.negative = 0;\n      this.iaddn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    this.words[0] -= num;\n\n    if (this.length === 1 && this.words[0] < 0) {\n      this.words[0] = -this.words[0];\n      this.negative = 1;\n    } else {\n      // Carry\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\n        this.words[i] += 0x4000000;\n        this.words[i + 1] -= 1;\n      }\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.addn = function addn (num) {\n    return this.clone().iaddn(num);\n  };\n\n  BN.prototype.subn = function subn (num) {\n    return this.clone().isubn(num);\n  };\n\n  BN.prototype.iabs = function iabs () {\n    this.negative = 0;\n\n    return this;\n  };\n\n  BN.prototype.abs = function abs () {\n    return this.clone().iabs();\n  };\n\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\n    var len = num.length + shift;\n    var i;\n\n    this._expand(len);\n\n    var w;\n    var carry = 0;\n    for (i = 0; i < num.length; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      var right = (num.words[i] | 0) * mul;\n      w -= right & 0x3ffffff;\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n    for (; i < this.length - shift; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      carry = w >> 26;\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n\n    if (carry === 0) return this.strip();\n\n    // Subtraction overflow\n    assert(carry === -1);\n    carry = 0;\n    for (i = 0; i < this.length; i++) {\n      w = -(this.words[i] | 0) + carry;\n      carry = w >> 26;\n      this.words[i] = w & 0x3ffffff;\n    }\n    this.negative = 1;\n\n    return this.strip();\n  };\n\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\n    var shift = this.length - num.length;\n\n    var a = this.clone();\n    var b = num;\n\n    // Normalize\n    var bhi = b.words[b.length - 1] | 0;\n    var bhiBits = this._countBits(bhi);\n    shift = 26 - bhiBits;\n    if (shift !== 0) {\n      b = b.ushln(shift);\n      a.iushln(shift);\n      bhi = b.words[b.length - 1] | 0;\n    }\n\n    // Initialize quotient\n    var m = a.length - b.length;\n    var q;\n\n    if (mode !== 'mod') {\n      q = new BN(null);\n      q.length = m + 1;\n      q.words = new Array(q.length);\n      for (var i = 0; i < q.length; i++) {\n        q.words[i] = 0;\n      }\n    }\n\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\n    if (diff.negative === 0) {\n      a = diff;\n      if (q) {\n        q.words[m] = 1;\n      }\n    }\n\n    for (var j = m - 1; j >= 0; j--) {\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\n        (a.words[b.length + j - 1] | 0);\n\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\n      // (0x7ffffff)\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\n\n      a._ishlnsubmul(b, qj, j);\n      while (a.negative !== 0) {\n        qj--;\n        a.negative = 0;\n        a._ishlnsubmul(b, 1, j);\n        if (!a.isZero()) {\n          a.negative ^= 1;\n        }\n      }\n      if (q) {\n        q.words[j] = qj;\n      }\n    }\n    if (q) {\n      q.strip();\n    }\n    a.strip();\n\n    // Denormalize\n    if (mode !== 'div' && shift !== 0) {\n      a.iushrn(shift);\n    }\n\n    return {\n      div: q || null,\n      mod: a\n    };\n  };\n\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\n  //       to `div` to request div only, or be absent to\n  //       request both div & mod\n  //       2) `positive` is true if unsigned mod is requested\n  BN.prototype.divmod = function divmod (num, mode, positive) {\n    assert(!num.isZero());\n\n    if (this.isZero()) {\n      return {\n        div: new BN(0),\n        mod: new BN(0)\n      };\n    }\n\n    var div, mod, res;\n    if (this.negative !== 0 && num.negative === 0) {\n      res = this.neg().divmod(num, mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.iadd(num);\n        }\n      }\n\n      return {\n        div: div,\n        mod: mod\n      };\n    }\n\n    if (this.negative === 0 && num.negative !== 0) {\n      res = this.divmod(num.neg(), mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      return {\n        div: div,\n        mod: res.mod\n      };\n    }\n\n    if ((this.negative & num.negative) !== 0) {\n      res = this.neg().divmod(num.neg(), mode);\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.isub(num);\n        }\n      }\n\n      return {\n        div: res.div,\n        mod: mod\n      };\n    }\n\n    // Both numbers are positive at this point\n\n    // Strip both numbers to approximate shift value\n    if (num.length > this.length || this.cmp(num) < 0) {\n      return {\n        div: new BN(0),\n        mod: this\n      };\n    }\n\n    // Very short reduction\n    if (num.length === 1) {\n      if (mode === 'div') {\n        return {\n          div: this.divn(num.words[0]),\n          mod: null\n        };\n      }\n\n      if (mode === 'mod') {\n        return {\n          div: null,\n          mod: new BN(this.modn(num.words[0]))\n        };\n      }\n\n      return {\n        div: this.divn(num.words[0]),\n        mod: new BN(this.modn(num.words[0]))\n      };\n    }\n\n    return this._wordDiv(num, mode);\n  };\n\n  // Find `this` / `num`\n  BN.prototype.div = function div (num) {\n    return this.divmod(num, 'div', false).div;\n  };\n\n  // Find `this` % `num`\n  BN.prototype.mod = function mod (num) {\n    return this.divmod(num, 'mod', false).mod;\n  };\n\n  BN.prototype.umod = function umod (num) {\n    return this.divmod(num, 'mod', true).mod;\n  };\n\n  // Find Round(`this` / `num`)\n  BN.prototype.divRound = function divRound (num) {\n    var dm = this.divmod(num);\n\n    // Fast case - exact division\n    if (dm.mod.isZero()) return dm.div;\n\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\n\n    var half = num.ushrn(1);\n    var r2 = num.andln(1);\n    var cmp = mod.cmp(half);\n\n    // Round down\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\n\n    // Round up\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\n  };\n\n  BN.prototype.modn = function modn (num) {\n    assert(num <= 0x3ffffff);\n    var p = (1 << 26) % num;\n\n    var acc = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      acc = (p * acc + (this.words[i] | 0)) % num;\n    }\n\n    return acc;\n  };\n\n  // In-place division by number\n  BN.prototype.idivn = function idivn (num) {\n    assert(num <= 0x3ffffff);\n\n    var carry = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var w = (this.words[i] | 0) + carry * 0x4000000;\n      this.words[i] = (w / num) | 0;\n      carry = w % num;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.divn = function divn (num) {\n    return this.clone().idivn(num);\n  };\n\n  BN.prototype.egcd = function egcd (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var x = this;\n    var y = p.clone();\n\n    if (x.negative !== 0) {\n      x = x.umod(p);\n    } else {\n      x = x.clone();\n    }\n\n    // A * x + B * y = x\n    var A = new BN(1);\n    var B = new BN(0);\n\n    // C * x + D * y = y\n    var C = new BN(0);\n    var D = new BN(1);\n\n    var g = 0;\n\n    while (x.isEven() && y.isEven()) {\n      x.iushrn(1);\n      y.iushrn(1);\n      ++g;\n    }\n\n    var yp = y.clone();\n    var xp = x.clone();\n\n    while (!x.isZero()) {\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        x.iushrn(i);\n        while (i-- > 0) {\n          if (A.isOdd() || B.isOdd()) {\n            A.iadd(yp);\n            B.isub(xp);\n          }\n\n          A.iushrn(1);\n          B.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        y.iushrn(j);\n        while (j-- > 0) {\n          if (C.isOdd() || D.isOdd()) {\n            C.iadd(yp);\n            D.isub(xp);\n          }\n\n          C.iushrn(1);\n          D.iushrn(1);\n        }\n      }\n\n      if (x.cmp(y) >= 0) {\n        x.isub(y);\n        A.isub(C);\n        B.isub(D);\n      } else {\n        y.isub(x);\n        C.isub(A);\n        D.isub(B);\n      }\n    }\n\n    return {\n      a: C,\n      b: D,\n      gcd: y.iushln(g)\n    };\n  };\n\n  // This is reduced incarnation of the binary EEA\n  // above, designated to invert members of the\n  // _prime_ fields F(p) at a maximal speed\n  BN.prototype._invmp = function _invmp (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var a = this;\n    var b = p.clone();\n\n    if (a.negative !== 0) {\n      a = a.umod(p);\n    } else {\n      a = a.clone();\n    }\n\n    var x1 = new BN(1);\n    var x2 = new BN(0);\n\n    var delta = b.clone();\n\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        a.iushrn(i);\n        while (i-- > 0) {\n          if (x1.isOdd()) {\n            x1.iadd(delta);\n          }\n\n          x1.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        b.iushrn(j);\n        while (j-- > 0) {\n          if (x2.isOdd()) {\n            x2.iadd(delta);\n          }\n\n          x2.iushrn(1);\n        }\n      }\n\n      if (a.cmp(b) >= 0) {\n        a.isub(b);\n        x1.isub(x2);\n      } else {\n        b.isub(a);\n        x2.isub(x1);\n      }\n    }\n\n    var res;\n    if (a.cmpn(1) === 0) {\n      res = x1;\n    } else {\n      res = x2;\n    }\n\n    if (res.cmpn(0) < 0) {\n      res.iadd(p);\n    }\n\n    return res;\n  };\n\n  BN.prototype.gcd = function gcd (num) {\n    if (this.isZero()) return num.abs();\n    if (num.isZero()) return this.abs();\n\n    var a = this.clone();\n    var b = num.clone();\n    a.negative = 0;\n    b.negative = 0;\n\n    // Remove common factor of two\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\n      a.iushrn(1);\n      b.iushrn(1);\n    }\n\n    do {\n      while (a.isEven()) {\n        a.iushrn(1);\n      }\n      while (b.isEven()) {\n        b.iushrn(1);\n      }\n\n      var r = a.cmp(b);\n      if (r < 0) {\n        // Swap `a` and `b` to make `a` always bigger than `b`\n        var t = a;\n        a = b;\n        b = t;\n      } else if (r === 0 || b.cmpn(1) === 0) {\n        break;\n      }\n\n      a.isub(b);\n    } while (true);\n\n    return b.iushln(shift);\n  };\n\n  // Invert number in the field F(num)\n  BN.prototype.invm = function invm (num) {\n    return this.egcd(num).a.umod(num);\n  };\n\n  BN.prototype.isEven = function isEven () {\n    return (this.words[0] & 1) === 0;\n  };\n\n  BN.prototype.isOdd = function isOdd () {\n    return (this.words[0] & 1) === 1;\n  };\n\n  // And first word and num\n  BN.prototype.andln = function andln (num) {\n    return this.words[0] & num;\n  };\n\n  // Increment at the bit position in-line\n  BN.prototype.bincn = function bincn (bit) {\n    assert(typeof bit === 'number');\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) {\n      this._expand(s + 1);\n      this.words[s] |= q;\n      return this;\n    }\n\n    // Add bit and propagate, if needed\n    var carry = q;\n    for (var i = s; carry !== 0 && i < this.length; i++) {\n      var w = this.words[i] | 0;\n      w += carry;\n      carry = w >>> 26;\n      w &= 0x3ffffff;\n      this.words[i] = w;\n    }\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n    return this;\n  };\n\n  BN.prototype.isZero = function isZero () {\n    return this.length === 1 && this.words[0] === 0;\n  };\n\n  BN.prototype.cmpn = function cmpn (num) {\n    var negative = num < 0;\n\n    if (this.negative !== 0 && !negative) return -1;\n    if (this.negative === 0 && negative) return 1;\n\n    this.strip();\n\n    var res;\n    if (this.length > 1) {\n      res = 1;\n    } else {\n      if (negative) {\n        num = -num;\n      }\n\n      assert(num <= 0x3ffffff, 'Number is too big');\n\n      var w = this.words[0] | 0;\n      res = w === num ? 0 : w < num ? -1 : 1;\n    }\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Compare two numbers and return:\n  // 1 - if `this` > `num`\n  // 0 - if `this` == `num`\n  // -1 - if `this` < `num`\n  BN.prototype.cmp = function cmp (num) {\n    if (this.negative !== 0 && num.negative === 0) return -1;\n    if (this.negative === 0 && num.negative !== 0) return 1;\n\n    var res = this.ucmp(num);\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Unsigned comparison\n  BN.prototype.ucmp = function ucmp (num) {\n    // At this point both numbers have the same sign\n    if (this.length > num.length) return 1;\n    if (this.length < num.length) return -1;\n\n    var res = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var a = this.words[i] | 0;\n      var b = num.words[i] | 0;\n\n      if (a === b) continue;\n      if (a < b) {\n        res = -1;\n      } else if (a > b) {\n        res = 1;\n      }\n      break;\n    }\n    return res;\n  };\n\n  BN.prototype.gtn = function gtn (num) {\n    return this.cmpn(num) === 1;\n  };\n\n  BN.prototype.gt = function gt (num) {\n    return this.cmp(num) === 1;\n  };\n\n  BN.prototype.gten = function gten (num) {\n    return this.cmpn(num) >= 0;\n  };\n\n  BN.prototype.gte = function gte (num) {\n    return this.cmp(num) >= 0;\n  };\n\n  BN.prototype.ltn = function ltn (num) {\n    return this.cmpn(num) === -1;\n  };\n\n  BN.prototype.lt = function lt (num) {\n    return this.cmp(num) === -1;\n  };\n\n  BN.prototype.lten = function lten (num) {\n    return this.cmpn(num) <= 0;\n  };\n\n  BN.prototype.lte = function lte (num) {\n    return this.cmp(num) <= 0;\n  };\n\n  BN.prototype.eqn = function eqn (num) {\n    return this.cmpn(num) === 0;\n  };\n\n  BN.prototype.eq = function eq (num) {\n    return this.cmp(num) === 0;\n  };\n\n  //\n  // A reduce context, could be using montgomery or something better, depending\n  // on the `m` itself.\n  //\n  BN.red = function red (num) {\n    return new Red(num);\n  };\n\n  BN.prototype.toRed = function toRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    assert(this.negative === 0, 'red works only with positives');\n    return ctx.convertTo(this)._forceRed(ctx);\n  };\n\n  BN.prototype.fromRed = function fromRed () {\n    assert(this.red, 'fromRed works only with numbers in reduction context');\n    return this.red.convertFrom(this);\n  };\n\n  BN.prototype._forceRed = function _forceRed (ctx) {\n    this.red = ctx;\n    return this;\n  };\n\n  BN.prototype.forceRed = function forceRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    return this._forceRed(ctx);\n  };\n\n  BN.prototype.redAdd = function redAdd (num) {\n    assert(this.red, 'redAdd works only with red numbers');\n    return this.red.add(this, num);\n  };\n\n  BN.prototype.redIAdd = function redIAdd (num) {\n    assert(this.red, 'redIAdd works only with red numbers');\n    return this.red.iadd(this, num);\n  };\n\n  BN.prototype.redSub = function redSub (num) {\n    assert(this.red, 'redSub works only with red numbers');\n    return this.red.sub(this, num);\n  };\n\n  BN.prototype.redISub = function redISub (num) {\n    assert(this.red, 'redISub works only with red numbers');\n    return this.red.isub(this, num);\n  };\n\n  BN.prototype.redShl = function redShl (num) {\n    assert(this.red, 'redShl works only with red numbers');\n    return this.red.shl(this, num);\n  };\n\n  BN.prototype.redMul = function redMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.mul(this, num);\n  };\n\n  BN.prototype.redIMul = function redIMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.imul(this, num);\n  };\n\n  BN.prototype.redSqr = function redSqr () {\n    assert(this.red, 'redSqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqr(this);\n  };\n\n  BN.prototype.redISqr = function redISqr () {\n    assert(this.red, 'redISqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.isqr(this);\n  };\n\n  // Square root over p\n  BN.prototype.redSqrt = function redSqrt () {\n    assert(this.red, 'redSqrt works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqrt(this);\n  };\n\n  BN.prototype.redInvm = function redInvm () {\n    assert(this.red, 'redInvm works only with red numbers');\n    this.red._verify1(this);\n    return this.red.invm(this);\n  };\n\n  // Return negative clone of `this` % `red modulo`\n  BN.prototype.redNeg = function redNeg () {\n    assert(this.red, 'redNeg works only with red numbers');\n    this.red._verify1(this);\n    return this.red.neg(this);\n  };\n\n  BN.prototype.redPow = function redPow (num) {\n    assert(this.red && !num.red, 'redPow(normalNum)');\n    this.red._verify1(this);\n    return this.red.pow(this, num);\n  };\n\n  // Prime numbers with efficient reduction\n  var primes = {\n    k256: null,\n    p224: null,\n    p192: null,\n    p25519: null\n  };\n\n  // Pseudo-Mersenne prime\n  function MPrime (name, p) {\n    // P = 2 ^ N - K\n    this.name = name;\n    this.p = new BN(p, 16);\n    this.n = this.p.bitLength();\n    this.k = new BN(1).iushln(this.n).isub(this.p);\n\n    this.tmp = this._tmp();\n  }\n\n  MPrime.prototype._tmp = function _tmp () {\n    var tmp = new BN(null);\n    tmp.words = new Array(Math.ceil(this.n / 13));\n    return tmp;\n  };\n\n  MPrime.prototype.ireduce = function ireduce (num) {\n    // Assumes that `num` is less than `P^2`\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\n    var r = num;\n    var rlen;\n\n    do {\n      this.split(r, this.tmp);\n      r = this.imulK(r);\n      r = r.iadd(this.tmp);\n      rlen = r.bitLength();\n    } while (rlen > this.n);\n\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\n    if (cmp === 0) {\n      r.words[0] = 0;\n      r.length = 1;\n    } else if (cmp > 0) {\n      r.isub(this.p);\n    } else {\n      if (r.strip !== undefined) {\n        // r is BN v4 instance\n        r.strip();\n      } else {\n        // r is BN v5 instance\n        r._strip();\n      }\n    }\n\n    return r;\n  };\n\n  MPrime.prototype.split = function split (input, out) {\n    input.iushrn(this.n, 0, out);\n  };\n\n  MPrime.prototype.imulK = function imulK (num) {\n    return num.imul(this.k);\n  };\n\n  function K256 () {\n    MPrime.call(\n      this,\n      'k256',\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\n  }\n  inherits(K256, MPrime);\n\n  K256.prototype.split = function split (input, output) {\n    // 256 = 9 * 26 + 22\n    var mask = 0x3fffff;\n\n    var outLen = Math.min(input.length, 9);\n    for (var i = 0; i < outLen; i++) {\n      output.words[i] = input.words[i];\n    }\n    output.length = outLen;\n\n    if (input.length <= 9) {\n      input.words[0] = 0;\n      input.length = 1;\n      return;\n    }\n\n    // Shift by 9 limbs\n    var prev = input.words[9];\n    output.words[output.length++] = prev & mask;\n\n    for (i = 10; i < input.length; i++) {\n      var next = input.words[i] | 0;\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\n      prev = next;\n    }\n    prev >>>= 22;\n    input.words[i - 10] = prev;\n    if (prev === 0 && input.length > 10) {\n      input.length -= 10;\n    } else {\n      input.length -= 9;\n    }\n  };\n\n  K256.prototype.imulK = function imulK (num) {\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\n    num.words[num.length] = 0;\n    num.words[num.length + 1] = 0;\n    num.length += 2;\n\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\n    var lo = 0;\n    for (var i = 0; i < num.length; i++) {\n      var w = num.words[i] | 0;\n      lo += w * 0x3d1;\n      num.words[i] = lo & 0x3ffffff;\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\n    }\n\n    // Fast length reduction\n    if (num.words[num.length - 1] === 0) {\n      num.length--;\n      if (num.words[num.length - 1] === 0) {\n        num.length--;\n      }\n    }\n    return num;\n  };\n\n  function P224 () {\n    MPrime.call(\n      this,\n      'p224',\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\n  }\n  inherits(P224, MPrime);\n\n  function P192 () {\n    MPrime.call(\n      this,\n      'p192',\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\n  }\n  inherits(P192, MPrime);\n\n  function P25519 () {\n    // 2 ^ 255 - 19\n    MPrime.call(\n      this,\n      '25519',\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\n  }\n  inherits(P25519, MPrime);\n\n  P25519.prototype.imulK = function imulK (num) {\n    // K = 0x13\n    var carry = 0;\n    for (var i = 0; i < num.length; i++) {\n      var hi = (num.words[i] | 0) * 0x13 + carry;\n      var lo = hi & 0x3ffffff;\n      hi >>>= 26;\n\n      num.words[i] = lo;\n      carry = hi;\n    }\n    if (carry !== 0) {\n      num.words[num.length++] = carry;\n    }\n    return num;\n  };\n\n  // Exported mostly for testing purposes, use plain name instead\n  BN._prime = function prime (name) {\n    // Cached version of prime\n    if (primes[name]) return primes[name];\n\n    var prime;\n    if (name === 'k256') {\n      prime = new K256();\n    } else if (name === 'p224') {\n      prime = new P224();\n    } else if (name === 'p192') {\n      prime = new P192();\n    } else if (name === 'p25519') {\n      prime = new P25519();\n    } else {\n      throw new Error('Unknown prime ' + name);\n    }\n    primes[name] = prime;\n\n    return prime;\n  };\n\n  //\n  // Base reduction engine\n  //\n  function Red (m) {\n    if (typeof m === 'string') {\n      var prime = BN._prime(m);\n      this.m = prime.p;\n      this.prime = prime;\n    } else {\n      assert(m.gtn(1), 'modulus must be greater than 1');\n      this.m = m;\n      this.prime = null;\n    }\n  }\n\n  Red.prototype._verify1 = function _verify1 (a) {\n    assert(a.negative === 0, 'red works only with positives');\n    assert(a.red, 'red works only with red numbers');\n  };\n\n  Red.prototype._verify2 = function _verify2 (a, b) {\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\n    assert(a.red && a.red === b.red,\n      'red works only with red numbers');\n  };\n\n  Red.prototype.imod = function imod (a) {\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\n    return a.umod(this.m)._forceRed(this);\n  };\n\n  Red.prototype.neg = function neg (a) {\n    if (a.isZero()) {\n      return a.clone();\n    }\n\n    return this.m.sub(a)._forceRed(this);\n  };\n\n  Red.prototype.add = function add (a, b) {\n    this._verify2(a, b);\n\n    var res = a.add(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.iadd = function iadd (a, b) {\n    this._verify2(a, b);\n\n    var res = a.iadd(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.sub = function sub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.sub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.isub = function isub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.isub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.shl = function shl (a, num) {\n    this._verify1(a);\n    return this.imod(a.ushln(num));\n  };\n\n  Red.prototype.imul = function imul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.imul(b));\n  };\n\n  Red.prototype.mul = function mul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.mul(b));\n  };\n\n  Red.prototype.isqr = function isqr (a) {\n    return this.imul(a, a.clone());\n  };\n\n  Red.prototype.sqr = function sqr (a) {\n    return this.mul(a, a);\n  };\n\n  Red.prototype.sqrt = function sqrt (a) {\n    if (a.isZero()) return a.clone();\n\n    var mod3 = this.m.andln(3);\n    assert(mod3 % 2 === 1);\n\n    // Fast case\n    if (mod3 === 3) {\n      var pow = this.m.add(new BN(1)).iushrn(2);\n      return this.pow(a, pow);\n    }\n\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\n    //\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\n    var q = this.m.subn(1);\n    var s = 0;\n    while (!q.isZero() && q.andln(1) === 0) {\n      s++;\n      q.iushrn(1);\n    }\n    assert(!q.isZero());\n\n    var one = new BN(1).toRed(this);\n    var nOne = one.redNeg();\n\n    // Find quadratic non-residue\n    // NOTE: Max is such because of generalized Riemann hypothesis.\n    var lpow = this.m.subn(1).iushrn(1);\n    var z = this.m.bitLength();\n    z = new BN(2 * z * z).toRed(this);\n\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\n      z.redIAdd(nOne);\n    }\n\n    var c = this.pow(z, q);\n    var r = this.pow(a, q.addn(1).iushrn(1));\n    var t = this.pow(a, q);\n    var m = s;\n    while (t.cmp(one) !== 0) {\n      var tmp = t;\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\n        tmp = tmp.redSqr();\n      }\n      assert(i < m);\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\n\n      r = r.redMul(b);\n      c = b.redSqr();\n      t = t.redMul(c);\n      m = i;\n    }\n\n    return r;\n  };\n\n  Red.prototype.invm = function invm (a) {\n    var inv = a._invmp(this.m);\n    if (inv.negative !== 0) {\n      inv.negative = 0;\n      return this.imod(inv).redNeg();\n    } else {\n      return this.imod(inv);\n    }\n  };\n\n  Red.prototype.pow = function pow (a, num) {\n    if (num.isZero()) return new BN(1).toRed(this);\n    if (num.cmpn(1) === 0) return a.clone();\n\n    var windowSize = 4;\n    var wnd = new Array(1 << windowSize);\n    wnd[0] = new BN(1).toRed(this);\n    wnd[1] = a;\n    for (var i = 2; i < wnd.length; i++) {\n      wnd[i] = this.mul(wnd[i - 1], a);\n    }\n\n    var res = wnd[0];\n    var current = 0;\n    var currentLen = 0;\n    var start = num.bitLength() % 26;\n    if (start === 0) {\n      start = 26;\n    }\n\n    for (i = num.length - 1; i >= 0; i--) {\n      var word = num.words[i];\n      for (var j = start - 1; j >= 0; j--) {\n        var bit = (word >> j) & 1;\n        if (res !== wnd[0]) {\n          res = this.sqr(res);\n        }\n\n        if (bit === 0 && current === 0) {\n          currentLen = 0;\n          continue;\n        }\n\n        current <<= 1;\n        current |= bit;\n        currentLen++;\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\n\n        res = this.mul(res, wnd[current]);\n        currentLen = 0;\n        current = 0;\n      }\n      start = 26;\n    }\n\n    return res;\n  };\n\n  Red.prototype.convertTo = function convertTo (num) {\n    var r = num.umod(this.m);\n\n    return r === num ? r.clone() : r;\n  };\n\n  Red.prototype.convertFrom = function convertFrom (num) {\n    var res = num.clone();\n    res.red = null;\n    return res;\n  };\n\n  //\n  // Montgomery method engine\n  //\n\n  BN.mont = function mont (num) {\n    return new Mont(num);\n  };\n\n  function Mont (m) {\n    Red.call(this, m);\n\n    this.shift = this.m.bitLength();\n    if (this.shift % 26 !== 0) {\n      this.shift += 26 - (this.shift % 26);\n    }\n\n    this.r = new BN(1).iushln(this.shift);\n    this.r2 = this.imod(this.r.sqr());\n    this.rinv = this.r._invmp(this.m);\n\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\n    this.minv = this.minv.umod(this.r);\n    this.minv = this.r.sub(this.minv);\n  }\n  inherits(Mont, Red);\n\n  Mont.prototype.convertTo = function convertTo (num) {\n    return this.imod(num.ushln(this.shift));\n  };\n\n  Mont.prototype.convertFrom = function convertFrom (num) {\n    var r = this.imod(num.mul(this.rinv));\n    r.red = null;\n    return r;\n  };\n\n  Mont.prototype.imul = function imul (a, b) {\n    if (a.isZero() || b.isZero()) {\n      a.words[0] = 0;\n      a.length = 1;\n      return a;\n    }\n\n    var t = a.imul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.mul = function mul (a, b) {\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\n\n    var t = a.mul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.invm = function invm (a) {\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\n    return res._forceRed(this);\n  };\n})(typeof module === 'undefined' || module, this);\n","var randomBytes = require('randombytes');\nmodule.exports = findPrime;\nfindPrime.simpleSieve = simpleSieve;\nfindPrime.fermatTest = fermatTest;\nvar BN = require('bn.js');\nvar TWENTYFOUR = new BN(24);\nvar MillerRabin = require('miller-rabin');\nvar millerRabin = new MillerRabin();\nvar ONE = new BN(1);\nvar TWO = new BN(2);\nvar FIVE = new BN(5);\nvar SIXTEEN = new BN(16);\nvar EIGHT = new BN(8);\nvar TEN = new BN(10);\nvar THREE = new BN(3);\nvar SEVEN = new BN(7);\nvar ELEVEN = new BN(11);\nvar FOUR = new BN(4);\nvar TWELVE = new BN(12);\nvar primes = null;\n\nfunction _getPrimes() {\n  if (primes !== null)\n    return primes;\n\n  var limit = 0x100000;\n  var res = [];\n  res[0] = 2;\n  for (var i = 1, k = 3; k < limit; k += 2) {\n    var sqrt = Math.ceil(Math.sqrt(k));\n    for (var j = 0; j < i && res[j] <= sqrt; j++)\n      if (k % res[j] === 0)\n        break;\n\n    if (i !== j && res[j] <= sqrt)\n      continue;\n\n    res[i++] = k;\n  }\n  primes = res;\n  return res;\n}\n\nfunction simpleSieve(p) {\n  var primes = _getPrimes();\n\n  for (var i = 0; i < primes.length; i++)\n    if (p.modn(primes[i]) === 0) {\n      if (p.cmpn(primes[i]) === 0) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n  return true;\n}\n\nfunction fermatTest(p) {\n  var red = BN.mont(p);\n  return TWO.toRed(red).redPow(p.subn(1)).fromRed().cmpn(1) === 0;\n}\n\nfunction findPrime(bits, gen) {\n  if (bits < 16) {\n    // this is what openssl does\n    if (gen === 2 || gen === 5) {\n      return new BN([0x8c, 0x7b]);\n    } else {\n      return new BN([0x8c, 0x27]);\n    }\n  }\n  gen = new BN(gen);\n\n  var num, n2;\n\n  while (true) {\n    num = new BN(randomBytes(Math.ceil(bits / 8)));\n    while (num.bitLength() > bits) {\n      num.ishrn(1);\n    }\n    if (num.isEven()) {\n      num.iadd(ONE);\n    }\n    if (!num.testn(1)) {\n      num.iadd(TWO);\n    }\n    if (!gen.cmp(TWO)) {\n      while (num.mod(TWENTYFOUR).cmp(ELEVEN)) {\n        num.iadd(FOUR);\n      }\n    } else if (!gen.cmp(FIVE)) {\n      while (num.mod(TEN).cmp(THREE)) {\n        num.iadd(FOUR);\n      }\n    }\n    n2 = num.shrn(1);\n    if (simpleSieve(n2) && simpleSieve(num) &&\n      fermatTest(n2) && fermatTest(num) &&\n      millerRabin.test(n2) && millerRabin.test(num)) {\n      return num;\n    }\n  }\n\n}\n","'use strict'\n\n// limit of Crypto.getRandomValues()\n// https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues\nvar MAX_BYTES = 65536\n\n// Node supports requesting up to this number of bytes\n// https://github.com/nodejs/node/blob/master/lib/internal/crypto/random.js#L48\nvar MAX_UINT32 = 4294967295\n\nfunction oldBrowser () {\n  throw new Error('Secure random number generation is not supported by this browser.\\nUse Chrome, Firefox or Internet Explorer 11')\n}\n\nvar Buffer = require('safe-buffer').Buffer\nvar crypto = global.crypto || global.msCrypto\n\nif (crypto && crypto.getRandomValues) {\n  module.exports = randomBytes\n} else {\n  module.exports = oldBrowser\n}\n\nfunction randomBytes (size, cb) {\n  // phantomjs needs to throw\n  if (size > MAX_UINT32) throw new RangeError('requested too many random bytes')\n\n  var bytes = Buffer.allocUnsafe(size)\n\n  if (size > 0) {  // getRandomValues fails on IE if size == 0\n    if (size > MAX_BYTES) { // this is the max bytes crypto.getRandomValues\n      // can do at once see https://developer.mozilla.org/en-US/docs/Web/API/window.crypto.getRandomValues\n      for (var generated = 0; generated < size; generated += MAX_BYTES) {\n        // buffer.slice automatically checks if the end is past the end of\n        // the buffer so we don't have to here\n        crypto.getRandomValues(bytes.slice(generated, generated + MAX_BYTES))\n      }\n    } else {\n      crypto.getRandomValues(bytes)\n    }\n  }\n\n  if (typeof cb === 'function') {\n    return process.nextTick(function () {\n      cb(null, bytes)\n    })\n  }\n\n  return bytes\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var bn = require('bn.js');\nvar brorand = require('brorand');\n\nfunction MillerRabin(rand) {\n  this.rand = rand || new brorand.Rand();\n}\nmodule.exports = MillerRabin;\n\nMillerRabin.create = function create(rand) {\n  return new MillerRabin(rand);\n};\n\nMillerRabin.prototype._randbelow = function _randbelow(n) {\n  var len = n.bitLength();\n  var min_bytes = Math.ceil(len / 8);\n\n  // Generage random bytes until a number less than n is found.\n  // This ensures that 0..n-1 have an equal probability of being selected.\n  do\n    var a = new bn(this.rand.generate(min_bytes));\n  while (a.cmp(n) >= 0);\n\n  return a;\n};\n\nMillerRabin.prototype._randrange = function _randrange(start, stop) {\n  // Generate a random number greater than or equal to start and less than stop.\n  var size = stop.sub(start);\n  return start.add(this._randbelow(size));\n};\n\nMillerRabin.prototype.test = function test(n, k, cb) {\n  var len = n.bitLength();\n  var red = bn.mont(n);\n  var rone = new bn(1).toRed(red);\n\n  if (!k)\n    k = Math.max(1, (len / 48) | 0);\n\n  // Find d and s, (n - 1) = (2 ^ s) * d;\n  var n1 = n.subn(1);\n  for (var s = 0; !n1.testn(s); s++) {}\n  var d = n.shrn(s);\n\n  var rn1 = n1.toRed(red);\n\n  var prime = true;\n  for (; k > 0; k--) {\n    var a = this._randrange(new bn(2), n1);\n    if (cb)\n      cb(a);\n\n    var x = a.toRed(red).redPow(d);\n    if (x.cmp(rone) === 0 || x.cmp(rn1) === 0)\n      continue;\n\n    for (var i = 1; i < s; i++) {\n      x = x.redSqr();\n\n      if (x.cmp(rone) === 0)\n        return false;\n      if (x.cmp(rn1) === 0)\n        break;\n    }\n\n    if (i === s)\n      return false;\n  }\n\n  return prime;\n};\n\nMillerRabin.prototype.getDivisor = function getDivisor(n, k) {\n  var len = n.bitLength();\n  var red = bn.mont(n);\n  var rone = new bn(1).toRed(red);\n\n  if (!k)\n    k = Math.max(1, (len / 48) | 0);\n\n  // Find d and s, (n - 1) = (2 ^ s) * d;\n  var n1 = n.subn(1);\n  for (var s = 0; !n1.testn(s); s++) {}\n  var d = n.shrn(s);\n\n  var rn1 = n1.toRed(red);\n\n  for (; k > 0; k--) {\n    var a = this._randrange(new bn(2), n1);\n\n    var g = n.gcd(a);\n    if (g.cmpn(1) !== 0)\n      return g;\n\n    var x = a.toRed(red).redPow(d);\n    if (x.cmp(rone) === 0 || x.cmp(rn1) === 0)\n      continue;\n\n    for (var i = 1; i < s; i++) {\n      x = x.redSqr();\n\n      if (x.cmp(rone) === 0)\n        return x.fromRed().subn(1).gcd(n);\n      if (x.cmp(rn1) === 0)\n        break;\n    }\n\n    if (i === s) {\n      x = x.redSqr();\n      return x.fromRed().subn(1).gcd(n);\n    }\n  }\n\n  return false;\n};\n","var generatePrime = require('./lib/generatePrime')\nvar primes = require('./lib/primes.json')\n\nvar DH = require('./lib/dh')\n\nfunction getDiffieHellman (mod) {\n  var prime = new Buffer(primes[mod].prime, 'hex')\n  var gen = new Buffer(primes[mod].gen, 'hex')\n\n  return new DH(prime, gen)\n}\n\nvar ENCODINGS = {\n  'binary': true, 'hex': true, 'base64': true\n}\n\nfunction createDiffieHellman (prime, enc, generator, genc) {\n  if (Buffer.isBuffer(enc) || ENCODINGS[enc] === undefined) {\n    return createDiffieHellman(prime, 'binary', enc, generator)\n  }\n\n  enc = enc || 'binary'\n  genc = genc || 'binary'\n  generator = generator || new Buffer([2])\n\n  if (!Buffer.isBuffer(generator)) {\n    generator = new Buffer(generator, genc)\n  }\n\n  if (typeof prime === 'number') {\n    return new DH(generatePrime(prime, generator), generator, true)\n  }\n\n  if (!Buffer.isBuffer(prime)) {\n    prime = new Buffer(prime, enc)\n  }\n\n  return new DH(prime, generator, true)\n}\n\nexports.DiffieHellmanGroup = exports.createDiffieHellmanGroup = exports.getDiffieHellman = getDiffieHellman\nexports.createDiffieHellman = exports.DiffieHellman = createDiffieHellman\n","\"use strict\";\n\n(function(root) {\n    const MAX_VALUE = 0x7fffffff;\n\n    // The SHA256 and PBKDF2 implementation are from scrypt-async-js:\n    // See: https://github.com/dchest/scrypt-async-js\n    function SHA256(m) {\n        const K = new Uint32Array([\n           0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b,\n           0x59f111f1, 0x923f82a4, 0xab1c5ed5, 0xd807aa98, 0x12835b01,\n           0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7,\n           0xc19bf174, 0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,\n           0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da, 0x983e5152,\n           0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147,\n           0x06ca6351, 0x14292967, 0x27b70a85, 0x2e1b2138, 0x4d2c6dfc,\n           0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n           0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819,\n           0xd6990624, 0xf40e3585, 0x106aa070, 0x19a4c116, 0x1e376c08,\n           0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f,\n           0x682e6ff3, 0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,\n           0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n       ]);\n\n        let h0 = 0x6a09e667, h1 = 0xbb67ae85, h2 = 0x3c6ef372, h3 = 0xa54ff53a;\n        let h4 = 0x510e527f, h5 = 0x9b05688c, h6 = 0x1f83d9ab, h7 = 0x5be0cd19;\n        const w = new Uint32Array(64);\n\n        function blocks(p) {\n            let off = 0, len = p.length;\n            while (len >= 64) {\n                let a = h0, b = h1, c = h2, d = h3, e = h4, f = h5, g = h6, h = h7, u, i, j, t1, t2;\n\n                for (i = 0; i < 16; i++) {\n                    j = off + i*4;\n                    w[i] = ((p[j] & 0xff)<<24) | ((p[j+1] & 0xff)<<16) |\n                    ((p[j+2] & 0xff)<<8) | (p[j+3] & 0xff);\n                }\n\n                for (i = 16; i < 64; i++) {\n                    u = w[i-2];\n                    t1 = ((u>>>17) | (u<<(32-17))) ^ ((u>>>19) | (u<<(32-19))) ^ (u>>>10);\n\n                    u = w[i-15];\n                    t2 = ((u>>>7) | (u<<(32-7))) ^ ((u>>>18) | (u<<(32-18))) ^ (u>>>3);\n\n                    w[i] = (((t1 + w[i-7]) | 0) + ((t2 + w[i-16]) | 0)) | 0;\n                }\n\n                for (i = 0; i < 64; i++) {\n                    t1 = ((((((e>>>6) | (e<<(32-6))) ^ ((e>>>11) | (e<<(32-11))) ^\n                             ((e>>>25) | (e<<(32-25)))) + ((e & f) ^ (~e & g))) | 0) +\n                          ((h + ((K[i] + w[i]) | 0)) | 0)) | 0;\n\n                    t2 = ((((a>>>2) | (a<<(32-2))) ^ ((a>>>13) | (a<<(32-13))) ^\n                           ((a>>>22) | (a<<(32-22)))) + ((a & b) ^ (a & c) ^ (b & c))) | 0;\n\n                    h = g;\n                    g = f;\n                    f = e;\n                    e = (d + t1) | 0;\n                    d = c;\n                    c = b;\n                    b = a;\n                    a = (t1 + t2) | 0;\n                }\n\n                h0 = (h0 + a) | 0;\n                h1 = (h1 + b) | 0;\n                h2 = (h2 + c) | 0;\n                h3 = (h3 + d) | 0;\n                h4 = (h4 + e) | 0;\n                h5 = (h5 + f) | 0;\n                h6 = (h6 + g) | 0;\n                h7 = (h7 + h) | 0;\n\n                off += 64;\n                len -= 64;\n            }\n        }\n\n        blocks(m);\n\n        let i, bytesLeft = m.length % 64,\n        bitLenHi = (m.length / 0x20000000) | 0,\n        bitLenLo = m.length << 3,\n        numZeros = (bytesLeft < 56) ? 56 : 120,\n        p = m.slice(m.length - bytesLeft, m.length);\n\n        p.push(0x80);\n        for (i = bytesLeft + 1; i < numZeros; i++) { p.push(0); }\n        p.push((bitLenHi >>> 24) & 0xff);\n        p.push((bitLenHi >>> 16) & 0xff);\n        p.push((bitLenHi >>> 8)  & 0xff);\n        p.push((bitLenHi >>> 0)  & 0xff);\n        p.push((bitLenLo >>> 24) & 0xff);\n        p.push((bitLenLo >>> 16) & 0xff);\n        p.push((bitLenLo >>> 8)  & 0xff);\n        p.push((bitLenLo >>> 0)  & 0xff);\n\n        blocks(p);\n\n        return [\n            (h0 >>> 24) & 0xff, (h0 >>> 16) & 0xff, (h0 >>> 8) & 0xff, (h0 >>> 0) & 0xff,\n            (h1 >>> 24) & 0xff, (h1 >>> 16) & 0xff, (h1 >>> 8) & 0xff, (h1 >>> 0) & 0xff,\n            (h2 >>> 24) & 0xff, (h2 >>> 16) & 0xff, (h2 >>> 8) & 0xff, (h2 >>> 0) & 0xff,\n            (h3 >>> 24) & 0xff, (h3 >>> 16) & 0xff, (h3 >>> 8) & 0xff, (h3 >>> 0) & 0xff,\n            (h4 >>> 24) & 0xff, (h4 >>> 16) & 0xff, (h4 >>> 8) & 0xff, (h4 >>> 0) & 0xff,\n            (h5 >>> 24) & 0xff, (h5 >>> 16) & 0xff, (h5 >>> 8) & 0xff, (h5 >>> 0) & 0xff,\n            (h6 >>> 24) & 0xff, (h6 >>> 16) & 0xff, (h6 >>> 8) & 0xff, (h6 >>> 0) & 0xff,\n            (h7 >>> 24) & 0xff, (h7 >>> 16) & 0xff, (h7 >>> 8) & 0xff, (h7 >>> 0) & 0xff\n        ];\n    }\n\n    function PBKDF2_HMAC_SHA256_OneIter(password, salt, dkLen) {\n        // compress password if it's longer than hash block length\n        password = (password.length <= 64) ? password : SHA256(password);\n\n        const innerLen = 64 + salt.length + 4;\n        const inner = new Array(innerLen);\n        const outerKey = new Array(64);\n\n        let i;\n        let dk = [];\n\n        // inner = (password ^ ipad) || salt || counter\n        for (i = 0; i < 64; i++) { inner[i] = 0x36; }\n        for (i = 0; i < password.length; i++) { inner[i] ^= password[i]; }\n        for (i = 0; i < salt.length; i++) { inner[64 + i] = salt[i]; }\n        for (i = innerLen - 4; i < innerLen; i++) { inner[i] = 0; }\n\n        // outerKey = password ^ opad\n        for (i = 0; i < 64; i++) outerKey[i] = 0x5c;\n        for (i = 0; i < password.length; i++) outerKey[i] ^= password[i];\n\n        // increments counter inside inner\n        function incrementCounter() {\n            for (let i = innerLen - 1; i >= innerLen - 4; i--) {\n                inner[i]++;\n                if (inner[i] <= 0xff) return;\n                inner[i] = 0;\n            }\n        }\n\n        // output blocks = SHA256(outerKey || SHA256(inner)) ...\n        while (dkLen >= 32) {\n            incrementCounter();\n            dk = dk.concat(SHA256(outerKey.concat(SHA256(inner))));\n            dkLen -= 32;\n        }\n        if (dkLen > 0) {\n            incrementCounter();\n            dk = dk.concat(SHA256(outerKey.concat(SHA256(inner))).slice(0, dkLen));\n        }\n\n        return dk;\n    }\n\n    // The following is an adaptation of scryptsy\n    // See: https://www.npmjs.com/package/scryptsy\n    function blockmix_salsa8(BY, Yi, r, x, _X) {\n        let i;\n\n        arraycopy(BY, (2 * r - 1) * 16, _X, 0, 16);\n        for (i = 0; i < 2 * r; i++) {\n            blockxor(BY, i * 16, _X, 16);\n            salsa20_8(_X, x);\n            arraycopy(_X, 0, BY, Yi + (i * 16), 16);\n        }\n\n        for (i = 0; i < r; i++) {\n            arraycopy(BY, Yi + (i * 2) * 16, BY, (i * 16), 16);\n        }\n\n        for (i = 0; i < r; i++) {\n            arraycopy(BY, Yi + (i * 2 + 1) * 16, BY, (i + r) * 16, 16);\n        }\n    }\n\n    function R(a, b) {\n        return (a << b) | (a >>> (32 - b));\n    }\n\n    function salsa20_8(B, x) {\n        arraycopy(B, 0, x, 0, 16);\n\n        for (let i = 8; i > 0; i -= 2) {\n            x[ 4] ^= R(x[ 0] + x[12], 7);\n            x[ 8] ^= R(x[ 4] + x[ 0], 9);\n            x[12] ^= R(x[ 8] + x[ 4], 13);\n            x[ 0] ^= R(x[12] + x[ 8], 18);\n            x[ 9] ^= R(x[ 5] + x[ 1], 7);\n            x[13] ^= R(x[ 9] + x[ 5], 9);\n            x[ 1] ^= R(x[13] + x[ 9], 13);\n            x[ 5] ^= R(x[ 1] + x[13], 18);\n            x[14] ^= R(x[10] + x[ 6], 7);\n            x[ 2] ^= R(x[14] + x[10], 9);\n            x[ 6] ^= R(x[ 2] + x[14], 13);\n            x[10] ^= R(x[ 6] + x[ 2], 18);\n            x[ 3] ^= R(x[15] + x[11], 7);\n            x[ 7] ^= R(x[ 3] + x[15], 9);\n            x[11] ^= R(x[ 7] + x[ 3], 13);\n            x[15] ^= R(x[11] + x[ 7], 18);\n            x[ 1] ^= R(x[ 0] + x[ 3], 7);\n            x[ 2] ^= R(x[ 1] + x[ 0], 9);\n            x[ 3] ^= R(x[ 2] + x[ 1], 13);\n            x[ 0] ^= R(x[ 3] + x[ 2], 18);\n            x[ 6] ^= R(x[ 5] + x[ 4], 7);\n            x[ 7] ^= R(x[ 6] + x[ 5], 9);\n            x[ 4] ^= R(x[ 7] + x[ 6], 13);\n            x[ 5] ^= R(x[ 4] + x[ 7], 18);\n            x[11] ^= R(x[10] + x[ 9], 7);\n            x[ 8] ^= R(x[11] + x[10], 9);\n            x[ 9] ^= R(x[ 8] + x[11], 13);\n            x[10] ^= R(x[ 9] + x[ 8], 18);\n            x[12] ^= R(x[15] + x[14], 7);\n            x[13] ^= R(x[12] + x[15], 9);\n            x[14] ^= R(x[13] + x[12], 13);\n            x[15] ^= R(x[14] + x[13], 18);\n        }\n\n        for (let i = 0; i < 16; ++i) {\n            B[i] += x[i];\n        }\n    }\n\n    // naive approach... going back to loop unrolling may yield additional performance\n    function blockxor(S, Si, D, len) {\n        for (let i = 0; i < len; i++) {\n            D[i] ^= S[Si + i]\n        }\n    }\n\n    function arraycopy(src, srcPos, dest, destPos, length) {\n        while (length--) {\n            dest[destPos++] = src[srcPos++];\n        }\n    }\n\n    function checkBufferish(o) {\n        if (!o || typeof(o.length) !== 'number') { return false; }\n\n        for (let i = 0; i < o.length; i++) {\n            const v = o[i];\n            if (typeof(v) !== 'number' || v % 1 || v < 0 || v >= 256) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    function ensureInteger(value, name) {\n        if (typeof(value) !== \"number\" || (value % 1)) { throw new Error('invalid ' + name); }\n        return value;\n    }\n\n    // N = Cpu cost, r = Memory cost, p = parallelization cost\n    // callback(error, progress, key)\n    function _scrypt(password, salt, N, r, p, dkLen, callback) {\n\n        N = ensureInteger(N, 'N');\n        r = ensureInteger(r, 'r');\n        p = ensureInteger(p, 'p');\n\n        dkLen = ensureInteger(dkLen, 'dkLen');\n\n        if (N === 0 || (N & (N - 1)) !== 0) { throw new Error('N must be power of 2'); }\n\n        if (N > MAX_VALUE / 128 / r) { throw new Error('N too large'); }\n        if (r > MAX_VALUE / 128 / p) { throw new Error('r too large'); }\n\n        if (!checkBufferish(password)) {\n            throw new Error('password must be an array or buffer');\n        }\n        password = Array.prototype.slice.call(password);\n\n        if (!checkBufferish(salt)) {\n            throw new Error('salt must be an array or buffer');\n        }\n        salt = Array.prototype.slice.call(salt);\n\n        let b = PBKDF2_HMAC_SHA256_OneIter(password, salt, p * 128 * r);\n        const B = new Uint32Array(p * 32 * r)\n        for (let i = 0; i < B.length; i++) {\n            const j = i * 4;\n            B[i] = ((b[j + 3] & 0xff) << 24) |\n                   ((b[j + 2] & 0xff) << 16) |\n                   ((b[j + 1] & 0xff) << 8) |\n                   ((b[j + 0] & 0xff) << 0);\n        }\n\n        const XY = new Uint32Array(64 * r);\n        const V = new Uint32Array(32 * r * N);\n\n        const Yi = 32 * r;\n\n        // scratch space\n        const x = new Uint32Array(16);       // salsa20_8\n        const _X = new Uint32Array(16);      // blockmix_salsa8\n\n        const totalOps = p * N * 2;\n        let currentOp = 0;\n        let lastPercent10 = null;\n\n        // Set this to true to abandon the scrypt on the next step\n        let stop = false;\n\n        // State information\n        let state = 0;\n        let i0 = 0, i1;\n        let Bi;\n\n        // How many blockmix_salsa8 can we do per step?\n        const limit = callback ? parseInt(1000 / r): 0xffffffff;\n\n        // Trick from scrypt-async; if there is a setImmediate shim in place, use it\n        const nextTick = (typeof(setImmediate) !== 'undefined') ? setImmediate : setTimeout;\n\n        // This is really all I changed; making scryptsy a state machine so we occasionally\n        // stop and give other evnts on the evnt loop a chance to run. ~RicMoo\n        const incrementalSMix = function() {\n            if (stop) {\n                return callback(new Error('cancelled'), currentOp / totalOps);\n            }\n\n            let steps;\n\n            switch (state) {\n                case 0:\n                    // for (var i = 0; i < p; i++)...\n                    Bi = i0 * 32 * r;\n\n                    arraycopy(B, Bi, XY, 0, Yi);                       // ROMix - 1\n\n                    state = 1;                                         // Move to ROMix 2\n                    i1 = 0;\n\n                    // Fall through\n\n                case 1:\n\n                    // Run up to 1000 steps of the first inner smix loop\n                    steps = N - i1;\n                    if (steps > limit) { steps = limit; }\n                    for (let i = 0; i < steps; i++) {                  // ROMix - 2\n                        arraycopy(XY, 0, V, (i1 + i) * Yi, Yi)         // ROMix - 3\n                        blockmix_salsa8(XY, Yi, r, x, _X);             // ROMix - 4\n                    }\n\n                    // for (var i = 0; i < N; i++)\n                    i1 += steps;\n                    currentOp += steps;\n\n                    if (callback) {\n                        // Call the callback with the progress (optionally stopping us)\n                        const percent10 = parseInt(1000 * currentOp / totalOps);\n                        if (percent10 !== lastPercent10) {\n                            stop = callback(null, currentOp / totalOps);\n                            if (stop) { break; }\n                            lastPercent10 = percent10;\n                        }\n                    }\n\n                    if (i1 < N) { break; }\n\n                    i1 = 0;                                          // Move to ROMix 6\n                    state = 2;\n\n                    // Fall through\n\n                case 2:\n\n                    // Run up to 1000 steps of the second inner smix loop\n                    steps = N - i1;\n                    if (steps > limit) { steps = limit; }\n                    for (let i = 0; i < steps; i++) {                // ROMix - 6\n                        const offset = (2 * r - 1) * 16;             // ROMix - 7\n                        const j = XY[offset] & (N - 1);\n                        blockxor(V, j * Yi, XY, Yi);                 // ROMix - 8 (inner)\n                        blockmix_salsa8(XY, Yi, r, x, _X);           // ROMix - 9 (outer)\n                    }\n\n                    // for (var i = 0; i < N; i++)...\n                    i1 += steps;\n                    currentOp += steps;\n\n                    // Call the callback with the progress (optionally stopping us)\n                    if (callback) {\n                        const percent10 = parseInt(1000 * currentOp / totalOps);\n                        if (percent10 !== lastPercent10) {\n                            stop = callback(null, currentOp / totalOps);\n                            if (stop) { break; }\n                            lastPercent10 = percent10;\n                        }\n                    }\n\n                    if (i1 < N) { break; }\n\n                    arraycopy(XY, 0, B, Bi, Yi);                     // ROMix - 10\n\n                    // for (var i = 0; i < p; i++)...\n                    i0++;\n                    if (i0 < p) {\n                        state = 0;\n                        break;\n                    }\n\n                    b = [];\n                    for (let i = 0; i < B.length; i++) {\n                        b.push((B[i] >>  0) & 0xff);\n                        b.push((B[i] >>  8) & 0xff);\n                        b.push((B[i] >> 16) & 0xff);\n                        b.push((B[i] >> 24) & 0xff);\n                    }\n\n                    const derivedKey = PBKDF2_HMAC_SHA256_OneIter(password, b, dkLen);\n\n                    // Send the result to the callback\n                    if (callback) { callback(null, 1.0, derivedKey); }\n\n                    // Done; don't break (which would reschedule)\n                    return derivedKey;\n            }\n\n            // Schedule the next steps\n            if (callback) { nextTick(incrementalSMix); }\n        }\n\n        // Run the smix state machine until completion\n        if (!callback) {\n            while (true) {\n                const derivedKey = incrementalSMix();\n                if (derivedKey != undefined) { return derivedKey; }\n            }\n        }\n\n        // Bootstrap the async incremental smix\n        incrementalSMix();\n    }\n\n    const lib = {\n        scrypt: function(password, salt, N, r, p, dkLen, progressCallback) {\n            return new Promise(function(resolve, reject) {\n                let lastProgress = 0;\n                if (progressCallback) { progressCallback(0); }\n                _scrypt(password, salt, N, r, p, dkLen, function(error, progress, key) {\n                    if (error) {\n                        reject(error);\n                    } else if (key) {\n                        if (progressCallback && lastProgress !== 1) {\n                            progressCallback(1);\n                        }\n                        resolve(new Uint8Array(key));\n                    } else if (progressCallback && progress !== lastProgress) {\n                        lastProgress = progress;\n                        return progressCallback(progress);\n                    }\n                });\n            });\n        },\n        syncScrypt: function(password, salt, N, r, p, dkLen) {\n            return new Uint8Array(_scrypt(password, salt, N, r, p, dkLen));\n        }\n    };\n\n    // node.js\n    if (typeof(exports) !== 'undefined') {\n       module.exports = lib;\n\n    // RequireJS/AMD\n    // http://www.requirejs.org/docs/api.html\n    // https://github.com/amdjs/amdjs-api/wiki/AMD\n    } else if (typeof(define) === 'function' && define.amd) {\n        define(lib);\n\n    // Web Browsers\n    } else if (root) {\n\n        // If there was an existing library \"scrypt\", make sure it is still available\n        if (root.scrypt) {\n            root._scrypt = root.scrypt;\n        }\n\n        root.scrypt = lib;\n    }\n\n})(this);\n","var SortedArray = (function () {\n    var SortedArray = defclass({\n\n        constructor: function (array, compare) {\n            this.array   = [];\n            this.compare = compare || compareDefault;\n            var length   = array.length,\n                index    = 0;\n            while (index < length) this.insert(array[index++]);\n        },\n        insert: function (element) {\n            var array   = this.array,\n                compare = this.compare,\n                high    = array.length-1,\n                low     = 0,\n                pos = -1,\n                index,\n                ordering;\n\n            // The array is sorted. You must find the position of new element in O(log(n)), not O(n).\n            while (high >= low) {\n                index    = (high + low) / 2 >>> 0;\n                ordering = compare(array[index], element);                \n                if (ordering < 0) low  = index + 1;\n                else if (ordering > 0) high = index - 1;\n                else {\n                    pos = index;\n                    break;\n                };\n            }\n\n            if (pos === -1) {\n                // if element was not found, high < low.\n                pos = high;\n            }\n            // This assures that equal elements inserted after will be in a higher position in array.\n            // They can be equal for comparison purposes, but different objects with different data.\n            // Respecting the chronological order can be important for many applications.\n            pos++;\n            high = array.length-1;\n            while ((pos < high) && (compare(element, array[pos]) === 0)){\n                pos++;\n            }\n            index = array.length;\n            // Just to increase array size.\n            array.push(element);            \n            // Much faster. No need to elements swap.\n            while (index > pos) {\n                array[index] = array[--index];\n            }\n            // Set the new element on its correct position.\n            array[pos] = element;\n\n            return this;\n        },\n        search: function (element) {\n            var array   = this.array,\n                compare = this.compare,\n                high    = array.length-1,\n                low     = 0,\n                // In most languages, inner variable declaration makes the code slower.\n                index,\n                ordering;\n\n            while (high >= low) {\n                index    = (high + low) / 2 >>> 0;\n                ordering = compare(array[index], element);\n\n                     if (ordering < 0) low  = index + 1;\n                else if (ordering > 0) high = index - 1;\n                else return index;\n            }\n\n            return -1;\n        },\n        remove: function (element) {\n            var index = this.search(element);\n            if (index >= 0) this.array.splice(index, 1);\n            return this;\n        }\n    });\n\n    SortedArray.comparing = function (property, array) {\n        return new SortedArray(array, function (a, b) {\n            // This should be faster than calling functions.\n            // Besides, this way it is not needed to create useless function to return property value.\n            return compareDefault(a[property], b[property]);\n        });\n    };\n\n    return SortedArray;\n\n    function defclass(prototype) {\n        var constructor = prototype.constructor;\n        constructor.prototype = prototype;\n        return constructor;\n    }\n\n    function compareDefault(a, b) {\n        // Equality has a very low chance to happen. It should be the last option.\n        if (a < b)\n            return -1;\n        else if (a > b)\n            return 1;\n        else\n            return 0;\n    }\n}());\n\nif (typeof module === \"object\") module.exports = SortedArray;\nif (typeof define === \"function\" && define.amd)\n    define(function () { return SortedArray; });\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var r;\n\nmodule.exports = function rand(len) {\n  if (!r)\n    r = new Rand(null);\n\n  return r.generate(len);\n};\n\nfunction Rand(rand) {\n  this.rand = rand;\n}\nmodule.exports.Rand = Rand;\n\nRand.prototype.generate = function generate(len) {\n  return this._rand(len);\n};\n\n// Emulate crypto API using randy\nRand.prototype._rand = function _rand(n) {\n  if (this.rand.getBytes)\n    return this.rand.getBytes(n);\n\n  var res = new Uint8Array(n);\n  for (var i = 0; i < res.length; i++)\n    res[i] = this.rand.getByte();\n  return res;\n};\n\nif (typeof self === 'object') {\n  if (self.crypto && self.crypto.getRandomValues) {\n    // Modern browsers\n    Rand.prototype._rand = function _rand(n) {\n      var arr = new Uint8Array(n);\n      self.crypto.getRandomValues(arr);\n      return arr;\n    };\n  } else if (self.msCrypto && self.msCrypto.getRandomValues) {\n    // IE\n    Rand.prototype._rand = function _rand(n) {\n      var arr = new Uint8Array(n);\n      self.msCrypto.getRandomValues(arr);\n      return arr;\n    };\n\n  // Safari's WebWorkers do not have `crypto`\n  } else if (typeof window === 'object') {\n    // Old junk\n    Rand.prototype._rand = function() {\n      throw new Error('Not implemented yet');\n    };\n  }\n} else {\n  // Node.js or Web worker with no crypto support\n  try {\n    var crypto = require('crypto');\n    if (typeof crypto.randomBytes !== 'function')\n      throw new Error('Not supported');\n\n    Rand.prototype._rand = function _rand(n) {\n      return crypto.randomBytes(n);\n    };\n  } catch (e) {\n  }\n}\n","var BN = require('bn.js');\nvar MillerRabin = require('miller-rabin');\nvar millerRabin = new MillerRabin();\nvar TWENTYFOUR = new BN(24);\nvar ELEVEN = new BN(11);\nvar TEN = new BN(10);\nvar THREE = new BN(3);\nvar SEVEN = new BN(7);\nvar primes = require('./generatePrime');\nvar randomBytes = require('randombytes');\nmodule.exports = DH;\n\nfunction setPublicKey(pub, enc) {\n  enc = enc || 'utf8';\n  if (!Buffer.isBuffer(pub)) {\n    pub = new Buffer(pub, enc);\n  }\n  this._pub = new BN(pub);\n  return this;\n}\n\nfunction setPrivateKey(priv, enc) {\n  enc = enc || 'utf8';\n  if (!Buffer.isBuffer(priv)) {\n    priv = new Buffer(priv, enc);\n  }\n  this._priv = new BN(priv);\n  return this;\n}\n\nvar primeCache = {};\nfunction checkPrime(prime, generator) {\n  var gen = generator.toString('hex');\n  var hex = [gen, prime.toString(16)].join('_');\n  if (hex in primeCache) {\n    return primeCache[hex];\n  }\n  var error = 0;\n\n  if (prime.isEven() ||\n    !primes.simpleSieve ||\n    !primes.fermatTest(prime) ||\n    !millerRabin.test(prime)) {\n    //not a prime so +1\n    error += 1;\n\n    if (gen === '02' || gen === '05') {\n      // we'd be able to check the generator\n      // it would fail so +8\n      error += 8;\n    } else {\n      //we wouldn't be able to test the generator\n      // so +4\n      error += 4;\n    }\n    primeCache[hex] = error;\n    return error;\n  }\n  if (!millerRabin.test(prime.shrn(1))) {\n    //not a safe prime\n    error += 2;\n  }\n  var rem;\n  switch (gen) {\n    case '02':\n      if (prime.mod(TWENTYFOUR).cmp(ELEVEN)) {\n        // unsuidable generator\n        error += 8;\n      }\n      break;\n    case '05':\n      rem = prime.mod(TEN);\n      if (rem.cmp(THREE) && rem.cmp(SEVEN)) {\n        // prime mod 10 needs to equal 3 or 7\n        error += 8;\n      }\n      break;\n    default:\n      error += 4;\n  }\n  primeCache[hex] = error;\n  return error;\n}\n\nfunction DH(prime, generator, malleable) {\n  this.setGenerator(generator);\n  this.__prime = new BN(prime);\n  this._prime = BN.mont(this.__prime);\n  this._primeLen = prime.length;\n  this._pub = undefined;\n  this._priv = undefined;\n  this._primeCode = undefined;\n  if (malleable) {\n    this.setPublicKey = setPublicKey;\n    this.setPrivateKey = setPrivateKey;\n  } else {\n    this._primeCode = 8;\n  }\n}\nObject.defineProperty(DH.prototype, 'verifyError', {\n  enumerable: true,\n  get: function () {\n    if (typeof this._primeCode !== 'number') {\n      this._primeCode = checkPrime(this.__prime, this.__gen);\n    }\n    return this._primeCode;\n  }\n});\nDH.prototype.generateKeys = function () {\n  if (!this._priv) {\n    this._priv = new BN(randomBytes(this._primeLen));\n  }\n  this._pub = this._gen.toRed(this._prime).redPow(this._priv).fromRed();\n  return this.getPublicKey();\n};\n\nDH.prototype.computeSecret = function (other) {\n  other = new BN(other);\n  other = other.toRed(this._prime);\n  var secret = other.redPow(this._priv).fromRed();\n  var out = new Buffer(secret.toArray());\n  var prime = this.getPrime();\n  if (out.length < prime.length) {\n    var front = new Buffer(prime.length - out.length);\n    front.fill(0);\n    out = Buffer.concat([front, out]);\n  }\n  return out;\n};\n\nDH.prototype.getPublicKey = function getPublicKey(enc) {\n  return formatReturnValue(this._pub, enc);\n};\n\nDH.prototype.getPrivateKey = function getPrivateKey(enc) {\n  return formatReturnValue(this._priv, enc);\n};\n\nDH.prototype.getPrime = function (enc) {\n  return formatReturnValue(this.__prime, enc);\n};\n\nDH.prototype.getGenerator = function (enc) {\n  return formatReturnValue(this._gen, enc);\n};\n\nDH.prototype.setGenerator = function (gen, enc) {\n  enc = enc || 'utf8';\n  if (!Buffer.isBuffer(gen)) {\n    gen = new Buffer(gen, enc);\n  }\n  this.__gen = gen;\n  this._gen = new BN(gen);\n  return this;\n};\n\nfunction formatReturnValue(bn, enc) {\n  var buf = new Buffer(bn.toArray());\n  if (!enc) {\n    return buf;\n  } else {\n    return buf.toString(enc);\n  }\n}\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","export default {\n  'Success': 200,\n\n  'Bad Request': 400,\n  'Unauthorized': 401,\n  'Payment Required': 402,\n  'Forbidden': 403,\n  'Not Found': 404,\n  'Conflict': 409,\n  'Too Many Requests': 429,\n\n  'Internal Server Error': 500,\n  'Service Unavailable': 503,\n  'Gateway Timeout': 504,\n\n  // WebSocket close event codes\n  'Service Restart': 1012,\n\n  // Custom ws close event codes\n  'No Pong Received': 3000,\n  'Client Already Connected': 3001\n}\n","import statusCodes from '../statusCodes'\n\nclass UsernameAlreadyExists extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'UsernameAlreadyExists'\n    this.message = 'Username already exists.'\n    this.status = statusCodes['Conflict']\n  }\n}\n\nclass UsernameMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'UsernameMissing'\n    this.message = 'Username missing.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass UsernameCannotBeBlank extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'UsernameCannotBeBlank'\n    this.message = 'Username cannot be blank.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass UsernameTooLong extends Error {\n  constructor(maxLen, ...params) {\n    super(maxLen, ...params)\n\n    this.name = 'UsernameTooLong'\n    this.message = `Username too long. Must be a max of ${maxLen} characters.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass UsernameMustBeString extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'UsernameMustBeString'\n    this.message = 'Username must be a string.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass PasswordMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'PasswordMissing'\n    this.message = 'Password missing.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass PasswordCannotBeBlank extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'PasswordCannotBeBlank'\n    this.message = 'Password cannot be blank.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass PasswordTooShort extends Error {\n  constructor(minLen, ...params) {\n    super(minLen, ...params)\n\n    this.name = 'PasswordTooShort'\n    this.message = `Password too short. Must be a minimum of ${minLen} characters.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass PasswordTooLong extends Error {\n  constructor(maxLen, ...params) {\n    super(maxLen, ...params)\n\n    this.name = 'PasswordTooLong'\n    this.message = `Password too long. Must be a max of ${maxLen} characters.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass PasswordMustBeString extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'PasswordMustBeString'\n    this.message = 'Password must be a string.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass PasswordAttemptLimitExceeded extends Error {\n  constructor(delay, ...params) {\n    super(delay, ...params)\n\n    this.name = 'PasswordAttemptLimitExceeded'\n    this.message = `Password attempt limit exceeded. Must wait ${delay} to attempt to use password again.`\n    this.status = statusCodes['Unauthorized']\n  }\n}\n\nclass UsernameOrPasswordMismatch extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'UsernameOrPasswordMismatch'\n    this.message = 'Username or password mismatch.'\n    this.status = statusCodes['Unauthorized']\n  }\n}\n\nclass SessionLengthMustBeNumber extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'SessionLengthMustBeNumber'\n    this.message = 'Session length must be a number.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass SessionLengthTooShort extends Error {\n  constructor(minLen, ...params) {\n    super(minLen, ...params)\n\n    this.name = 'SessionLengthTooShort'\n    this.message = `Session length cannot be shorter than ${minLen}.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass SessionLengthTooLong extends Error {\n  constructor(maxLen, ...params) {\n    super(maxLen, ...params)\n\n    this.name = 'SessionLengthTooLong'\n    this.message = `Session length cannot be longer than ${maxLen}.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass AllowServerSideEncryptionMustBeBoolean extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'AllowServerSideEncryptionMustBeBoolean'\n    this.message = 'Allow server-side encryption value must be a boolean.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass UserAlreadySignedIn extends Error {\n  constructor(username, ...params) {\n    super(...params)\n\n    this.name = 'UserAlreadySignedIn'\n    this.message = 'Already signed in.'\n    this.status = statusCodes['Bad Request']\n    this.username = username\n  }\n}\n\nclass UserPendingDeletion extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'UserPendingDeletion'\n    this.message = 'User is pending deletion.'\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass AppIdNotValid extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'AppIdNotValid'\n    this.message = 'App ID not valid.'\n    this.status = statusCodes['Unauthorized']\n  }\n}\n\nclass DomainNotWhitelisted extends Error {\n  constructor(domain, ...params) {\n    super(domain, ...params)\n\n    this.name = 'DomainNotWhitelisted'\n    this.message = `Domain not whitelisted. Whitelist the domain ${domain ? `'${domain}' ` : ''}in your admin panel.`\n    this.status = statusCodes['Unauthorized']\n  }\n}\n\nclass UserNotSignedIn extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'UserNotSignedIn'\n    this.message = 'Not signed in.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass UserNotFound extends Error {\n  constructor(username, ...params) {\n    super(username, ...params)\n\n    if (username) this.username = username\n\n    this.name = 'UserNotFound'\n    this.message = 'User not found.'\n    this.status = statusCodes['Not Found']\n  }\n}\n\nclass UserEmailNotFound extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'UserEmailNotFound'\n    this.message = 'User does not have an email saved.'\n    this.status = statusCodes['Not Found']\n  }\n}\n\nclass UserMustChangePassword extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'UserMustChangePassword'\n    this.message = 'Must change password first.'\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass EmailNotValid extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'EmailNotValid'\n    this.message = 'Email not valid.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ProfileMustBeObject extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ProfileMustBeObject'\n    this.message = 'Profile must be a flat JSON object.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ProfileCannotBeEmpty extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ProfileCannotBeEmpty'\n    this.message = 'Profile cannot be empty.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ProfileHasTooManyKeys extends Error {\n  constructor(maxKeys, ...params) {\n    super(maxKeys, ...params)\n\n    this.name = 'ProfileHasTooManyKeys'\n    this.message = `Profile has too many keys. Must have a max of ${maxKeys} keys.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ProfileKeyTooLong extends Error {\n  constructor(maxLen, key, ...params) {\n    super(maxLen, key, ...params)\n\n    this.name = 'ProfileKeyTooLong'\n    this.message = `Profile key too long. Must be a max of ${maxLen} characters.`\n    this.status = statusCodes['Bad Request']\n    this.key = key\n  }\n}\n\nclass ProfileValueMustBeString extends Error {\n  constructor(key, value, ...params) {\n    super(key, value, ...params)\n\n    this.name = 'ProfileValueMustBeString'\n    this.message = 'Profile value must be a string.'\n    this.status = statusCodes['Bad Request']\n    this.key = key\n    this.value = value\n  }\n}\n\nclass ProfileValueCannotBeBlank extends Error {\n  constructor(key, ...params) {\n    super(key, ...params)\n\n    this.name = 'ProfileValueCannotBeBlank'\n    this.message = 'Profile value cannot be blank.'\n    this.status = statusCodes['Bad Request']\n    this.key = key\n  }\n}\n\nclass ProfileValueTooLong extends Error {\n  constructor(maxLen, key, value, ...params) {\n    super(maxLen, key, value, ...params)\n\n    this.name = 'ProfileValueTooLong'\n    this.message = `Profile value too long. Must be a max of ${maxLen} characters.`\n    this.status = statusCodes['Bad Request']\n    this.key = key\n    this.value = value\n  }\n}\n\nclass RememberMeValueNotValid extends Error {\n  constructor(options, ...params) {\n    super(options, ...params)\n\n    this.name = 'RememberMeValueNotValid'\n    this.message = `Remember me value must be one of ${JSON.stringify(Object.keys(options))}.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ParamsMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ParamsMissing'\n    this.message = 'Parameters expected are missing.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass TrialExceededLimit extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'TrialExceededLimit'\n    this.message = 'Trial exceeded limit of users.'\n    this.status = statusCodes['Payment Required']\n  }\n}\n\nclass CurrentPasswordMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'CurrentPasswordMissing'\n    this.message = 'Current password missing.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass CurrentPasswordIncorrect extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'CurrentPasswordIncorrect'\n    this.message = 'Current password is incorrect.'\n    this.status = statusCodes['Unauthorized']\n  }\n}\n\nclass KeyNotFound extends Error {\n  constructor(message, ...params) {\n    super(message, ...params)\n\n    this.name = 'KeyNotFound'\n    this.message = message\n    this.status = statusCodes['Not Found']\n  }\n}\n\nclass DeleteEndToEndEncryptedDataMustBeBoolean extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'DeleteEndToEndEncryptedDataMustBeBoolean'\n    this.message = 'Delete end-to-end encrypted data value must be a boolean.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nexport default {\n  UsernameAlreadyExists,\n  UsernameMissing,\n  UsernameCannotBeBlank,\n  UsernameTooLong,\n  UsernameMustBeString,\n  PasswordMissing,\n  PasswordCannotBeBlank,\n  PasswordTooShort,\n  PasswordTooLong,\n  PasswordMustBeString,\n  PasswordAttemptLimitExceeded,\n  UsernameOrPasswordMismatch,\n  SessionLengthMustBeNumber,\n  SessionLengthTooShort,\n  SessionLengthTooLong,\n  AllowServerSideEncryptionMustBeBoolean,\n  UserAlreadySignedIn,\n  UserPendingDeletion,\n  AppIdNotValid,\n  DomainNotWhitelisted,\n  UserNotSignedIn,\n  UserNotFound,\n  UserEmailNotFound,\n  UserMustChangePassword,\n  EmailNotValid,\n  ProfileMustBeObject,\n  ProfileCannotBeEmpty,\n  ProfileHasTooManyKeys,\n  ProfileKeyTooLong,\n  ProfileValueMustBeString,\n  ProfileValueCannotBeBlank,\n  ProfileValueTooLong,\n  RememberMeValueNotValid,\n  ParamsMissing,\n  TrialExceededLimit,\n  CurrentPasswordMissing,\n  CurrentPasswordIncorrect,\n  KeyNotFound,\n  DeleteEndToEndEncryptedDataMustBeBoolean,\n}\n","import statusCodes from '../statusCodes'\n\nclass DatabaseNameMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'DatabaseNameMissing'\n    this.message = 'Database name missing.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass DatabaseNameCannotBeBlank extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'DatabaseNameCannotBeBlank'\n    this.message = 'Database name cannot be blank.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass DatabaseNameMustBeString extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'DatabaseNameMustBeString'\n    this.message = 'Database name must be a string.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass DatabaseNameTooLong extends Error {\n  constructor(maxLength, ...params) {\n    super(maxLength, ...params)\n\n    this.name = 'DatabaseNameTooLong'\n    this.message = `Database name cannot be more than ${maxLength} characters.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass DatabaseNameRestricted extends Error {\n  constructor(databaseName, ...params) {\n    super(databaseName, ...params)\n\n    this.name = 'DatabaseNameRestricted'\n    this.message = `Database name '${databaseName}' is restricted. It is used internally by userbase-js.`\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass DatabaseAlreadyOpening extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'DatabaseAlreadyOpening'\n    this.message = 'Already attempting to open database.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ChangeHandlerMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ChangeHandlerMissing'\n    this.message = 'Change handler missing.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ChangeHandlerMustBeFunction extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ChangeHandlerMustBeFunction'\n    this.message = 'Change handler must be a function.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass EncryptionModeNotValid extends Error {\n  constructor(options, ...params) {\n    super(options, ...params)\n\n    this.name = 'EncryptionModeNotValid'\n    this.message = `Encryption mode must be one of ${JSON.stringify(Object.keys(options))}.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ServerSideEncryptionNotEnabledInClient extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ServerSideEncryptionNotEnabledInClient'\n    this.message = 'Server-side encryption must be enabled in the client to use it. To enable it, set allowServerSideEncryption to true in init().'\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass DatabaseNotOpen extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'DatabaseNotOpen'\n    this.message = 'Database is not open.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass DatabaseNotFound extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'DatabaseNotFound'\n    this.message = 'Database not found. Find available databases using getDatabases().'\n    this.status = statusCodes['Not Found']\n  }\n}\n\nclass DatabaseIsReadOnly extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'DatabaseIsReadOnly'\n    this.message = 'Database is read only. Must have permission to write to database.'\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass DatabaseIdMustBeString extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'DatabaseIdMustBeString'\n    this.message = 'Database id must be a string.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass DatabaseIdCannotBeBlank extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'DatabaseIdCannotBeBlank'\n    this.message = 'Database id cannot be blank.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass DatabaseIdNotAllowed extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'DatabaseIdNotAllowed'\n    this.message = 'Database id not allowed. Cannot provide both databaseName and databaseId, can only provide one.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass DatabaseIdNotAllowedForOwnDatabase extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'DatabaseIdNotAllowedForOwnDatabase'\n    this.message = \"Tried to open the user's own database using its databaseId rather than its databaseName. The databaseId should only be used to open databases shared from other users.\"\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass DatabaseIdInvalidLength extends Error {\n  constructor(length, ...params) {\n    super(length, ...params)\n\n    this.name = 'DatabaseIdInvalidLength'\n    this.message = `Database id invalid length. Must be ${length} characters.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ShareTokenInvalid extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ShareTokenInvalid'\n    this.message = 'Share token invalid.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ShareTokenNotFound extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ShareTokenNotFound'\n    this.message = 'Share token not found. Perhaps the database owner has generated a new share token.'\n    this.status = statusCodes['Not Found']\n  }\n}\n\nclass ShareTokenNotAllowed extends Error {\n  constructor(reason, ...params) {\n    super(reason, ...params)\n\n    this.name = 'ShareTokenNotAllowed'\n    this.message = 'Share token not allowed.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ShareTokenNotAllowedForOwnDatabase extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ShareTokenNotAllowedForOwnDatabase'\n    this.message = \"Tried to open the user's own database using its shareToken rather than its databaseName. The shareToken should only be used to open databases shared from other users.\"\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass ReadOnlyMustBeBoolean extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ReadOnlyMustBeBoolean'\n    this.message = 'Read only value must be a boolean.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ReadOnlyParamNotAllowed extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ReadOnlyParamNotAllowed'\n    this.message = 'Read only parameter not allowed when revoking access to a database.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ResharingAllowedParamNotAllowed extends Error {\n  constructor(reason, ...params) {\n    super(reason, ...params)\n\n    this.name = 'ResharingAllowedParamNotAllowed'\n    this.message = `Resharing allowed parameter not allowed ${reason}.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ResharingAllowedMustBeBoolean extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ResharingAllowedMustBeBoolean'\n    this.message = 'Resharing allowed value must be a boolean.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ResharingNotAllowed extends Error {\n  constructor(reason, ...params) {\n    super(reason, ...params)\n\n    this.name = 'ResharingNotAllowed'\n    this.message = `Resharing not allowed. ${reason}.`\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass ResharingWithWriteAccessNotAllowed extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ResharingWithWriteAccessNotAllowed'\n    this.message = 'Resharing with write access not allowed. Must have permission to write to the database to reshare the database with write access another user.'\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass SharingWithSelfNotAllowed extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'SharingWithSelfNotAllowed'\n    this.message = 'Sharing database with self is not allowed. Must share database with another user.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ModifyingOwnPermissionsNotAllowed extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ModifyingOwnPermissionsNotAllowed'\n    this.message = \"Modifying own database permissions not allowed. Must modify another user's permissions.\"\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ModifyingOwnerPermissionsNotAllowed extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ModifyingOwnerPermissionsNotAllowed'\n    this.message = \"Modifying the owner of a database's permissions is not allowed.\"\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass ModifyingPermissionsNotAllowed extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ModifyingPermissionsNotAllowed'\n    this.message = \"Modifying another user's permissions is not allowed. Must have permission to reshare the database with another user.\"\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass GrantingWriteAccessNotAllowed extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'GrantingWriteAccessNotAllowed'\n    this.message = 'Granting write access not allowed. Must have permission to write to the database to grant write access to another user.'\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass RequireVerifiedMustBeBoolean extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'RequireVerifiedMustBeBoolean'\n    this.message = 'Require verified value must be a boolean.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass RequireVerifiedParamNotNecessary extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'RequireVerifiedParamNotNecessary'\n    this.message = 'Require verified parameter not necessary when sharing database without a username.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass RevokeMustBeBoolean extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'RevokeMustBeBoolean'\n    this.message = 'Revoke value must be a boolean.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ItemMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ItemMissing'\n    this.message = 'Item missing.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ItemInvalid extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ItemInvalid'\n    this.message = 'Item must be serializable to JSON.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ItemTooLarge extends Error {\n  constructor(maxKb, ...params) {\n    super(maxKb, ...params)\n\n    this.name = 'ItemTooLarge'\n    this.message = `Item must be less than ${maxKb} KB.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ItemIdMustBeString extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ItemIdMustBeString'\n    this.message = 'Item id must be a string.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ItemIdTooLong extends Error {\n  constructor(maxLength, ...params) {\n    super(maxLength, ...params)\n\n    this.name = 'ItemIdTooLong'\n    this.message = `Item id cannot be more than ${maxLength} characters.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ItemIdMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ItemIdMissing'\n    this.message = 'Item id missing.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ItemIdCannotBeBlank extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ItemIdCannotBeBlank'\n    this.message = 'Item id cannot be blank.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ItemAlreadyExists extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ItemAlreadyExists'\n    this.message = 'Item with the same id already exists.'\n    this.status = statusCodes['Conflict']\n  }\n}\n\nclass ItemDoesNotExist extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ItemDoesNotExist'\n    this.message = 'Item with the provided id does not exist.'\n    this.status = statusCodes['Not Found']\n  }\n}\n\nclass ItemUpdateConflict extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ItemUpdateConflict'\n    this.message = 'Item update conflict.'\n    this.status = statusCodes['Conflict']\n  }\n}\n\nclass FileMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'FileMissing'\n    this.message = 'File missing.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass FileMustBeFile extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'FileMustBeFile'\n    this.message = 'File must be a file.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass FileCannotBeEmpty extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'FileCannotBeEmpty'\n    this.message = 'File cannot be empty.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass FileUploadConflict extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'FileUploadConflict'\n    this.message = 'File upload conflict.'\n    this.status = statusCodes['Conflict']\n  }\n}\n\nclass FileNotFound extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'FileNotFound'\n    this.message = 'File not found.'\n    this.status = statusCodes['Not Found']\n  }\n}\n\nclass FileIdMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'FileIdMissing'\n    this.message = 'File id missing.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass FileIdMustBeString extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'FileIdMustBeString'\n    this.message = 'File id must be a string.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass FileIdCannotBeBlank extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'FileIdCannotBeBlank'\n    this.message = 'File id cannot be blank.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass FileIdTooLong extends Error {\n  constructor(maxLength, ...params) {\n    super(maxLength, ...params)\n\n    this.name = 'FileIdTooLong'\n    this.message = `File id cannot be more than ${maxLength} characters.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass RangeMustBeObject extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'RangeMustBeObject'\n    this.message = 'Range param provided must be object.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass RangeMissingStart extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'RangeMissingStart'\n    this.message = 'Range param missing start.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass RangeMissingEnd extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'RangeMissingEnd'\n    this.message = 'Range param missing end.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass RangeStartMustBeNumber extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'RangeStartMustBeNumber'\n    this.message = 'Range start provided must be a number.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass RangeEndMustBeNumber extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'RangeEndMustBeNumber'\n    this.message = 'Range end provided must be a number.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass RangeStartMustBeGreaterThanZero extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'RangeStartMustBeGreaterThanZero'\n    this.message = 'Range start provided must be greater than 0.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass RangeEndMustBeGreaterThanRangeStart extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'RangeEndMustBeGreaterThanRangeStart'\n    this.message = 'Range end provided must be greater than range start.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass RangeEndMustBeLessThanFileSize extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'RangeEndMustBeLessThanFileSize'\n    this.message = 'Range end provided must be less than file size.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass OperationsMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'OperationsMissing'\n    this.message = 'Operations missing.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass OperationsMustBeArray extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'OperationsMustBeArray'\n    this.message = 'Operations provided must be an array.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass CommandNotRecognized extends Error {\n  constructor(command, ...params) {\n    super(command, ...params)\n\n    this.name = 'CommandNotRecognized'\n    this.message = `Command '${command}' not recognized.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass OperationsConflict extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'OperationsConflict'\n    this.message = 'Operations conflict. Only allowed 1 operation per item.'\n    this.status = statusCodes['Conflict']\n  }\n}\n\nclass OperationsExceedLimit extends Error {\n  constructor(limit, ...params) {\n    super(limit, ...params)\n\n    this.name = 'OperationsExceedLimit'\n    this.message = `Operations exceed limit. Only allowed ${limit} operations.`\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass UserNotVerified extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'UserNotVerified'\n    this.message = 'User not verified. Either verify user before sharing database, or set requireVerified to false.'\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass UserMustBeReverified extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'UserMustBeReverified'\n    this.message = 'User must be reverified.'\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass UserUnableToReceiveDatabase extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'UserUnableToReceiveDatabase'\n    this.message = 'User unable to receive database. User must sign in with an updated userbase-js client to be able to receive database.'\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass VerificationMessageMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'VerificationMessageMissing'\n    this.message = 'Verification message missing.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass VerificationMessageCannotBeBlank extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'VerificationMessageCannotBeBlank'\n    this.message = 'Verification message cannot be blank.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass VerificationMessageMustBeString extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'VerificationMessageMustBeString'\n    this.message = 'Verification message must be a string.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass VerificationMessageInvalid extends Error {\n  constructor(maxLength, ...params) {\n    super(maxLength, ...params)\n\n    this.name = 'VerificationMessageInvalid'\n    this.message = 'Verification message invalid.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass VerifyingSelfNotAllowed extends Error {\n  constructor(maxLength, ...params) {\n    super(maxLength, ...params)\n\n    this.name = 'VerifyingSelfNotAllowed'\n    this.message = 'Verifying self not allowed. Can only verify other users.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ProgressHandlerMustBeFunction extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ProgressHandlerMustBeFunction'\n    this.message = 'Progress handler must be a function.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass TransactionUnauthorized extends Error {\n  constructor(command, ...params) {\n    super(command, ...params)\n\n    this.name = 'TransactionUnauthorized'\n    this.message = `Calling '${command}' on this item is unauthorized.`\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass WriteAccessParamNotAllowed extends Error {\n  constructor(command, ...params) {\n    super(command, ...params)\n\n    this.name = 'WriteAccessParamNotAllowed'\n    this.message = `Write access parameter not allowed. Only the item creator or database owner can change an item's write access settings.`\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nexport default {\n  DatabaseNameMissing,\n  DatabaseNameCannotBeBlank,\n  DatabaseNameMustBeString,\n  DatabaseNameTooLong,\n  DatabaseNameRestricted,\n  DatabaseNotFound,\n  DatabaseIsReadOnly,\n  DatabaseAlreadyOpening,\n  DatabaseIdMustBeString,\n  DatabaseIdCannotBeBlank,\n  DatabaseIdNotAllowed,\n  DatabaseIdNotAllowedForOwnDatabase,\n  DatabaseIdInvalidLength,\n  ShareTokenInvalid,\n  ShareTokenNotFound,\n  ShareTokenNotAllowed,\n  ShareTokenNotAllowedForOwnDatabase,\n  ReadOnlyMustBeBoolean,\n  ReadOnlyParamNotAllowed,\n  ResharingAllowedMustBeBoolean,\n  ResharingNotAllowed,\n  ResharingWithWriteAccessNotAllowed,\n  ResharingAllowedParamNotAllowed,\n  SharingWithSelfNotAllowed,\n  ModifyingOwnPermissionsNotAllowed,\n  ModifyingOwnerPermissionsNotAllowed,\n  ModifyingPermissionsNotAllowed,\n  GrantingWriteAccessNotAllowed,\n  RequireVerifiedMustBeBoolean,\n  RequireVerifiedParamNotNecessary,\n  RevokeMustBeBoolean,\n  ChangeHandlerMissing,\n  ChangeHandlerMustBeFunction,\n  EncryptionModeNotValid,\n  ServerSideEncryptionNotEnabledInClient,\n  DatabaseNotOpen,\n  ItemMissing,\n  ItemInvalid,\n  ItemTooLarge,\n  ItemIdMustBeString,\n  ItemIdTooLong,\n  ItemIdMissing,\n  ItemIdCannotBeBlank,\n  ItemAlreadyExists,\n  ItemDoesNotExist,\n  ItemUpdateConflict,\n  FileMissing,\n  FileMustBeFile,\n  FileCannotBeEmpty,\n  FileUploadConflict,\n  FileNotFound,\n  FileIdMissing,\n  FileIdMustBeString,\n  FileIdCannotBeBlank,\n  FileIdTooLong,\n  RangeMustBeObject,\n  RangeMissingStart,\n  RangeMissingEnd,\n  RangeStartMustBeNumber,\n  RangeEndMustBeNumber,\n  RangeStartMustBeGreaterThanZero,\n  RangeEndMustBeGreaterThanRangeStart,\n  RangeEndMustBeLessThanFileSize,\n  OperationsMissing,\n  OperationsMustBeArray,\n  OperationsConflict,\n  OperationsExceedLimit,\n  CommandNotRecognized,\n  UserNotVerified,\n  UserMustBeReverified,\n  UserUnableToReceiveDatabase,\n  VerificationMessageMissing,\n  VerificationMessageMustBeString,\n  VerificationMessageCannotBeBlank,\n  VerificationMessageInvalid,\n  VerifyingSelfNotAllowed,\n  ProgressHandlerMustBeFunction,\n  TransactionUnauthorized,\n  WriteAccessParamNotAllowed,\n}\n","import statusCodes from '../statusCodes'\n\nclass AppIdAlreadySet extends Error {\n  constructor(appId, ...params) {\n    super(appId, ...params)\n\n    this.name = 'AppIdAlreadySet'\n    this.message = 'Application ID already set.'\n    this.status = statusCodes['Conflict']\n    this.appId = appId\n  }\n}\n\nclass AppIdMustBeString extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'AppIdMustBeString'\n    this.message = 'Application ID must be a string.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass AppIdMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'AppIdMissing'\n    this.message = 'Application ID missing.'\n    this.status = statusCodes['Bad Request']\n  }\n}\nclass AppIdCannotBeBlank extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'AppIdCannotBeBlank'\n    this.message = 'Application ID cannot be blank.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass WebCryptoUnavailable extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'WebCryptoUnavailable'\n    this.message = 'The WebCrypto API is unavailable. Please make sure your website uses https.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass UpdateUserHandlerMustBeFunction extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'UpdateUserHandlerMustBeFunction'\n    this.message = 'Update user handler must be a function.'\n    this.status = statusCodes['Bad Request']\n  }\n}\nexport default {\n  AppIdAlreadySet,\n  AppIdMustBeString,\n  AppIdMissing,\n  AppIdCannotBeBlank,\n  WebCryptoUnavailable,\n  UpdateUserHandlerMustBeFunction,\n}\n","import statusCodes from '../statusCodes'\n\nclass SuccessUrlMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'SuccessUrlMissing'\n    this.message = 'Success url missing to let Stripe know where to redirect users on successful payment.'\n    this.status = statusCodes['Bad Request']\n  }\n}\nclass SuccessUrlMustBeString extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'SuccessUrlMustBeString'\n    this.message = 'Success url must be a string.'\n    this.status = statusCodes['Bad Request']\n  }\n}\nclass SuccessUrlInvalid extends Error {\n  constructor(invalidProtocol, ...params) {\n    super(invalidProtocol, ...params)\n\n    this.name = 'SuccessUrlInvalid'\n    this.message = invalidProtocol ? 'Success url must start with http or https.' : 'Success url invalid.'\n    this.status = statusCodes['Bad Request']\n  }\n}\nclass CancelUrlMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'CancelUrlMissing'\n    this.message = 'Cancel url missing to let Stripe know where to redirect users on canceled payment.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass CancelUrlMustBeString extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'CancelUrlMustBeString'\n    this.message = 'Cancel url must be a string.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass CancelUrlInvalid extends Error {\n  constructor(invalidProtocol, ...params) {\n    super(invalidProtocol, ...params)\n\n    this.name = 'CancelUrlInvalid'\n    this.message = invalidProtocol ? 'Cancel url must start with http or https.' : 'Cancel url invalid.'\n    this.status = statusCodes['Bad Request']\n  }\n}\nclass StripeJsLibraryMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'StripeLibraryMissing'\n    this.message = 'Stripe.js library missing. Be sure to include the script in your html file (https://stripe.com/docs/stripe-js#setup).'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass PaymentsDisabled extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'PaymentsDisabled'\n    this.message = 'Payments on this app are disabled. Enable payments in the admin panel.'\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass PriceIdOrPlanIdAllowed extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'PriceIdOrPlanIdAllowed'\n    this.message = 'Only one of priceId or planId allowed.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass PriceIdOrPlanIdMissing extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'PriceIdOrPlanIdMissing'\n    this.message = 'Please provide a priceId or planId. You can create a product in the Stripe dashboard and find its priceId there.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass SubscriptionPlanAlreadyPurchased extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'SubscriptionPlanAlreadyPurchased'\n    this.message = 'Subscription plan already purchased. Cancel subscription to purchase another.'\n    this.status = statusCodes['Conflict']\n  }\n}\nclass StripeAccountNotConnected extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'StripeAccountNotConnected'\n    this.message = 'Stripe account not connected. Connect a Stripe account in the admin panel.'\n    this.status = statusCodes['Forbidden']\n  }\n}\n\nclass SubscriptionNotFound extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'SubscriptionNotFound'\n    this.message = 'Subscription not found. User must purchase a subscription.'\n    this.status = statusCodes['Payment Required']\n  }\n}\n\nclass SubscriptionInactive extends Error {\n  constructor(subscriptionStatus, ...params) {\n    super(...params)\n\n    this.name = 'SubscriptionInactive'\n    this.message = \"The user's subscription is inactive.\"\n    this.subscriptionStatus = subscriptionStatus\n    this.status = statusCodes['Payment Required']\n  }\n}\n\nclass SubscriptionNotPurchased extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'SubscriptionNotPurchased'\n    this.message = 'Subscription not purchased. User must purchase a subscription.'\n    this.status = statusCodes['Payment Required']\n  }\n}\n\nclass SubscriptionAlreadyCanceled extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'SubscriptionAlreadyCanceled'\n    this.message = 'Subscription already canceled. User must purchase a new subscription.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass TrialExpired extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'TrialExpired'\n    this.message = 'Trial expired. User must purchase a subscription.'\n    this.status = statusCodes['Payment Required']\n  }\n}\n\nclass StripeError extends Error {\n  constructor(error, ...params) {\n    super(error, ...params)\n\n    const { status, type, message } = error\n\n    this.name = 'StripeError'\n    this.message = message\n    this.type = type\n    this.status = status\n  }\n}\n\nexport default {\n  SuccessUrlMissing,\n  SuccessUrlMustBeString,\n  SuccessUrlInvalid,\n  CancelUrlMissing,\n  CancelUrlMustBeString,\n  CancelUrlInvalid,\n  StripeJsLibraryMissing,\n  PaymentsDisabled,\n  PriceIdOrPlanIdAllowed,\n  PriceIdOrPlanIdMissing,\n  SubscriptionPlanAlreadyPurchased,\n  StripeAccountNotConnected,\n  SubscriptionNotFound,\n  SubscriptionInactive,\n  SubscriptionNotPurchased,\n  SubscriptionAlreadyCanceled,\n  TrialExpired,\n  StripeError,\n}\n","import auth from './auth'\nimport db from './db'\nimport config from './config'\nimport payments from './payments'\nimport statusCodes from '../statusCodes'\n\nclass AppIdNotSet extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'AppIdNotSet'\n    this.message = 'App ID not set yet. Make sure to configure app ID.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass ServiceUnavailable extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ServiceUnavailable'\n    this.message = 'Service unavailable.'\n    this.status = statusCodes['Service Unavailable']\n  }\n}\n\nclass InternalServerError extends ServiceUnavailable {\n  constructor(...params) {\n    super(...params)\n\n    this.status = statusCodes['Internal Server Error']\n  }\n}\n\nclass Timeout extends ServiceUnavailable {\n  constructor(...params) {\n    super(...params)\n\n    this.status = statusCodes['Gateway Timeout']\n  }\n}\n\nclass Reconnecting extends ServiceUnavailable {\n  constructor(...params) {\n    super(...params)\n\n    this.message = 'Reconnecting.'\n  }\n}\n\nclass UnknownServiceUnavailable extends ServiceUnavailable {\n  constructor(e, ...params) {\n    super(e, ...params)\n\n    console.error('Userbase error. Please report this to support@userbase.com.\\n\\n', e)\n  }\n}\n\nclass ParamsMustBeObject extends Error {\n  constructor(...params) {\n    super(...params)\n\n    this.name = 'ParamsMustBeObject'\n    this.message = 'Parameters passed to function must be placed inside an object.'\n    this.status = statusCodes['Bad Request']\n  }\n}\n\nclass TooManyRequests extends Error {\n  constructor(retryDelay, ...params) {\n    super(retryDelay, ...params)\n\n    const retryDelaySeconds = Math.floor(retryDelay / 1000)\n\n    this.name = 'TooManyRequests'\n    this.message = `Too many requests in a row. Please try again in ${retryDelaySeconds} second${retryDelaySeconds !== 1 ? 's' : ''}.`\n    this.status = statusCodes['Too Many Requests']\n  }\n}\n\nexport default {\n  ...auth,\n  ...db,\n  ...config,\n  ...payments,\n  AppIdNotSet,\n  InternalServerError,\n  ServiceUnavailable,\n  Timeout,\n  Reconnecting,\n  UnknownServiceUnavailable,\n  ParamsMustBeObject,\n  TooManyRequests\n}\n","import errors from './errors'\n\nconst USERBASE_JS_VERSION = '2.8.0'\n\nconst VERSION = '/v1'\nconst DEFAULT_ENDPOINT = 'https://v1.userbase.com' + VERSION\n\nconst STRIPE_PRODUCTION_PUBLISHABLE_KEY = 'pk_live_jI6lbsAIQlu2u4uTkDXFrSEW'\nconst STRIPE_TEST_PUBLISHABLE_KEY = 'pk_test_rYANrLdNfdJXJ2d808wW4pqY'\n\nlet userbaseAppId = null\nlet userbaseUpdateUserHandler = null\nlet userbaseAllowServerSideEncryptionMode = false\n\nconst getAppId = () => {\n  if (!userbaseAppId) throw new errors.AppIdNotSet\n  return userbaseAppId\n}\n\nconst getUpdateUserHandler = () => userbaseUpdateUserHandler\n\nconst getEndpoint = () => {\n  return window._userbaseEndpoint || DEFAULT_ENDPOINT\n}\n\nconst configure = ({ appId, updateUserHandler, allowServerSideEncryption }) => {\n  if (userbaseAppId && userbaseAppId !== appId) throw new errors.AppIdAlreadySet(userbaseAppId)\n  userbaseAppId = appId\n  userbaseUpdateUserHandler = updateUserHandler\n  userbaseAllowServerSideEncryptionMode = allowServerSideEncryption\n}\n\nconst getStripePublishableKey = (isProduction) => {\n  return isProduction\n    ? (window._USERBASE_STRIPE_PRODUCTION_PUBLISHABLE_KEY || STRIPE_PRODUCTION_PUBLISHABLE_KEY)\n    : (window._USERBASE_STRIPE_TEST_PUBLISHABLE_KEY || STRIPE_TEST_PUBLISHABLE_KEY)\n}\n\nconst isServerSideEncryptionModeAllowed = () => userbaseAllowServerSideEncryptionMode\n\nexport default {\n  USERBASE_JS_VERSION,\n  getAppId,\n  getUpdateUserHandler,\n  getEndpoint,\n  configure,\n  getStripePublishableKey,\n  isServerSideEncryptionModeAllowed,\n}\n","import errors from '../errors'\n\nconst TEN_SECONDS_MS = 10 * 1000\n\nclass RequestError extends Error {\n  constructor(data, status, statusText, ...params) {\n    super(data, status, statusText, ...params)\n\n    this.response = {\n      data,\n      status,\n      statusText,\n    }\n\n    this.message = 'Request failed with status code ' + status\n  }\n}\n\nclass TimeoutError extends Error {\n  constructor(timeout, ...params) {\n    super(timeout, ...params)\n\n    this.message = `timeout of ${timeout}ms exceeded`\n  }\n}\n\nconst handleResponse = (xhr, resolve, reject) => {\n  let response\n  try {\n    response = JSON.parse(xhr.response)\n  } catch {\n    response = xhr.response\n  }\n\n  if (xhr.status >= 200 && xhr.status < 300) {\n    resolve(response)\n  } else {\n    reject(new RequestError(response, xhr.status, xhr.statusText))\n  }\n}\n\nexport const processXhr = (xhr, resolve, reject, timeout = TEN_SECONDS_MS) => {\n  xhr.timeout = timeout\n  xhr.onload = () => handleResponse(xhr, resolve, reject)\n  xhr.onerror = () => reject(new errors.ServiceUnavailable)\n  xhr.ontimeout = () => reject(new TimeoutError(timeout))\n}\n","import config from '../config'\nimport { processXhr } from './utils'\n\nconst signUp = (username, passwordToken, ecKeyData, passwordSalts, keySalts, email, profile, passwordBasedBackup, sessionLength) => {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n\n    const method = 'POST'\n    const url = `${config.getEndpoint()}/api/auth/sign-up?appId=${config.getAppId()}&userbaseJsVersion=${config.USERBASE_JS_VERSION}`\n    const data = JSON.stringify({\n      username,\n      passwordToken,\n      ecKeyData,\n      passwordSalts,\n      keySalts,\n      email,\n      profile,\n      passwordBasedBackup,\n      sessionLength,\n    })\n\n    xhr.open(method, url)\n    xhr.setRequestHeader('Content-Type', 'application/json')\n    xhr.send(data)\n\n    processXhr(xhr, resolve, reject)\n  })\n}\n\nconst getPasswordSalts = (username) => {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n\n    const method = 'GET'\n    const url = `${config.getEndpoint()}/api/auth/get-password-salts?appId=${config.getAppId()}&username=${encodeURIComponent(username)}&userbaseJsVersion=${config.USERBASE_JS_VERSION}`\n\n    xhr.open(method, url)\n    xhr.send()\n\n    processXhr(xhr, resolve, reject)\n  })\n}\n\nconst signIn = async (username, passwordToken, sessionLength) => {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n\n    const method = 'POST'\n    const url = `${config.getEndpoint()}/api/auth/sign-in?appId=${config.getAppId()}&userbaseJsVersion=${config.USERBASE_JS_VERSION}`\n    const data = JSON.stringify({\n      username,\n      passwordToken,\n      sessionLength,\n    })\n\n    xhr.open(method, url)\n    xhr.setRequestHeader('Content-Type', 'application/json')\n    xhr.send(data)\n\n    processXhr(xhr, resolve, reject)\n  })\n}\n\nconst signInWithSession = (sessionId, sessionLength) => {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n\n    const method = 'POST'\n    const url = `${config.getEndpoint()}/api/auth/sign-in-with-session?appId=${config.getAppId()}&sessionId=${sessionId}&userbaseJsVersion=${config.USERBASE_JS_VERSION}`\n    const data = JSON.stringify({\n      sessionLength,\n    })\n\n    xhr.open(method, url)\n    xhr.setRequestHeader('Content-Type', 'application/json')\n    xhr.send(data)\n\n    processXhr(xhr, resolve, reject)\n  })\n}\n\nconst getServerPublicKey = async () => {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n\n    const method = 'GET'\n    const url = `${config.getEndpoint()}/api/auth/server-public-key?&userbaseJsVersion=${config.USERBASE_JS_VERSION}`\n    const responseType = 'arraybuffer'\n\n    xhr.open(method, url)\n    xhr.responseType = responseType\n    xhr.send()\n\n    processXhr(xhr, resolve, reject)\n  })\n}\n\nconst getPublicKey = (username) => {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n\n    const method = 'GET'\n    const url = `${config.getEndpoint()}/api/public-key?appId=${config.getAppId()}&username=${encodeURIComponent(username)}&userbaseJsVersion=${config.USERBASE_JS_VERSION}`\n\n    xhr.open(method, url)\n    xhr.send()\n\n    processXhr(xhr, resolve, reject)\n  })\n}\n\nconst uploadBundleChunk = async (chunk, token) => {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n\n    const method = 'POST'\n    const url = `${config.getEndpoint()}/api/bundle-chunk?userbaseJsVersion=${config.USERBASE_JS_VERSION}`\n\n    xhr.setRequestHeader('Authorization', 'Bearer ' + token)\n\n    xhr.open(method, url)\n    xhr.send(chunk)\n\n    processXhr(xhr, resolve, reject)\n  })\n}\n\nexport default {\n  signUp,\n  getPasswordSalts,\n  signIn,\n  signInWithSession,\n  getServerPublicKey,\n  getPublicKey,\n  uploadBundleChunk,\n}\n","const tryCatchWrapper = (func) => (...args) => {\n  try {\n    return func(...args)\n  } catch (e) {\n    // ok to swallow error\n    //\n    // local/sessionStorage are non-critical benefits. If they happen to be available,\n    // they're helpful, but if not, the SDK functions totally fine.\n    //\n    // If a function fails, behavior is functionally the same as if rememberMe is 'none'.\n    console.warn('Error accessing browser storage. Defaulting to memory.\\n\\n', e)\n  }\n}\n\nconst _getSeedName = (appId, username) => `userbaseSeed.${appId}.${username}`\n\nconst setCurrentSession = tryCatchWrapper((rememberMe, username, signedIn, sessionId, creationDate, expirationDate) => {\n  const session = { username, signedIn, sessionId, creationDate, expirationDate }\n  const sessionString = JSON.stringify(session)\n\n  if (rememberMe === 'local') {\n    localStorage.setItem('userbaseCurrentSession', sessionString)\n  } else if (rememberMe === 'session') {\n    sessionStorage.setItem('userbaseCurrentSession', sessionString)\n  }\n})\n\nconst getCurrentSession = tryCatchWrapper(() => {\n  const sessionStorageCurrentSessionString = sessionStorage.getItem('userbaseCurrentSession')\n\n  if (sessionStorageCurrentSessionString) {\n    const currentSession = JSON.parse(sessionStorageCurrentSessionString)\n\n    if (!currentSession.signedIn) {\n      const localCurrentSessionString = localStorage.getItem('userbaseCurrentSession')\n\n      if (localCurrentSessionString) {\n        const localCurrentSession = JSON.parse(localCurrentSessionString)\n\n        // allows session from localStorage to override sessionStorage if signed in\n        // to localStorage session and not signed in to sessionStorage session\n        if (localCurrentSession.signedIn) {\n          return {\n            ...localCurrentSession,\n            rememberMe: 'local'\n          }\n        }\n      }\n    }\n\n    return {\n      ...JSON.parse(sessionStorageCurrentSessionString),\n      rememberMe: 'session'\n    }\n  }\n\n  const localSessionString = localStorage.getItem('userbaseCurrentSession')\n  return localSessionString && {\n    ...JSON.parse(localSessionString),\n    rememberMe: 'local'\n  }\n})\n\nconst saveSeedString = tryCatchWrapper((rememberMe, appId, username, seedString) => {\n  if (rememberMe === 'local') {\n    localStorage.setItem(_getSeedName(appId, username), seedString)\n  } else if (rememberMe === 'session') {\n    sessionStorage.setItem(_getSeedName(appId, username), seedString)\n  }\n})\n\nconst removeSeedString = tryCatchWrapper((appId, username) => {\n  const seedName = _getSeedName(appId, username)\n  sessionStorage.removeItem(seedName)\n  localStorage.removeItem(seedName)\n})\n\nconst getSeedString = tryCatchWrapper((appId, username) => {\n  const seedName = _getSeedName(appId, username)\n  return sessionStorage.getItem(seedName) || localStorage.getItem(seedName)\n})\n\nconst signInSession = (rememberMe, username, sessionId, creationDate, expirationDate) => {\n  const signedIn = true\n  setCurrentSession(rememberMe, username, signedIn, sessionId, creationDate, expirationDate)\n}\n\nconst signOutSession = (rememberMe, username) => {\n  const signedIn = false\n  setCurrentSession(rememberMe, username, signedIn)\n}\n\nconst removeCurrentSession = tryCatchWrapper(() => {\n  sessionStorage.removeItem('userbaseCurrentSession')\n  localStorage.removeItem('userbaseCurrentSession')\n})\n\nexport default {\n  signInSession,\n  signOutSession,\n  getCurrentSession,\n  saveSeedString,\n  removeSeedString,\n  getSeedString,\n  removeCurrentSession,\n}\n","const ONE_KB = 1024\nconst TEN_KB = 10 * ONE_KB\n\n// https://stackoverflow.com/a/20604561/11601853\nexport const arrayBufferToString = (buf, minified) => {\n  const bufView = minified ? new Uint8Array(buf) : new Uint16Array(buf)\n  const length = bufView.length\n  let result = ''\n  let chunkSize = TEN_KB // using chunks prevents stack from blowing up\n\n  for (var i = 0; i < length; i += chunkSize) {\n    if (i + chunkSize > length) {\n      chunkSize = length - i\n    }\n    const chunk = bufView.subarray(i, i + chunkSize)\n    result += String.fromCharCode.apply(null, chunk)\n  }\n\n  return result\n}\n\n// https://developers.google.com/web/updates/2012/06/How-to-convert-ArrayBuffer-to-and-from-String\nexport const stringToArrayBuffer = (str, minified = false) => {\n  let buf = new ArrayBuffer(str.length * (minified ? 1 : 2)) // 2 bytes for each char, unless using minified. minified only safe for known input\n  let bufView = minified ? new Uint8Array(buf) : new Uint16Array(buf)\n  for (let i = 0, strLen = str.length; i < strLen; i++) {\n    bufView[i] = str.charCodeAt(i)\n  }\n  return buf\n}\n\n/**\n* Creates a new Uint8Array based on two different ArrayBuffers\n*\n* Source: https://gist.github.com/72lions/4528834\n*\n* @param {ArrayBuffers} buffer1 The first buffer.\n* @param {ArrayBuffers} buffer2 The second buffer.\n* @return {ArrayBuffers} The new ArrayBuffer created out of the two.\n*\n*/\nexport const appendBuffer = (buffer1, buffer2) => {\n  const tmp = new Uint8Array(buffer1.byteLength + buffer2.byteLength)\n  tmp.set(new Uint8Array(buffer1), 0)\n  tmp.set(new Uint8Array(buffer2), buffer1.byteLength)\n  return tmp.buffer\n}\n\nexport const appendBuffers = (buffers) => {\n  const bufferByteLengths = buffers.map(buffer => buffer.byteLength)\n  const totalByteLength = bufferByteLengths.reduce((byteLengthSum, bufferByteLength) => byteLengthSum + bufferByteLength)\n\n  const tmp = new Uint8Array(totalByteLength)\n  let currentByteLength = 0\n  for (let i = 0; i < buffers.length; i++) {\n    tmp.set(new Uint8Array(buffers[i]), currentByteLength)\n    currentByteLength += bufferByteLengths[i]\n  }\n\n  return {\n    buffer: tmp.buffer,\n    byteLengths: bufferByteLengths\n  }\n}\n\nexport const hexStringToArrayBuffer = (hexString) => {\n  if (hexString.length % 2 !== 0) throw new Error('Hex string must be even length')\n  const halfHexStringLen = hexString.length / 2\n  const array = []\n  for (let i = 0; i < halfHexStringLen; i++) {\n    const byteStartIndex = i * 2\n    const byte = hexString.substring(byteStartIndex, byteStartIndex + 2)\n    const byteAsInt = parseInt(byte, 16)\n    array.push(byteAsInt)\n  }\n  return new Uint8Array(array)\n}\n","import base64 from 'base64-arraybuffer'\nimport { stringToArrayBuffer } from './utils'\n\nconst BYTE_SIZE = 32 // 256 / 8\nconst HASH_ALGORITHM_NAME = 'SHA-256'\n\n/**\n *\n * @param {ArrayBuffer} data\n */\nconst hash = async (data) => {\n  const result = await window.crypto.subtle.digest(\n    {\n      name: HASH_ALGORITHM_NAME,\n    },\n    data\n  )\n  return result\n}\n\nconst hashBase64String = async (dataString) => {\n  const data = base64.decode(dataString)\n  const result = await hash(data)\n  return base64.encode(result)\n}\n\nconst hashString = async (dataString) => {\n  const data = stringToArrayBuffer(dataString)\n  const result = await hash(data)\n  return base64.encode(result)\n}\n\nexport default {\n  BYTE_SIZE,\n  HASH_ALGORITHM_NAME,\n  hash,\n  hashBase64String,\n  hashString\n}\n","import base64 from 'base64-arraybuffer'\nimport sha256 from './sha-256'\nimport { stringToArrayBuffer } from './utils'\n\nconst HKDF_ALGORITHM_NAME = 'HKDF'\nconst RAW_KEY_TYPE = 'raw'\nconst KEY_IS_NOT_EXTRACTABLE = false\nconst KEY_WILL_BE_USED_TO = ['deriveKey', 'deriveBits']\n\nconst importHkdfKeyFromString = async (seedString) => {\n  const seed = stringToArrayBuffer(seedString)\n  const hkdfKey = await importHkdfKey(seed)\n  return hkdfKey\n}\n\nconst importHkdfKey = async (seed) => {\n  const hkdfKey = await window.crypto.subtle.importKey(\n    RAW_KEY_TYPE,\n    seed,\n    {\n      name: HKDF_ALGORITHM_NAME\n    },\n    KEY_IS_NOT_EXTRACTABLE,\n    KEY_WILL_BE_USED_TO\n  )\n  return hkdfKey\n}\n\n/**\n *  RFC 5869:\n *\n *  \"the use of salt adds significantly to the strength of HKDF...\n *  Ideally, the salt value is a random (or pseudorandom) string of the\n *  length HashLen\"\n *\n *  https://tools.ietf.org/html/rfc5869#section-3.1\n *\n **/\nconst SALT_BYTE_SIZE = sha256.BYTE_SIZE\nconst generateSalt = () => window.crypto.getRandomValues(new Uint8Array(SALT_BYTE_SIZE))\n\nconst getParams = (keyName, salt) => ({\n  name: HKDF_ALGORITHM_NAME,\n  info: stringToArrayBuffer(keyName),\n  hash: sha256.HASH_ALGORITHM_NAME,\n  salt\n})\n\nconst PASSWORD_TOKEN_NAME = 'password-token'\nconst PASSWORD_TOKEN_NUM_BITS = 256\n\nconst getPasswordToken = async (hkdfKey, salt) => {\n  const passwordTokenBits = await window.crypto.subtle.deriveBits(\n    getParams(PASSWORD_TOKEN_NAME, salt),\n    hkdfKey,\n    PASSWORD_TOKEN_NUM_BITS\n  )\n\n  return base64.encode(passwordTokenBits)\n}\n\nexport default {\n  importHkdfKeyFromString,\n  importHkdfKey,\n  generateSalt,\n  getParams,\n  getPasswordToken\n}\n","import base64 from 'base64-arraybuffer'\nimport hkdf from './hkdf'\nimport { arrayBufferToString, stringToArrayBuffer, appendBuffer } from './utils'\n\nconst ENCRYPTION_ALGORITHM_NAME = 'AES-GCM'\nconst BIT_SIZE = 256\nconst KEY_IS_EXTRACTABLE = true\nconst KEY_WILL_BE_USED_TO = ['encrypt', 'decrypt']\nconst RAW_KEY_TYPE = 'raw'\n\nconst ENCRYPTION_KEY_NAME = 'encryption'\n\nconst PASSWORD_BASED_ENCRYPTION_KEY = 'password-based-encryption'\n\n/**\n * NIST recommendation:\n *\n * \"For  IVs,  it  is  recommended  that  implementations  restrict  support  to\n * the  length  of  96  bits,  to  promote interoperability, efficiency, and\n * simplicity of design.\"\n *\n * Pg. 8\n * https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-38d.pdf\n *\n **/\nconst RECOMMENDED_IV_BYTE_SIZE = 12 // 96 / 8\n\n/**\n * Source on tag length:\n * https://crypto.stackexchange.com/questions/26783/ciphertext-and-tag-size-and-iv-transmission-with-aes-in-gcm-mode/26787\n */\nconst RECOMMENDED_AUTHENTICATION_TAG_LENGTH = 128\n\nconst windowOrSelfObject = () => {\n  return typeof window !== 'undefined'\n    ? window\n    : self\n}\n\nconst getEncryptionKeyParams = () => ({\n  name: ENCRYPTION_ALGORITHM_NAME,\n  length: BIT_SIZE\n})\n\nconst getCiphertextParams = (iv) => ({\n  name: ENCRYPTION_ALGORITHM_NAME,\n  tagLength: RECOMMENDED_AUTHENTICATION_TAG_LENGTH,\n  iv\n})\n\nconst generateIv = () => window.crypto.getRandomValues(new Uint8Array(RECOMMENDED_IV_BYTE_SIZE))\n\nconst sliceEncryptedArrayBuffer = (encryptedArrayBuffer) => {\n  const ivStartIndex = encryptedArrayBuffer.byteLength - RECOMMENDED_IV_BYTE_SIZE\n  const ciphertextArrayBuffer = encryptedArrayBuffer.slice(0, ivStartIndex)\n  const iv = encryptedArrayBuffer.slice(ivStartIndex)\n\n  return { ciphertextArrayBuffer, iv }\n}\n\nconst importKeyFromMaster = async (masterKey, salt, encryptionKeyName = ENCRYPTION_KEY_NAME) => {\n  const encryptionKey = await window.crypto.subtle.deriveKey(\n    hkdf.getParams(encryptionKeyName, salt),\n    masterKey,\n    getEncryptionKeyParams(),\n    KEY_IS_EXTRACTABLE,\n    KEY_WILL_BE_USED_TO\n  )\n  return encryptionKey\n}\n\nconst generateKey = async () => {\n  const key = await window.crypto.subtle.generateKey(\n    getEncryptionKeyParams(),\n    KEY_IS_EXTRACTABLE,\n    KEY_WILL_BE_USED_TO\n  )\n  return key\n}\n\nconst getKeyStringFromKey = async (key) => {\n  const rawKey = await window.crypto.subtle.exportKey(RAW_KEY_TYPE, key)\n  const keyString = base64.encode(rawKey)\n  return keyString\n}\n\nconst getKeyFromKeyString = async (keyString) => {\n  const rawKey = base64.decode(keyString)\n  const key = await getKeyFromRawKey(rawKey)\n  return key\n}\n\nconst getKeyFromRawKey = async (rawKey) => {\n  const key = await windowOrSelfObject().crypto.subtle.importKey(\n    RAW_KEY_TYPE,\n    rawKey,\n    {\n      name: ENCRYPTION_ALGORITHM_NAME\n    },\n    KEY_IS_EXTRACTABLE,\n    KEY_WILL_BE_USED_TO\n  )\n  return key\n}\n\nconst getRawKeyFromKey = async (key) => {\n  const rawKey = await windowOrSelfObject().crypto.subtle.exportKey(RAW_KEY_TYPE, key)\n  return rawKey\n}\n\n/**\n *\n * @param {CryptoKey} key\n * @param {ArrayBuffer} plaintext\n * @returns {ArrayBuffer} encrypted Array Buffer\n *\n *     encrypted is a concatentation of Array Buffers [ciphertext, auth tag, IV]\n *\n *     The Authentication Tag is a hash of the plaintext to ensure the same data that\n *     is ecncrypted is the resulting data when decrypted. Note that the browser crypto\n *     library's result is the concatenation of Array Buffers [ciphertext, auth tag]\n *\n *     The IV is a random intialization vector that prevents an attacker\n *     from determining a user's key. It can be exposed alongside the ciphertext safely.\n *\n */\nconst encrypt = async (key, plaintext) => {\n  const iv = generateIv()\n\n  // this result is the concatenation of Array Buffers [ciphertext, auth tag]\n  const ciphertextArrayBuffer = await windowOrSelfObject().crypto.subtle.encrypt(\n    getCiphertextParams(iv),\n    key,\n    plaintext\n  )\n\n  return appendBuffer(ciphertextArrayBuffer, iv)\n}\n\nconst encryptJson = async (key, plaintextJson) => {\n  const plaintextString = JSON.stringify(plaintextJson)\n  const encrypted = await encryptString(key, plaintextString)\n  return encrypted\n}\n\nconst encryptString = async (key, plaintextString) => {\n  const plaintextArrayBuffer = stringToArrayBuffer(plaintextString)\n  const encrypted = await encrypt(key, plaintextArrayBuffer)\n  return base64.encode(encrypted)\n}\n\n/**\n *\n * @param {CryptoKey} key\n * @param {ArrayBuffer} encrypted - the encrypted Array Buffer\n * @returns {object} plaintext\n */\nconst decrypt = async (key, encrypted) => {\n  const { ciphertextArrayBuffer, iv } = sliceEncryptedArrayBuffer(encrypted)\n\n  const plaintextArrayBuffer = await windowOrSelfObject().crypto.subtle.decrypt(\n    getCiphertextParams(iv),\n    key,\n    ciphertextArrayBuffer\n  )\n  return plaintextArrayBuffer\n}\n\nconst decryptJson = async (key, encryptedJsonString) => {\n  const plaintextString = await decryptString(key, encryptedJsonString)\n  return JSON.parse(plaintextString)\n}\n\nconst decryptString = async (key, encryptedString) => {\n  const encryptedArrayBuffer = base64.decode(encryptedString)\n  const plaintextArrayBuffer = await decrypt(key, encryptedArrayBuffer)\n  const plaintextString = arrayBufferToString(plaintextArrayBuffer)\n  return plaintextString\n}\n\nconst getPasswordBasedEncryptionKey = async (hkdfKey, salt) => {\n  const encryptionKey = await window.crypto.subtle.deriveKey(\n    hkdf.getParams(PASSWORD_BASED_ENCRYPTION_KEY, salt),\n    hkdfKey,\n    getEncryptionKeyParams(),\n    !KEY_IS_EXTRACTABLE,\n    KEY_WILL_BE_USED_TO\n  )\n  return encryptionKey\n}\n\nconst generateAndEncryptKeyEncryptionKey = async (key) => {\n  const keyEncryptionKey = await generateKey()\n  const keyEncryptionKeyRaw = await getRawKeyFromKey(keyEncryptionKey)\n  const encryptedKeyEncryptionKey = await encrypt(key, keyEncryptionKeyRaw)\n  return [keyEncryptionKey, encryptedKeyEncryptionKey]\n}\n\nexport default {\n  getEncryptionKeyParams,\n  getCiphertextParams,\n  generateIv,\n  sliceEncryptedArrayBuffer,\n  importKeyFromMaster,\n  generateKey,\n  getKeyStringFromKey,\n  getKeyFromKeyString,\n  getRawKeyFromKey,\n  getKeyFromRawKey,\n  encrypt,\n  encryptJson,\n  encryptString,\n  decrypt,\n  decryptJson,\n  decryptString,\n  getPasswordBasedEncryptionKey,\n  generateAndEncryptKeyEncryptionKey,\n  RAW_KEY_TYPE,\n  KEY_WILL_BE_USED_TO,\n}\n","import DH from 'diffie-hellman'\nimport aesGcm from './aes-gcm'\nimport hkdf from './hkdf'\nimport sha256 from './sha-256'\nimport { hexStringToArrayBuffer } from './utils'\nimport authApi from '../api/auth'\n\nconst KEY_IS_EXTRACTABLE = true\nconst KEY_WILL_BE_USED_TO = ['encrypt'] // unused\nconst DIFFIE_HELLMAN_KEY_NAME = 'diffie-hellman'\n\n// RFC 3526 detailing publicly known 2048 bit safe prime: https://www.ietf.org/rfc/rfc3526.txt\nconst PRIME = hexStringToArrayBuffer('ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff')\nconst GENERATOR = [2]\n\n// get public key from the server to allow developers to easily swap out default server with their own\n// server running userbase-server\nlet serverPublicKey = null\nconst getServerPublicKey = async () => {\n  if (serverPublicKey) {\n    return serverPublicKey\n  } else {\n    serverPublicKey = await authApi.getServerPublicKey() // eslint-disable-line require-atomic-updates\n    return serverPublicKey\n  }\n}\n\nconst setPrivateKeyAndGenerateKeys = (diffieHellman, privateKey) => {\n  diffieHellman.setPrivateKey(privateKey)\n  diffieHellman.generateKeys()\n  return diffieHellman\n}\n\nconst createDiffieHellman = (privateKey) => {\n  const diffieHellman = DH.createDiffieHellman(PRIME, GENERATOR)\n  return setPrivateKeyAndGenerateKeys(diffieHellman, privateKey)\n}\n\nconst getSharedKey = async (privateKey, otherPublicKey) => {\n  const diffieHellman = createDiffieHellman(privateKey)\n  const sharedSecret = diffieHellman.computeSecret(otherPublicKey)\n\n  const sharedRawKey = await sha256.hash(sharedSecret)\n  const sharedKey = await aesGcm.getKeyFromRawKey(sharedRawKey)\n  return sharedKey\n}\n\nconst getPublicKey = (privateKey) => {\n  const diffieHellman = createDiffieHellman(privateKey)\n  return diffieHellman.getPublicKey()\n}\n\nconst getSharedKeyWithServer = async (privateKey) => {\n  const sharedKey = await getSharedKey(privateKey, new Uint8Array(await getServerPublicKey()))\n  return sharedKey\n}\n\nconst importKeyFromMaster = async (masterKey, salt) => {\n  const privateKey = await window.crypto.subtle.deriveKey(\n    hkdf.getParams(DIFFIE_HELLMAN_KEY_NAME, salt),\n    masterKey,\n    aesGcm.getEncryptionKeyParams(), // DH not supported, using raw AES key as secret instead\n    KEY_IS_EXTRACTABLE,\n    KEY_WILL_BE_USED_TO\n  )\n\n  const rawPrivateKey = await aesGcm.getRawKeyFromKey(privateKey)\n  return rawPrivateKey\n}\n\nexport default {\n  getPublicKey,\n  getSharedKey,\n  getSharedKeyWithServer,\n  importKeyFromMaster,\n}\n","import base64 from 'base64-arraybuffer'\nimport sha256 from './sha-256'\nimport hkdf from './hkdf'\nimport aesGcm from './aes-gcm'\nimport { stringToArrayBuffer, arrayBufferToString } from './utils'\n\nconst ECDSA_ALGORITHM_NAME = 'ECDSA'\nconst KEY_IS_EXTRACTABLE = true\nconst KEY_PAIR_WILL_BE_USED_TO = ['sign', 'verify']\nconst PRIVATE_KEY_WILL_BE_USED_TO = ['sign']\nconst PRIVATE_KEY_TYPE = 'jwk' // pkcs8 not supported in firefox, must use jwk\nconst PUBLIC_KEY_WILL_BE_USED_TO = ['verify']\nconst PUBLIC_KEY_TYPE = 'spki'\n\nconst ECDSA_KEY_ENCRYPTION_KEY = 'ecdsa-key-encryption-key'\n\n/**\n * NIST recommendation:\n *\n * 128-bit security provided with 256-bit key size\n *\n * Pg. 55\n * https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-57pt1r5.pdf\n *\n **/\nconst NAMED_CURVE = 'P-256'\n\nconst ECDSA_PARAMS = {\n  name: ECDSA_ALGORITHM_NAME,\n  namedCurve: NAMED_CURVE\n}\n\nconst ECDSA_SIGNING_PARAMS = {\n  name: ECDSA_ALGORITHM_NAME,\n  hash: { name: sha256.HASH_ALGORITHM_NAME }\n}\n\nconst generateKeyPair = async () => {\n  const keyPair = await window.crypto.subtle.generateKey(\n    ECDSA_PARAMS,\n    KEY_IS_EXTRACTABLE,\n    KEY_PAIR_WILL_BE_USED_TO\n  )\n  return keyPair\n}\n\nconst getRawPrivateKeyFromPrivateKey = async (privateKey) => {\n  const jwkPrivateKey = await window.crypto.subtle.exportKey(PRIVATE_KEY_TYPE, privateKey)\n  const rawPrivateKey = stringToArrayBuffer(JSON.stringify(jwkPrivateKey))\n  return rawPrivateKey\n}\n\nconst getPrivateKeyFromRawPrivateKey = async (rawPrivateKey) => {\n  const jwkPrivateKey = JSON.parse(arrayBufferToString(rawPrivateKey))\n  const privateKey = await window.crypto.subtle.importKey(\n    PRIVATE_KEY_TYPE,\n    jwkPrivateKey,\n    ECDSA_PARAMS,\n    KEY_IS_EXTRACTABLE,\n    PRIVATE_KEY_WILL_BE_USED_TO,\n  )\n\n  return privateKey\n}\n\nconst getPublicKeyFromRawPublicKey = async (rawPublicKey) => {\n  const publicKey = await window.crypto.subtle.importKey(\n    PUBLIC_KEY_TYPE,\n    rawPublicKey,\n    ECDSA_PARAMS,\n    KEY_IS_EXTRACTABLE,\n    PUBLIC_KEY_WILL_BE_USED_TO\n  )\n  return publicKey\n}\n\nconst getRawPublicKeyFromPublicKey = async (publicKey) => {\n  const rawPublicKey = await window.crypto.subtle.exportKey(PUBLIC_KEY_TYPE, publicKey)\n  return rawPublicKey\n}\n\nconst getPublicKeyStringFromPublicKey = async (publicKey) => {\n  const rawPublicKey = await getRawPublicKeyFromPublicKey(publicKey)\n  const publicKeyString = base64.encode(rawPublicKey)\n  return publicKeyString\n}\n\nconst getPublicKeyFromPrivateKey = async (privateKey) => {\n  const jwkPrivateKey = await window.crypto.subtle.exportKey('jwk', privateKey)\n\n  // delete private key data\n  delete jwkPrivateKey.d\n\n  // set public key key_ops to enable import as public key\n  jwkPrivateKey.key_ops = PUBLIC_KEY_WILL_BE_USED_TO\n\n  const publicKey = await window.crypto.subtle.importKey(\n    'jwk',\n    jwkPrivateKey, // technically this now has same values as the public key would\n    ECDSA_PARAMS,\n    KEY_IS_EXTRACTABLE,\n    PUBLIC_KEY_WILL_BE_USED_TO\n  )\n\n  return publicKey\n}\n\nconst importEcdsaKeyEncryptionKeyFromMaster = async (masterKey, salt) => {\n  const keyEncryptionKey = await aesGcm.importKeyFromMaster(masterKey, salt, ECDSA_KEY_ENCRYPTION_KEY)\n  return keyEncryptionKey\n}\n\nconst generateEcdsaKeyData = async (masterKey) => {\n  // need to generate new key pair because cannot derive ECDSA key pair using HKDF in WebCrypto\n  const ecdsaKeyPair = await generateKeyPair()\n\n  // derive a key encryption key using HKDF to encrypt the ECDSA private key and store it on server\n  const ecdsaKeyEncryptionKeySalt = hkdf.generateSalt()\n  const ecdsaKeyEncryptionKey = await importEcdsaKeyEncryptionKeyFromMaster(masterKey, ecdsaKeyEncryptionKeySalt)\n  const ecdsaRawPrivateKey = await getRawPrivateKeyFromPrivateKey(ecdsaKeyPair.privateKey)\n  const encryptedEcdsaPrivateKey = await aesGcm.encrypt(ecdsaKeyEncryptionKey, ecdsaRawPrivateKey)\n\n  return {\n    ecdsaPrivateKey: ecdsaKeyPair.privateKey,\n    ecdsaPublicKey: await getPublicKeyStringFromPublicKey(ecdsaKeyPair.publicKey),\n    encryptedEcdsaPrivateKey: base64.encode(encryptedEcdsaPrivateKey),\n    ecdsaKeyEncryptionKeySalt: base64.encode(ecdsaKeyEncryptionKeySalt),\n  }\n}\n\nconst sign = async (privateKey, data) => {\n  const signature = await window.crypto.subtle.sign(\n    ECDSA_SIGNING_PARAMS,\n    privateKey,\n    data\n  )\n  return signature\n}\n\nconst signString = async (privateKey, dataString) => {\n  const data = stringToArrayBuffer(dataString)\n  const signature = await sign(privateKey, data)\n  const signatureString = base64.encode(signature)\n  return signatureString\n}\n\nconst verify = async (publicKey, signature, data) => {\n  const isVerified = await window.crypto.subtle.verify(\n    ECDSA_SIGNING_PARAMS,\n    publicKey,\n    signature,\n    data\n  )\n  return isVerified\n}\n\nconst verifyString = async (publicKey, signatureString, dataString) => {\n  const data = stringToArrayBuffer(dataString)\n  const signature = base64.decode(signatureString)\n  const isVerified = await verify(publicKey, signature, data)\n  return isVerified\n}\n\nexport default {\n  generateEcdsaKeyData,\n  importEcdsaKeyEncryptionKeyFromMaster,\n  getPrivateKeyFromRawPrivateKey,\n  getPublicKeyFromRawPublicKey,\n  getRawPublicKeyFromPublicKey,\n  getPublicKeyStringFromPublicKey,\n  getPublicKeyFromPrivateKey,\n  sign,\n  signString,\n  verify,\n  verifyString,\n}\n","import base64 from 'base64-arraybuffer'\nimport hkdf from './hkdf'\nimport aesGcm from './aes-gcm'\nimport ecdsa from './ecdsa'\nimport { stringToArrayBuffer, arrayBufferToString } from './utils'\n\nconst ECDH_ALGORITHM_NAME = 'ECDH'\nconst KEY_IS_EXTRACTABLE = true\nconst KEY_WILL_BE_USED_TO = ['deriveKey', 'deriveBits']\nconst PRIVATE_KEY_TYPE = 'jwk' // pkcs8 not supported in firefox, must use jwk\nconst PUBLIC_KEY_TYPE = 'spki'\n\nconst ECDH_KEY_ENCRYPTION_KEY = 'ecdh-key-encryption-key'\n\n/**\n * NIST recommendation:\n *\n * 128-bit security provided with 256-bit key size\n *\n * Pg. 55\n * https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-57pt1r5.pdf\n *\n **/\nconst NAMED_CURVE = 'P-256'\n\nconst ECDH_PARAMS = {\n  name: ECDH_ALGORITHM_NAME,\n  namedCurve: NAMED_CURVE\n}\n\nconst generateKeyPair = async () => {\n  const keyPair = await window.crypto.subtle.generateKey(\n    ECDH_PARAMS,\n    KEY_IS_EXTRACTABLE,\n    KEY_WILL_BE_USED_TO\n  )\n  return keyPair\n}\n\nconst getRawPrivateKeyFromPrivateKey = async (privateKey) => {\n  const jwkPrivateKey = await window.crypto.subtle.exportKey(PRIVATE_KEY_TYPE, privateKey)\n  const rawPrivateKey = stringToArrayBuffer(JSON.stringify(jwkPrivateKey))\n  return rawPrivateKey\n}\n\nconst getPrivateKeyFromRawPrivateKey = async (rawPrivateKey) => {\n  const jwkPrivateKey = JSON.parse(arrayBufferToString(rawPrivateKey))\n  const privateKey = await window.crypto.subtle.importKey(\n    PRIVATE_KEY_TYPE,\n    jwkPrivateKey,\n    ECDH_PARAMS,\n    KEY_IS_EXTRACTABLE,\n    KEY_WILL_BE_USED_TO,\n  )\n\n  return privateKey\n}\n\nconst getRawPublicKeyFromPublicKey = async (publicKey) => {\n  const rawPublicKey = await window.crypto.subtle.exportKey(PUBLIC_KEY_TYPE, publicKey)\n  return rawPublicKey\n}\n\nconst getPublicKeyFromRawPublicKey = async (rawPublicKey) => {\n  const publicKey = await window.crypto.subtle.importKey(\n    PUBLIC_KEY_TYPE,\n    rawPublicKey,\n    ECDH_PARAMS,\n    KEY_IS_EXTRACTABLE,\n    [], // empty list ok\n  )\n\n  return publicKey\n}\n\nconst importEcdhKeyEncryptionKeyFromMaster = async (masterKey, salt) => {\n  const keyEncryptionKey = await aesGcm.importKeyFromMaster(masterKey, salt, ECDH_KEY_ENCRYPTION_KEY)\n  return keyEncryptionKey\n}\n\nconst generateEcdhKeyData = async (masterKey, ecdsaPrivateKey) => {\n  // need to generate new key pair because cannot derive ECDH key pair using HKDF in WebCrypto\n  const ecdhKeyPair = await generateKeyPair()\n\n  // derive a key encryption key using HKDF to encrypt the ECDH private key and store it on server\n  const ecdhKeyEncryptionKeySalt = hkdf.generateSalt()\n  const ecdhKeyEncryptionKey = await importEcdhKeyEncryptionKeyFromMaster(masterKey, ecdhKeyEncryptionKeySalt)\n  const ecdhRawPrivateKey = await getRawPrivateKeyFromPrivateKey(ecdhKeyPair.privateKey)\n  const encryptedEcdhPrivateKey = await aesGcm.encrypt(ecdhKeyEncryptionKey, ecdhRawPrivateKey)\n\n  const ecdhPublicKey = await getRawPublicKeyFromPublicKey(ecdhKeyPair.publicKey)\n  const signedEcdhPublicKey = await ecdsa.sign(ecdsaPrivateKey, ecdhPublicKey)\n\n  return {\n    ecdhPrivateKey: ecdhKeyPair.privateKey,\n    ecdhPublicKey: base64.encode(ecdhPublicKey),\n    encryptedEcdhPrivateKey: base64.encode(encryptedEcdhPrivateKey),\n    signedEcdhPublicKey: base64.encode(signedEcdhPublicKey),\n    ecdhKeyEncryptionKeySalt: base64.encode(ecdhKeyEncryptionKeySalt),\n  }\n}\n\nconst computeSharedKeyEncryptionKey = async (otherEcdhPublicKey, ecdhPrivateKey) => {\n  const sharedKeyEncryptionKey = await window.crypto.subtle.deriveKey(\n    {\n      name: ECDH_ALGORITHM_NAME,\n      namedCurve: NAMED_CURVE,\n      public: otherEcdhPublicKey\n    },\n    ecdhPrivateKey,\n    aesGcm.getEncryptionKeyParams(),\n    !KEY_IS_EXTRACTABLE,\n    aesGcm.KEY_WILL_BE_USED_TO\n  )\n\n  return sharedKeyEncryptionKey\n}\n\nexport default {\n  generateKeyPair,\n  generateEcdhKeyData,\n  importEcdhKeyEncryptionKeyFromMaster,\n  getPrivateKeyFromRawPrivateKey,\n  getRawPublicKeyFromPublicKey,\n  getPublicKeyFromRawPublicKey,\n  computeSharedKeyEncryptionKey,\n}\n","import base64 from 'base64-arraybuffer'\nimport hkdf from './hkdf'\nimport sha256 from './sha-256'\nimport { stringToArrayBuffer } from './utils'\n\nconst HMAC_KEY_NAME = 'authentication'\n\nconst ALGORITHM_NAME = 'HMAC'\nconst KEY_IS_EXTRACTABLE = false\nconst KEY_WILL_BE_USED_TO_SIGN = ['sign']\nconst KEY_WILL_BE_USED_TO_SIGN_AND_VERIFY = ['sign', 'verify']\n\nconst importKeyFromMaster = async (masterKey, salt) => {\n  const hmacKey = await window.crypto.subtle.deriveKey(\n    hkdf.getParams(HMAC_KEY_NAME, salt),\n    masterKey,\n    {\n      name: ALGORITHM_NAME,\n      hash: {\n        name: sha256.HASH_ALGORITHM_NAME\n      },\n      length: 512 // need to explicitly set length for WebCrypto node polyfill (see: https://github.com/PeculiarVentures/webcrypto-core/issues/31)\n    },\n    KEY_IS_EXTRACTABLE,\n    KEY_WILL_BE_USED_TO_SIGN\n  )\n  return hmacKey\n}\n\nconst importKeyFromRawBits = async (rawBits) => {\n  const hmacKey = await window.crypto.subtle.importKey(\n    'raw',\n    rawBits,\n    {\n      name: ALGORITHM_NAME,\n      hash: {\n        name: sha256.HASH_ALGORITHM_NAME\n      },\n      length: 256 // need to explicitly set length for WebCrypto node polyfill (see: https://github.com/PeculiarVentures/webcrypto-core/issues/31)\n    },\n    KEY_IS_EXTRACTABLE,\n    KEY_WILL_BE_USED_TO_SIGN_AND_VERIFY\n  )\n  return hmacKey\n}\n\n/**\n *\n * @param {CryptoKey} key\n * @param {String} data\n */\nconst sign = async (key, data) => {\n  const result = await window.crypto.subtle.sign(\n    {\n      name: ALGORITHM_NAME,\n    },\n    key,\n    data\n  )\n  return result\n}\n\n/**\n *\n * @param {CryptoKey} key\n * @param {String} data\n */\nconst signString = async (key, data) => {\n  const result = await sign(key, stringToArrayBuffer(data))\n  return base64.encode(result)\n}\n\nexport default {\n  importKeyFromMaster,\n  importKeyFromRawBits,\n  sign,\n  signString\n}\n","import aesGcm from './aes-gcm'\nimport diffieHellman from './diffie-hellman'\nimport ecdsa from './ecdsa'\nimport ecdh from './ecdh'\nimport sha256 from './sha-256'\nimport hmac from './hmac'\nimport hkdf from './hkdf'\nimport scrypt from './scrypt'\n\nconst SEED_BYTE_SIZE = 32 // 256 / 8\nconst generateSeed = () => window.crypto.getRandomValues(new Uint8Array(SEED_BYTE_SIZE))\n\nexport default {\n  generateSeed,\n  aesGcm,\n  diffieHellman,\n  ecdsa,\n  ecdh,\n  sha256,\n  hmac,\n  hkdf,\n  scrypt\n}\n","import scryptJs from 'scrypt-js'\nimport base64 from 'base64-arraybuffer'\nimport { stringToArrayBuffer } from './utils'\n\n/**\n *\n * From the Scrypt paper:\n *\n * \"100ms is a reasonable upper bound on the delay which should be\n * cryptographically imposed on interactive logins\"\n *\n * Pg. 13\n * https://www.tarsnap.com/scrypt/scrypt.pdf\n *\n * With an optimized Scrypt algorithm running on a 3.1 GHz Intel Core i5,\n * N = 32768 is the highest work factor that takes <100ms for the\n * algorithm to run. Thus, it's the latest recommended work factor.\n *\n * Source: https://blog.filippo.io/the-scrypt-parameters/\n *\n * However, we are not running an optimized version of the algorithm on a\n * single machine. Users are running a pure js version written for the browser.\n * Safari, for example, takes >6 seconds to run when N = 32768 on a 2.5 GHz\n * Intel Core i5. A higher end CPU can only shave around 1 second off that time.\n * Further, it takes over 1s to run in Firefox, and over 500ms to run in Chrome.\n * This is an unacceptably slow interactive login delay to impose on users.\n *\n * Thus, we are going with N = 16384 to ensure interactive logins\n * are closer to the reasonable delay the function will impose on users,\n * while still maintaining a high level of security.\n *\n **/\nconst N = 16384 // 16mb\nconst r = 8\nconst p = 1\nconst dkLen = 32\n\n/**\n * NIST recommendation:\n *\n * \"The length of the randomly-generated portion of the salt shall be at least 128 bits.\"\n *\n * Section 5.1\n * https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-132.pdf\n *\n **/\nconst SALT_LENGTH = 16\nconst generateSalt = () => window.crypto.getRandomValues(new Uint8Array(SALT_LENGTH))\n\nconst hash = async (passwordString, salt, passwordHashAlgo = scryptJs.scrypt) => {\n  const passwordArrayBuffer = new Uint8Array(stringToArrayBuffer(passwordString))\n  const passwordHash = await passwordHashAlgo(passwordArrayBuffer, salt, N, r, p, dkLen)\n  return base64.encode(passwordHash)\n}\n\nexport default {\n  generateSalt,\n  hash,\n}\n","export const readArrayBufferAsString = (arrayBuffer) => {\n  return new Promise(resolve => {\n    let reader = new FileReader()\n    reader.onload = () => resolve(reader.result)\n    reader.readAsText(new Blob([arrayBuffer]))\n  })\n}\n\nconst removeProtocolFromEndpoint = (endpoint) => {\n  const http = 'http://'\n  const https = 'https://'\n\n  if (endpoint.substring(0, http.length) === http) {\n    return endpoint.substring(http.length)\n  } else if (endpoint.substring(0, https.length) === https) {\n    return endpoint.substring(https.length)\n  } else {\n    return endpoint\n  }\n}\n\nexport const getProtocolFromEndpoint = (endpoint) => {\n  return endpoint.split(':')[0]\n}\n\nexport const getWsUrl = (endpoint) => {\n  const host = removeProtocolFromEndpoint(endpoint)\n  const protocol = getProtocolFromEndpoint(endpoint)\n\n  return ((protocol === 'https') ?\n    'wss://' : 'ws://') + host\n}\n\nexport const byteSizeOfString = (string) => {\n  return string.length * 2\n}\n\nexport const objectHasOwnProperty = (object, property) => {\n  return Object.prototype.hasOwnProperty.call(object, property)\n}\n\n// source: http://code.iamkate.com/javascript/queues\nexport function Queue() {\n  let queue = []\n  let offset = 0\n\n  this.getLength = () => queue.length - offset\n\n  this.isEmpty = () => queue.length === 0\n\n  this.enqueue = (item) => {\n    queue.push(item)\n    return this.getLength()\n  }\n\n  this.dequeue = () => {\n    // get item from front of the queue\n    const item = queue[offset]\n\n    offset += 1\n\n    // garbage collect unused space in queue when it grows large\n    if (offset * 2 > queue.length) {\n      queue = queue.slice(offset)\n      offset = 0\n    }\n\n    return item\n  }\n\n  this.peek = () => queue[offset]\n}\n","// load the worker using inline JS so clients can avoid needing to load worker from a separate file\n// https://stackoverflow.com/a/19201292\nconst newWorker = () => {\n  const workerFunction = function () {\n    self.onmessage = function (e) {\n      const {\n        compress,\n        decompress,\n        data,\n      } = e.data\n\n      // copied from LZString, since can't load module from inside web worker without loading a separate file\n      // https://github.com/pieroxy/lz-string/blob/b2e0b270a9f3cf330b778b777385fcba384a1a02/libs/lz-string.min.js\n      const LZString = function () { function o(o, r) { if (!t[o]) { t[o] = {}; for (var n = 0; n < o.length; n++)t[o][o.charAt(n)] = n } return t[o][r] } var r = String.fromCharCode, n = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\", e = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\", t = {}, i = { compressToBase64: function (o) { if (null == o) return \"\"; var r = i._compress(o, 6, function (o) { return n.charAt(o) }); switch (r.length % 4) { default: case 0: return r; case 1: return r + \"===\"; case 2: return r + \"==\"; case 3: return r + \"=\" } }, decompressFromBase64: function (r) { return null == r ? \"\" : \"\" == r ? null : i._decompress(r.length, 32, function (e) { return o(n, r.charAt(e)) }) }, compressToUTF16: function (o) { return null == o ? \"\" : i._compress(o, 15, function (o) { return r(o + 32) }) + \" \" }, decompressFromUTF16: function (o) { return null == o ? \"\" : \"\" == o ? null : i._decompress(o.length, 16384, function (r) { return o.charCodeAt(r) - 32 }) }, compressToUint8Array: function (o) { for (var r = i.compress(o), n = new Uint8Array(2 * r.length), e = 0, t = r.length; t > e; e++) { var s = r.charCodeAt(e); n[2 * e] = s >>> 8, n[2 * e + 1] = s % 256 } return n }, decompressFromUint8Array: function (o) { if (null === o || void 0 === o) return i.decompress(o); for (var n = new Array(o.length / 2), e = 0, t = n.length; t > e; e++)n[e] = 256 * o[2 * e] + o[2 * e + 1]; var s = []; return n.forEach(function (o) { s.push(r(o)) }), i.decompress(s.join(\"\")) }, compressToEncodedURIComponent: function (o) { return null == o ? \"\" : i._compress(o, 6, function (o) { return e.charAt(o) }) }, decompressFromEncodedURIComponent: function (r) { return null == r ? \"\" : \"\" == r ? null : (r = r.replace(/ /g, \"+\"), i._decompress(r.length, 32, function (n) { return o(e, r.charAt(n)) })) }, compress: function (o) { return i._compress(o, 16, function (o) { return r(o) }) }, _compress: function (o, r, n) { if (null == o) return \"\"; var e, t, i, s = {}, p = {}, u = \"\", c = \"\", a = \"\", l = 2, f = 3, h = 2, d = [], m = 0, v = 0; for (i = 0; i < o.length; i += 1)if (u = o.charAt(i), Object.prototype.hasOwnProperty.call(s, u) || (s[u] = f++, p[u] = !0), c = a + u, Object.prototype.hasOwnProperty.call(s, c)) a = c; else { if (Object.prototype.hasOwnProperty.call(p, a)) { if (a.charCodeAt(0) < 256) { for (e = 0; h > e; e++)m <<= 1, v == r - 1 ? (v = 0, d.push(n(m)), m = 0) : v++; for (t = a.charCodeAt(0), e = 0; 8 > e; e++)m = m << 1 | 1 & t, v == r - 1 ? (v = 0, d.push(n(m)), m = 0) : v++, t >>= 1 } else { for (t = 1, e = 0; h > e; e++)m = m << 1 | t, v == r - 1 ? (v = 0, d.push(n(m)), m = 0) : v++, t = 0; for (t = a.charCodeAt(0), e = 0; 16 > e; e++)m = m << 1 | 1 & t, v == r - 1 ? (v = 0, d.push(n(m)), m = 0) : v++, t >>= 1 } l--, 0 == l && (l = Math.pow(2, h), h++), delete p[a] } else for (t = s[a], e = 0; h > e; e++)m = m << 1 | 1 & t, v == r - 1 ? (v = 0, d.push(n(m)), m = 0) : v++, t >>= 1; l--, 0 == l && (l = Math.pow(2, h), h++), s[c] = f++, a = String(u) } if (\"\" !== a) { if (Object.prototype.hasOwnProperty.call(p, a)) { if (a.charCodeAt(0) < 256) { for (e = 0; h > e; e++)m <<= 1, v == r - 1 ? (v = 0, d.push(n(m)), m = 0) : v++; for (t = a.charCodeAt(0), e = 0; 8 > e; e++)m = m << 1 | 1 & t, v == r - 1 ? (v = 0, d.push(n(m)), m = 0) : v++, t >>= 1 } else { for (t = 1, e = 0; h > e; e++)m = m << 1 | t, v == r - 1 ? (v = 0, d.push(n(m)), m = 0) : v++, t = 0; for (t = a.charCodeAt(0), e = 0; 16 > e; e++)m = m << 1 | 1 & t, v == r - 1 ? (v = 0, d.push(n(m)), m = 0) : v++, t >>= 1 } l--, 0 == l && (l = Math.pow(2, h), h++), delete p[a] } else for (t = s[a], e = 0; h > e; e++)m = m << 1 | 1 & t, v == r - 1 ? (v = 0, d.push(n(m)), m = 0) : v++, t >>= 1; l--, 0 == l && (l = Math.pow(2, h), h++) } for (t = 2, e = 0; h > e; e++)m = m << 1 | 1 & t, v == r - 1 ? (v = 0, d.push(n(m)), m = 0) : v++, t >>= 1; for (; ;) { if (m <<= 1, v == r - 1) { d.push(n(m)); break } v++ } return d.join(\"\") }, decompress: function (o) { return null == o ? \"\" : \"\" == o ? null : i._decompress(o.length, 32768, function (r) { return o.charCodeAt(r) }) }, _decompress: function (o, n, e) { var t, i, s, p, u, c, a, l, f = [], h = 4, d = 4, m = 3, v = \"\", w = [], A = { val: e(0), position: n, index: 1 }; for (i = 0; 3 > i; i += 1)f[i] = i; for (p = 0, c = Math.pow(2, 2), a = 1; a != c;)u = A.val & A.position, A.position >>= 1, 0 == A.position && (A.position = n, A.val = e(A.index++)), p |= (u > 0 ? 1 : 0) * a, a <<= 1; switch (t = p) { case 0: for (p = 0, c = Math.pow(2, 8), a = 1; a != c;)u = A.val & A.position, A.position >>= 1, 0 == A.position && (A.position = n, A.val = e(A.index++)), p |= (u > 0 ? 1 : 0) * a, a <<= 1; l = r(p); break; case 1: for (p = 0, c = Math.pow(2, 16), a = 1; a != c;)u = A.val & A.position, A.position >>= 1, 0 == A.position && (A.position = n, A.val = e(A.index++)), p |= (u > 0 ? 1 : 0) * a, a <<= 1; l = r(p); break; case 2: return \"\" }for (f[3] = l, s = l, w.push(l); ;) { if (A.index > o) return \"\"; for (p = 0, c = Math.pow(2, m), a = 1; a != c;)u = A.val & A.position, A.position >>= 1, 0 == A.position && (A.position = n, A.val = e(A.index++)), p |= (u > 0 ? 1 : 0) * a, a <<= 1; switch (l = p) { case 0: for (p = 0, c = Math.pow(2, 8), a = 1; a != c;)u = A.val & A.position, A.position >>= 1, 0 == A.position && (A.position = n, A.val = e(A.index++)), p |= (u > 0 ? 1 : 0) * a, a <<= 1; f[d++] = r(p), l = d - 1, h--; break; case 1: for (p = 0, c = Math.pow(2, 16), a = 1; a != c;)u = A.val & A.position, A.position >>= 1, 0 == A.position && (A.position = n, A.val = e(A.index++)), p |= (u > 0 ? 1 : 0) * a, a <<= 1; f[d++] = r(p), l = d - 1, h--; break; case 2: return w.join(\"\") }if (0 == h && (h = Math.pow(2, m), m++), f[l]) v = f[l]; else { if (l !== d) return null; v = s + s.charAt(0) } w.push(v), f[d++] = s + v.charAt(0), h--, s = v, 0 == h && (h = Math.pow(2, m), m++) } } }; return i }()\n\n      if (compress) postMessage(LZString.compress(data))\n      else if (decompress) postMessage(LZString.decompress(data))\n    }\n  }\n\n  const blobURL = URL.createObjectURL(new Blob(\n    ['(', workerFunction.toString(), ')()'],\n    { type: 'application/javascript' }\n  ))\n\n  const worker = new Worker(blobURL)\n\n  URL.revokeObjectURL(blobURL)\n  return worker\n}\n\n// compress and decompress inside a worker because large amounts of data freeze the DOM\nexport const compress = async (data) => {\n  const worker = newWorker()\n  return new Promise((resolve) => {\n    worker.onmessage = (e) => {\n      resolve(e.data)\n      worker.terminate()\n    }\n    worker.postMessage({ compress: true, data })\n  })\n}\n\nexport const decompress = async (data) => {\n  const worker = newWorker()\n  return new Promise((resolve) => {\n    worker.onmessage = (e) => {\n      resolve(e.data)\n      worker.terminate()\n    }\n    worker.postMessage({ decompress: true, data })\n  })\n}\n","import config from '../config'\nimport { processXhr } from './utils'\n\nconst TIMEOUT = 30 * 1000\n\nexport const uploadBundleChunk = async (userId, databaseId, seqNo, bundleId, chunkNo, chunk) => {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n\n    const method = 'POST'\n    const url = `${config.getEndpoint()}/api/bundle-chunk?userbaseJsVersion=${config.USERBASE_JS_VERSION}&` +\n      `userId=${userId}&` +\n      `databaseId=${databaseId}&` +\n      `seqNo=${seqNo}&` +\n      `bundleId=${bundleId}&` +\n      `chunkNumber=${chunkNo}`\n\n    xhr.open(method, url)\n    xhr.send(new Uint8Array(chunk)) // Uint8Array view prevents deprecation warning in Safari\n\n    processXhr(xhr, resolve, reject, TIMEOUT)\n  })\n}\n","import base64 from 'base64-arraybuffer'\nimport uuidv4 from 'uuid/v4'\nimport localData from './localData'\nimport crypto from './Crypto'\nimport { getWsUrl } from './utils'\nimport statusCodes from './statusCodes'\nimport config from './config'\nimport errors from './errors'\nimport { appendBuffers, arrayBufferToString, stringToArrayBuffer } from './Crypto/utils'\nimport { compress, decompress } from './worker'\nimport { uploadBundleChunk } from './api/db'\n\nconst wsAlreadyConnected = 'Web Socket already connected'\n\nconst BACKOFF_RETRY_DELAY = 1000\nconst MAX_RETRY_DELAY = 1000 * 30\n\nconst BUNDLE_CHUNK_SIZE = 1024 * 512 // 512kb\nconst BUNDLE_CHUNKS_PER_BATCH = 10\n\nconst WS_REQUEST_TIMEOUT = 30 * 1000\n\nconst clientId = uuidv4() // only 1 client ID per browser tab (assumes code does not reload)\n\nclass RequestFailed extends Error {\n  constructor(action, e, ...params) {\n    super(...params)\n\n    this.name = `RequestFailed: ${action}`\n    this.message = e.message\n    this.status = e.status || (e.message === 'timeout' && statusCodes['Gateway Timeout'])\n    this.response = e.status && e\n  }\n}\n\nclass WebSocketError extends Error {\n  constructor(message, username, e, ...params) {\n    super(...params)\n\n    this.name = 'WebSocket error'\n    this.message = message\n    this.username = username\n    this.e = e\n  }\n}\n\nclass Connection {\n  constructor() {\n    this.init()\n  }\n\n  init(resolveConnection, rejectConnection, session, seedString, rememberMe, changePassword, state, encryptionMode) {\n    if (this.pingTimeout) clearTimeout(this.pingTimeout)\n\n    for (const property of Object.keys(this)) {\n      delete this[property]\n    }\n\n    this.ws = null\n    this.connected = false\n\n    this.resolveConnection = resolveConnection\n    this.rejectConnection = rejectConnection\n    this.connectionResolved = false\n\n    this.session = {\n      username: session && session.username,\n      sessionId: session && session.sessionId,\n      creationDate: session && session.creationDate,\n      expirationDate: session && session.expirationDate,\n      userId: session && session.userId,\n      authToken: session && session.authToken,\n    }\n\n    this.seedString = seedString\n    this.changePassword = changePassword\n    this.keys = {\n      init: false,\n      salts: {}\n    }\n\n    this.userData = {\n      stripeData: {}\n    }\n\n    this.rememberMe = rememberMe\n\n    this.requests = {}\n\n    this.state = state || {\n      dbNameToHash: {},\n      databases: {}, // used when openDatabase is called with databaseName\n      databasesByDbId: {}, // used when openDatabase is called with databaseId\n      shareTokenIdToDbId: {}, // used when openDatabase is called with shareToken\n    }\n\n    this.encryptionMode = encryptionMode\n  }\n\n  connect(session, seedString = null, rememberMe, changePassword, reconnectDelay, state) {\n    if (this.connected) throw new WebSocketError(wsAlreadyConnected, this.session.username)\n\n    return new Promise((resolve, reject) => {\n      let timeout = false\n\n      const timeoutToOpenWebSocket = setTimeout(\n        () => {\n          if (!this.connected && !this.reconnecting) {\n            timeout = true\n            reject(new WebSocketError('timeout'))\n          }\n        },\n        10000\n      )\n\n      const url = `${getWsUrl(config.getEndpoint())}/api?appId=${config.getAppId()}&sessionId=${session.sessionId}&clientId=${clientId}&userbaseJsVersion=${config.USERBASE_JS_VERSION}`\n\n      const ws = new WebSocket(url)\n\n      ws.onopen = async () => {\n        if (timeout) return\n        clearTimeout(timeoutToOpenWebSocket)\n      }\n\n      ws.onmessage = async (e) => {\n        if (timeout) return\n\n        try {\n          const message = JSON.parse(e.data)\n          const route = message.route\n\n          switch (route) {\n            case 'Ping': {\n              this.heartbeat()\n\n              const action = 'Pong'\n              this.ws.send(JSON.stringify({ action }))\n              break\n            }\n\n            case 'Connection': {\n              const { encryptionMode } = message\n              this.init(resolve, reject, session, seedString, rememberMe, changePassword, state, encryptionMode)\n              this.ws = ws\n              this.heartbeat()\n              this.connected = true\n\n              // seedString not present on initial connection when still need to change password\n              if (seedString) {\n                const {\n                  keySalts,\n                  validationMessage,\n                  ecKeyData,\n                  encryptedValidationMessage,\n                } = message\n\n                this.keys.salts = keySalts\n\n                this.validationMessage = validationMessage\n                this.ecKeyData = ecKeyData\n\n                // provided by userbase-server for users who have not yet generated their ECDSA key and\n                // still only have a DH key\n                if (encryptedValidationMessage) this.encryptedValidationMessage = new Uint8Array(encryptedValidationMessage.data)\n\n                try {\n                  await this.setKeys(this.seedString)\n                  const userData = await this.validateKey()\n                  this.userData = userData\n                } catch (e) {\n                  if ((e && e.name === 'OperationError') || e instanceof DOMException) throw new Error('Invalid seed')\n                  else throw e\n                }\n\n                this.keys.init = true\n              }\n\n              this.resolveConnection()\n              this.connectionResolved = true\n              break\n            }\n\n            case 'ApplyTransactions': {\n              const dbId = message.dbId\n              const dbNameHash = message.dbNameHash\n\n              // if owner, must have opened the database via databaseName\n              const database = message.isOwner\n                ? this.state.databases[dbNameHash]\n                : this.state.databasesByDbId[dbId]\n\n              if (!database) throw new Error('Missing database')\n\n              // queue guarantees transactions will be applied in the order they are received from the server\n              if (database.applyTransactionsQueue.isEmpty()) {\n\n                // take a spot in the queue and proceed applying so the next caller knows queue is not empty\n                database.applyTransactionsQueue.enqueue(null)\n              } else {\n\n                // wait until prior batch in queue finishes applying successfully\n                await new Promise(resolve => {\n                  const startApplyingThisBatchOfTransactions = resolve\n                  database.applyTransactionsQueue.enqueue(startApplyingThisBatchOfTransactions)\n                })\n              }\n\n              const openingDatabase = (message.dbNameHash && (message.dbKey || message.plaintextDbKey)) || message.shareTokenEncryptedDbKey\n              if (openingDatabase && (!database.dbKeyString || !database.dbKey)) {\n                const dbKeyString = message.plaintextDbKey || (message.dbKey\n                  ? await crypto.aesGcm.decryptString(this.keys.encryptionKey, message.dbKey)\n                  : await database.decryptShareTokenEncryptedDbKey(message.shareTokenEncryptedDbKey, message.shareTokenEncryptionKeySalt)\n                )\n                database.dbKeyString = dbKeyString\n                database.dbKey = await crypto.aesGcm.getKeyFromKeyString(dbKeyString)\n              }\n\n              if (!database.dbKey) throw new Error('Missing db key')\n\n              if (message.writers) {\n                database.attributionEnabled = true\n                for (const { userId, username } of message.writers) {\n                  database.usernamesByUserId.set(userId, username)\n                }\n              }\n\n              // server is sending bundle in chunks, wait until it sends the entire bundle and client applies it\n              if (message.waitForFullBundle) {\n                if (!database.finishedWaitingForBundle) {\n                  await new Promise(resolve => database.finishedWaitingForBundle = resolve)\n                }\n\n                // rebuild bundle from the chunks\n                try {\n                  const bundle = await this.rebuildBundle(database, message.bundleSeqNo, message.encryptedBundleEncryptionKey)\n                  await database.applyBundle(bundle, message.bundleSeqNo)\n                } catch (e) {\n                  window.alert(`Oops! Something went wrong. Please contact the site administrator with this issue (${dbId}).\\n\\n` + e)\n                  throw e\n                }\n              }\n\n              const newTransactions = message.transactionLog\n              await database.applyTransactions(newTransactions, message.ownerId, dbId, dbNameHash)\n\n              if (message.buildBundle) {\n                this.buildBundle(database)\n              }\n\n              // start applying next batch in queue when this one is finished applying successfully\n              database.applyTransactionsQueue.dequeue()\n              if (!database.applyTransactionsQueue.isEmpty()) {\n                const startApplyingNextBatchInQueue = database.applyTransactionsQueue.peek()\n                startApplyingNextBatchInQueue()\n              }\n\n              break\n            }\n\n            case 'DownloadBundleChunk': {\n              const { dbId, dbNameHash, isOwner, bundleSeqNo, isFirstChunk, isLastChunk, chunk } = message\n\n              // if owner, must have opened the database via databaseName\n              const database = isOwner\n                ? this.state.databases[dbNameHash]\n                : this.state.databasesByDbId[dbId]\n\n              if (!database) throw new Error('Missing database')\n\n              // assumes server will always send first chunk first, and last chunk last\n              if (isFirstChunk) database.bundleChunks[bundleSeqNo] = []\n\n              database.bundleChunks[bundleSeqNo].push(chunk)\n\n              if (isLastChunk) {\n                if (database.finishedWaitingForBundle) database.finishedWaitingForBundle()\n                else database.finishedWaitingForBundle = true\n              }\n\n              break\n            }\n\n            case 'UpdatedUser': {\n              this.handleUpdateUser(message.updatedUser)\n              break\n            }\n\n            case 'SignOut':\n            case 'UpdateUser':\n            case 'DeleteUser':\n            case 'CreateDatabase':\n            case 'OpenDatabase':\n            case 'OpenDatabaseByDatabaseId':\n            case 'GetDatabases':\n            case 'GetDatabaseUsers':\n            case 'Insert':\n            case 'Update':\n            case 'Delete':\n            case 'BatchTransaction':\n            case 'InitBundleUpload':\n            case 'CompleteBundleUpload':\n            case 'GenerateFileId':\n            case 'UploadFileChunk':\n            case 'CompleteFileUpload':\n            case 'GetChunk':\n            case 'ValidateKey':\n            case 'GetPasswordSalts':\n            case 'PurchaseSubscription':\n            case 'CancelSubscription':\n            case 'ResumeSubscription':\n            case 'UpdatePaymentMethod':\n            case 'ShareDatabase':\n            case 'ShareDatabaseToken':\n            case 'AuthenticateShareToken':\n            case 'SaveDatabase':\n            case 'ModifyDatabasePermissions':\n            case 'VerifyUser':\n              {\n                const requestId = message.requestId\n\n                if (!requestId) return console.warn('Missing request id')\n\n                const request = this.requests[requestId]\n                if (!request) return console.warn(`Request ${requestId} no longer exists!`)\n                else if (!request.promiseResolve || !request.promiseReject) return\n\n                const response = message.response\n\n                const successfulResponse = response && response.status === statusCodes['Success']\n\n                if (!successfulResponse) return request.promiseReject(response)\n                else return request.promiseResolve(response)\n              }\n\n            default: {\n              console.log('Received unknown message from backend:' + JSON.stringify(message))\n              break\n            }\n          }\n        } catch (e) {\n          if (!this.connectionResolved) {\n            this.close()\n            reject(new WebSocketError(e.message, session.username, e))\n          } else {\n            console.warn('Error handling message: ', e)\n          }\n        }\n      }\n\n      ws.onclose = async (e) => {\n        if (timeout) return\n\n        const serviceRestart = e.code === statusCodes['Service Restart']\n        const clientDisconnected = e.code === statusCodes['No Pong Received']\n        const attemptToReconnect = serviceRestart || clientDisconnected || !e.wasClean // closed without explicit call to ws.close()\n\n        if (attemptToReconnect) {\n          const delay = (serviceRestart && !reconnectDelay)\n            ? 0\n            : (reconnectDelay ? reconnectDelay + BACKOFF_RETRY_DELAY : 1000)\n\n          this.reconnecting = true\n          await this.reconnect(resolve, reject, session, this.seedString || seedString, rememberMe, changePassword, delay, !this.reconnected && state)\n        } else if (e.code === statusCodes['Client Already Connected']) {\n          reject(new WebSocketError(wsAlreadyConnected, session.username, e))\n        } else {\n          this.init()\n        }\n      }\n\n      ws.onerror = () => { } // no-op so node WS implementation doesn't throw not found\n    })\n  }\n\n  async reconnect(resolveConnection, rejectConnection, session, seedString, rememberMe, changePassword, reconnectDelay, currentState) {\n    try {\n      const retryDelay = Math.min(reconnectDelay, MAX_RETRY_DELAY)\n      console.log(`Connection to server lost. Attempting to reconnect in ${retryDelay / 1000} second${retryDelay !== 1000 ? 's' : ''}...`)\n\n      const dbsToReopen = []\n      const dbsToReopenById = []\n\n      // as soon as one reconnect succeeds, resolves all the way up the stack and all reconnects succeed\n      resolveConnection(await new Promise((resolve, reject) => setTimeout(\n        async () => {\n          try {\n            // get copy of currently opened databases' memory references to reopen WebSocket with same databases\n            const state = currentState || {\n              dbNameToHash: { ...this.state.dbNameToHash },\n              databases: { ...this.state.databases },\n              databasesByDbId: { ...this.state.databasesByDbId },\n              shareTokenIdToDbId: { ...this.state.shareTokenIdToDbId },\n            }\n\n            // mark databases as uninitialized to prevent client from using them until they are reopened\n            for (const dbNameHash in state.databases) {\n              state.databases[dbNameHash].init = false\n              state.databases[dbNameHash].finishedWaitingForBundle = false\n              dbsToReopen.push(dbNameHash)\n            }\n\n            for (const dbId in state.databasesByDbId) {\n              state.databasesByDbId[dbId].init = false\n              state.databasesByDbId[dbId].finishedWaitingForBundle = false\n              dbsToReopenById.push(dbId)\n            }\n\n            this.init()\n            this.reconnecting = true\n\n            const result = await this.connect(session, seedString, rememberMe, changePassword, reconnectDelay, state)\n\n            this.reconnected = true\n\n            // only reopen databases on the first call to reconnect()\n            if (!currentState) {\n              await this.reopenDatabases(dbsToReopen, dbsToReopenById, 1000)\n              console.log('Reconnected!')\n            }\n\n            resolve(result)\n          } catch (e) {\n            reject(e)\n          }\n        },\n        retryDelay\n      )))\n    } catch (e) {\n      rejectConnection(e)\n    }\n  }\n\n  async reopenDatabases(dbsToReopen, dbsToReopenById, retryDelay) {\n    try {\n      const openDatabasePromises = []\n\n      // open databases by database name hash\n      for (const dbNameHash of dbsToReopen) {\n        const database = this.state.databases[dbNameHash]\n\n        if (!database.init) {\n          const action = 'OpenDatabase'\n          const params = { dbNameHash, reopenAtSeqNo: database.lastSeqNo }\n          openDatabasePromises.push(this.request(action, params))\n        }\n      }\n\n      // open databases by database ID\n      for (const databaseId of dbsToReopenById) {\n        const database = this.state.databasesByDbId[databaseId]\n\n        if (!database.init) {\n          const shareTokenHkdfKey = database.shareTokenHkdfKey\n\n          // if opened with shareToken, need to reauthenticate it\n          const shareTokenAuthData = shareTokenHkdfKey\n            ? await this.authenticateShareToken(database.shareTokenId, shareTokenHkdfKey)\n            : {}\n\n          const action = 'OpenDatabaseByDatabaseId'\n          const params = { databaseId, reopenAtSeqNo: database.lastSeqNo, ...shareTokenAuthData }\n          openDatabasePromises.push(this.request(action, params))\n        }\n      }\n\n      await Promise.all(openDatabasePromises)\n    } catch (e) {\n\n      // keep attempting to reopen on failure\n      await new Promise(resolve => setTimeout(\n        async () => {\n          await this.reopenDatabases(dbsToReopen, dbsToReopenById, retryDelay + BACKOFF_RETRY_DELAY)\n          resolve()\n        },\n        Math.min(retryDelay, MAX_RETRY_DELAY)\n      ))\n    }\n  }\n\n  heartbeat() {\n    clearTimeout(this.pingTimeout)\n\n    const LATENCY_BUFFER = 3000\n\n    this.pingTimeout = setTimeout(() => {\n      if (this.ws) this.ws.close(statusCodes['No Pong Received'])\n    }, 30000 + LATENCY_BUFFER)\n  }\n\n  close(code) {\n    this.ws\n      ? this.ws.close(code)\n      : this.init()\n  }\n\n  async signOut() {\n    const username = this.session.username\n    const connectionResolved = this.connectionResolved\n    const rejectConnection = this.rejectConnection\n\n    try {\n      localData.signOutSession(this.rememberMe, username)\n\n      const sessionId = this.session.sessionId\n\n      if (this.reconnecting) throw new errors.Reconnecting\n\n      const action = 'SignOut'\n      const params = { sessionId }\n      await this.request(action, params)\n\n      this.close()\n\n      if (!connectionResolved && rejectConnection) {\n        rejectConnection(new WebSocketError('Canceled', username))\n      }\n\n    } catch (e) {\n      if (!connectionResolved && rejectConnection) {\n        rejectConnection(new WebSocketError('Canceled', username))\n      }\n\n      throw e\n    }\n  }\n\n  async setKeys(seedString) {\n    if (this.keys.init) return\n    if (!seedString) throw new WebSocketError('Missing seed', this.session.username)\n    if (!this.keys.salts) throw new WebSocketError('Missing salts', this.session.username)\n    if (!this.seedString) this.seedString = seedString\n\n    const seed = base64.decode(seedString)\n    const masterKey = await crypto.hkdf.importHkdfKey(seed)\n\n    const salts = this.keys.salts\n    this.keys.encryptionKey = await crypto.aesGcm.importKeyFromMaster(masterKey, base64.decode(salts.encryptionKeySalt))\n    this.keys.hmacKey = await crypto.hmac.importKeyFromMaster(masterKey, base64.decode(salts.hmacKeySalt))\n\n    if (salts.ecdsaKeyEncryptionKeySalt) {\n      const ecdsaKeyEncryptionKey = await crypto.ecdsa.importEcdsaKeyEncryptionKeyFromMaster(masterKey, base64.decode(salts.ecdsaKeyEncryptionKeySalt))\n      const encryptedEcdsaPrivateKey = base64.decode(this.ecKeyData.encryptedEcdsaPrivateKey)\n      const rawEcdsaPrivateKey = await crypto.aesGcm.decrypt(ecdsaKeyEncryptionKey, encryptedEcdsaPrivateKey)\n      this.keys.ecdsaPrivateKey = await crypto.ecdsa.getPrivateKeyFromRawPrivateKey(rawEcdsaPrivateKey)\n\n      const ecdhKeyEncryptionKey = await crypto.ecdh.importEcdhKeyEncryptionKeyFromMaster(masterKey, base64.decode(salts.ecdhKeyEncryptionKeySalt))\n      const encryptedEcdhPrivateKey = base64.decode(this.ecKeyData.encryptedEcdhPrivateKey)\n      const rawEcdhPrivateKey = await crypto.aesGcm.decrypt(ecdhKeyEncryptionKey, encryptedEcdhPrivateKey)\n      this.keys.ecdhPrivateKey = await crypto.ecdh.getPrivateKeyFromRawPrivateKey(rawEcdhPrivateKey)\n    } else if (salts.dhKeySalt) {\n\n      // must be an old user created with userbase-js < v2.0.0. Need to prove access to DH key to server\n      this.keys.dhPrivateKey = await crypto.diffieHellman.importKeyFromMaster(masterKey, base64.decode(salts.dhKeySalt))\n    }\n\n    if (salts.dhKeySalt || salts.ecdsaKeyWrapperSalt) {\n\n      // must be an old user created with userbase-js <= v2.0.0. Update EC key data for future logins\n      const ecdsaKeyData = await crypto.ecdsa.generateEcdsaKeyData(masterKey)\n      const ecdhKeyData = await crypto.ecdh.generateEcdhKeyData(masterKey, ecdsaKeyData.ecdsaPrivateKey)\n\n      this.keys.ecdsaPrivateKey = ecdsaKeyData.ecdsaPrivateKey\n      this.keys.ecdhPrivateKey = ecdhKeyData.ecdhPrivateKey\n\n      delete ecdsaKeyData.ecdsaPrivateKey\n      delete ecdhKeyData.ecdhPrivateKey\n\n      this.newEcKeyData = {\n        ecdsaKeyData,\n        ecdhKeyData,\n      }\n    }\n  }\n\n  async validateKey() {\n    let validationMessage\n    if (this.keys.ecdsaPrivateKey && !this.keys.dhPrivateKey) {\n\n      // need to sign the validation message with ECDSA private key\n      validationMessage = await crypto.ecdsa.sign(this.keys.ecdsaPrivateKey, base64.decode(this.validationMessage))\n\n    } else if (this.keys.dhPrivateKey) {\n\n      // need to decrypt the encrypted validation emssage with DH shared key\n      const sharedKey = await crypto.diffieHellman.getSharedKeyWithServer(this.keys.dhPrivateKey)\n      validationMessage = await crypto.aesGcm.decrypt(sharedKey, this.encryptedValidationMessage)\n\n      delete this.keys.dhPrivateKey\n    }\n\n    const action = 'ValidateKey'\n    const params = {\n      validationMessage: base64.encode(validationMessage),\n      ecKeyData: this.newEcKeyData\n    }\n\n    const response = await this.request(action, params)\n    const userData = response.data\n    return userData\n  }\n\n  async request(action, params) {\n    // generate a new requestId\n    const requestId = uuidv4()\n    this.requests[requestId] = {}\n\n    // get a promise that is resolved when the WebSocket\n    // receives a response for this requestId — the promise\n    // would time out of x seconds\n    const responseWatcher = this.watch(requestId)\n\n    // send the request on the WebSocket\n    this.ws.send(JSON.stringify({\n      requestId,\n      action,\n      params\n    }))\n\n    // wait for the response to arrive\n    try {\n      const response = await responseWatcher\n      return response\n    } catch (e) {\n      // process any errors and re-throw them\n      if (e.status === statusCodes['Too Many Requests']) throw new errors.TooManyRequests(e.data.retryDelay)\n      else throw new RequestFailed(action, e)\n    }\n  }\n\n  async watch(requestId) {\n    const response = await new Promise((resolve, reject) => {\n      this.requests[requestId].promiseResolve = resolve\n      this.requests[requestId].promiseReject = reject\n\n      setTimeout(() => { reject(new Error('timeout')) }, WS_REQUEST_TIMEOUT)\n    })\n\n    delete this.requests[requestId]\n    return response\n  }\n\n  async rebuildBundle(database, bundleSeqNo, encryptedBundleEncryptionKey) {\n    const bundleChunks = []\n    for (let i = 0; i < database.bundleChunks[bundleSeqNo].length; i++) {\n      const chunk = database.bundleChunks[bundleSeqNo][i]\n      const chunkArrayBuffer = stringToArrayBuffer(chunk)\n      bundleChunks.push(chunkArrayBuffer)\n    }\n    const bundleArrayBuffer = appendBuffers(bundleChunks).buffer\n\n    const { encrypted, plaintextMetadata } = JSON.parse(arrayBufferToString(bundleArrayBuffer))\n\n    const bundleEncryptionKeyRaw = await crypto.aesGcm.decrypt(database.dbKey, base64.decode(encryptedBundleEncryptionKey))\n    const bundleEncryptionKey = await crypto.aesGcm.getKeyFromRawKey(bundleEncryptionKeyRaw)\n\n    const decrypted = await crypto.aesGcm.decrypt(bundleEncryptionKey, stringToArrayBuffer(encrypted))\n    const decryptedString = arrayBufferToString(decrypted)\n\n    const [decompressedEncrypted, decompressedPlaintextMetdata] = await Promise.all([\n      decompress(decryptedString),\n      decompress(plaintextMetadata),\n    ])\n\n    const bundle = {\n      ...JSON.parse(decompressedEncrypted),\n      ...JSON.parse(decompressedPlaintextMetdata),\n    }\n\n    delete database.bundleChunks[bundleSeqNo]\n\n    return bundle\n  }\n\n  async uploadBundle(userId, dbId, seqNo, bundleId, bundleArrayBuffer) {\n    let position = 0\n    let chunkNumber = 0\n    let batch = [] // will use this to send chunks to server in batches of BUNDLE_CHUNKS_PER_BATCH\n\n    while (position < bundleArrayBuffer.byteLength) {\n      const chunk = bundleArrayBuffer.slice(position, position + BUNDLE_CHUNK_SIZE)\n\n      // using XHR to send binary data because Safari has trouble with string encoding over WebSocket\n      batch.push(uploadBundleChunk(userId, dbId, seqNo, bundleId, chunkNumber, chunk))\n\n      if (batch.length === BUNDLE_CHUNKS_PER_BATCH) {\n        try {\n          await Promise.all(batch)\n        } catch {\n          // ok to fail - bundling is just an optimization\n          return 0\n        }\n        batch = []\n      }\n\n      chunkNumber += 1\n      position += BUNDLE_CHUNK_SIZE\n    }\n\n    try {\n      await Promise.all(batch)\n    } catch {\n      // ok to fail - bundling is just an optimization\n      return 0\n    }\n\n    return chunkNumber\n  }\n\n  async initBundleUpload(dbId, seqNo, dbKey) {\n    const action = 'InitBundleUpload'\n    const params = { dbId, seqNo }\n    let initResponse\n    try {\n      initResponse = await this.request(action, params)\n    } catch {\n      // ok to fail - bundling is just an optimization\n      return {}\n    }\n    const { bundleId } = initResponse.data\n\n    const [bundleEncryptionKey, encryptedBundleEncryptionKey] = await crypto.aesGcm.generateAndEncryptKeyEncryptionKey(dbKey)\n\n    return { bundleId, bundleEncryptionKey, encryptedBundleEncryptionKey: base64.encode(encryptedBundleEncryptionKey) }\n  }\n\n  orderedItems(items, itemsIndex) {\n    const orderedItemsArray = []\n    for (let i = 0; i < itemsIndex.array.length; i++) {\n      const itemId = itemsIndex.array[i].itemId\n      orderedItemsArray.push(items[itemId])\n    }\n    return orderedItemsArray\n  }\n\n  prepareBundle(database) {\n    const {\n      items,\n      itemsIndex,\n      itemsPlaintextMetadata,\n    } = database\n\n    const bundle = {\n      // these values are all provided as input values to SDK, or generated by SDK - will compress, then encrypt\n      encrypted: JSON.stringify({\n        items: this.orderedItems(items, itemsIndex),\n        itemsIndex: itemsIndex.array,\n      }),\n\n      // these are values the server has access to and can modify - will compress, but no need to encrypt and risk CRIME\n      plaintextMetadata: JSON.stringify({\n        itemsPlaintextMetadata: this.orderedItems(itemsPlaintextMetadata, itemsIndex),\n      }),\n    }\n\n    return bundle\n  }\n\n  async buildBundle(database) {\n    const dbId = database.dbId\n    const lastSeqNo = database.lastSeqNo\n    const dbKey = database.dbKey\n    const userId = this.session.userId\n\n    // Client will only attempt to bundle at a particular seqNo a single time. This prevents server from spamming\n    // client with buildBundle to maliciously get the client to re-use an IV in AES-GCM and reveal the dbKey\n    if (database.bundledAtSeqNo && database.bundledAtSeqNo >= lastSeqNo) return\n    else database.bundledAtSeqNo = lastSeqNo\n\n    const bundle = this.prepareBundle(database)\n\n    const writers = database.attributionEnabled\n      ? [...database.usernamesByUserId.keys()].join(',')\n      : undefined\n\n    const { bundleId, bundleEncryptionKey, encryptedBundleEncryptionKey } = await this.initBundleUpload(dbId, lastSeqNo, dbKey)\n    if (!bundleId) return\n\n    const [compressedBeforeEncryption, compressedPlaintextMetadataString] = await Promise.all([\n      compress(bundle.encrypted),\n      compress(bundle.plaintextMetadata),\n    ])\n\n    const compressedArrayBufferBeforeEncryption = stringToArrayBuffer(compressedBeforeEncryption)\n    const encryptedItems = await crypto.aesGcm.encrypt(bundleEncryptionKey, compressedArrayBufferBeforeEncryption)\n\n    bundle.encrypted = arrayBufferToString(encryptedItems)\n    bundle.plaintextMetadata = compressedPlaintextMetadataString\n    const bundleArrayBuffer = stringToArrayBuffer(JSON.stringify(bundle))\n\n    const numChunks = await this.uploadBundle(userId, dbId, lastSeqNo, bundleId, bundleArrayBuffer)\n    if (!numChunks) return\n\n    const action = 'CompleteBundleUpload'\n    const params = { dbId, seqNo: lastSeqNo, bundleId, writers, numChunks, encryptedBundleEncryptionKey }\n    try {\n      await this.request(action, params)\n    } catch {\n      // ok to fail - bundling is just an optimization\n      return\n    }\n  }\n\n  buildUserResult({ username, userId, authToken, email, profile, protectedProfile, usedTempPassword, changePassword, passwordChanged, userData }) {\n    const result = { username, userId, authToken }\n\n    if (email) result.email = email\n    if (profile) result.profile = profile\n    if (protectedProfile) result.protectedProfile = protectedProfile\n    if (usedTempPassword) result.usedTempPassword = usedTempPassword\n    if (changePassword) result.changePassword = changePassword\n    if (passwordChanged) result.passwordChanged = passwordChanged\n\n    if (userData) {\n      const { creationDate, stripeData } = userData\n      if (creationDate) result.creationDate = creationDate\n\n      if (stripeData) {\n        const { paymentsMode, subscriptionStatus, cancelSubscriptionAt, subscriptionPlanId, trialExpirationDate } = stripeData\n\n        if (paymentsMode) result.paymentsMode = paymentsMode\n        if (subscriptionStatus) result.subscriptionStatus = subscriptionStatus\n        if (cancelSubscriptionAt) result.cancelSubscriptionAt = cancelSubscriptionAt\n        if (subscriptionPlanId) result.subscriptionPlanId = subscriptionPlanId\n        if (trialExpirationDate) result.trialExpirationDate = trialExpirationDate\n      }\n    }\n\n    return result\n  }\n\n  handleUpdateUser(updatedUser) {\n    // make sure WebSocket session matches provided user\n    if (this.session && this.session.userId === updatedUser['userId']) {\n      this.session.username = updatedUser['username']\n      this.userData = updatedUser.userData\n\n      const updateUserHandler = config.getUpdateUserHandler()\n      if (updateUserHandler) {\n        updateUserHandler({ user: this.buildUserResult({ authToken: this.session.authToken, ...updatedUser }) })\n      }\n    }\n  }\n\n  async rotateKeys(newSeedString, newKeyData) {\n    // re-arrange object to fit expected structure for setKeys() function\n    const { keySalts, ecKeyData } = newKeyData\n    const { ecdsaKeyData, ecdhKeyData } = ecKeyData\n    keySalts.ecdsaKeyEncryptionKeySalt = ecdsaKeyData.ecdsaKeyEncryptionKeySalt\n    keySalts.ecdhKeyEncryptionKeySalt = ecdhKeyData.ecdhKeyEncryptionKeySalt\n\n    this.keys.salts = keySalts\n    this.ecKeyData = { ...ecdsaKeyData, ...ecdhKeyData }\n\n    await this.setKeys(newSeedString)\n\n    this.keys.init = true\n  }\n\n  async authenticateShareToken(shareTokenId, shareTokenHkdfKey) {\n    // retrieve shareToken auth key data in order to prove access to shareToken to server\n    const action = 'AuthenticateShareToken'\n    const params = { shareTokenId }\n\n    let response\n    try {\n      response = await this.request(action, params)\n    } catch (e) {\n      if (e.response && e.response.data === 'ShareTokenNotFound') throw new errors.ShareTokenNotFound\n      throw e\n    }\n    const { databaseId, shareTokenAuthKeyData, validationMessage } = response.data\n\n    // decrypt ECDSA private key. if it fails, not using the correct shareToken\n    let shareTokenEcdsaPrivateKey\n    try {\n      const shareTokenEcdsaKeyEncryptionKeySalt = base64.decode(shareTokenAuthKeyData.shareTokenEcdsaKeyEncryptionKeySalt)\n      const shareTokenEcdsaKeyEncryptionKey = await crypto.ecdsa.importEcdsaKeyEncryptionKeyFromMaster(shareTokenHkdfKey, shareTokenEcdsaKeyEncryptionKeySalt)\n      const shareTokenEncryptedEcdsaPrivateKey = base64.decode(shareTokenAuthKeyData.shareTokenEncryptedEcdsaPrivateKey)\n      const shareTokenEcdsaPrivateKeyRaw = await crypto.aesGcm.decrypt(shareTokenEcdsaKeyEncryptionKey, shareTokenEncryptedEcdsaPrivateKey)\n      shareTokenEcdsaPrivateKey = await crypto.ecdsa.getPrivateKeyFromRawPrivateKey(shareTokenEcdsaPrivateKeyRaw)\n    } catch {\n      throw new errors.ShareTokenInvalid\n    }\n\n    // sign validation message sent by the server\n    const signedValidationMessage = await crypto.ecdsa.sign(shareTokenEcdsaPrivateKey, base64.decode(validationMessage))\n    return { databaseId, validationMessage, signedValidationMessage: base64.encode(signedValidationMessage) }\n  }\n}\n\nexport default new Connection()\n","import base64 from 'base64-arraybuffer'\nimport authApi from './api/auth'\nimport ws from './ws'\nimport crypto from './Crypto'\nimport localData from './localData'\nimport config from './config'\nimport errors from './errors'\nimport statusCodes from './statusCodes'\nimport { objectHasOwnProperty, getWsUrl } from './utils'\n\nconst MAX_PASSWORD_CHAR_LENGTH = 1000\nconst MIN_PASSWORD_CHAR_LENGTH = 6\n\nconst REMEMBER_ME_OPTIONS = {\n  local: true,\n  session: true,\n  none: true\n}\n\nconst KEY_NOT_FOUND_ON_SIGN_IN = \"Device not recognized. This temporary password can only be used to sign in from a device you've signed in from before.\"\nconst KEY_NOT_FOUND_ON_FORGOT_PASSWORD = \"Device not recognized. Forgot password only works from a device you've signed in from before.\"\n\nconst _checkSignedInState = () => {\n  if (ws.reconnecting) throw new errors.Reconnecting\n  if (!ws.keys.init && ws.changePassword) throw new errors.UserMustChangePassword\n  if (!ws.keys.init) throw new errors.UserNotSignedIn\n}\n\nconst _parseGenericErrors = (e) => {\n  if (e.response) {\n    if (e.response.data === 'Domain not whitelisted') {\n      throw new errors.DomainNotWhitelisted(window.location.origin)\n    } else if (e.response.data === 'App ID not valid') {\n      throw new errors.AppIdNotValid\n    } else if (e.response.data === 'UserNotFound') {\n      throw new errors.UserNotFound\n    } else if (e.response.status === statusCodes['Internal Server Error']) {\n      throw new errors.InternalServerError\n    } else if (e.response.status === statusCodes['Gateway Timeout']) {\n      throw new errors.Timeout\n    }\n  } else if (e.message && e.message.indexOf('timeout') !== -1) {\n    throw new errors.Timeout\n  }\n}\n\nconst _connectWebSocket = async (session, seed, rememberMe, changePassword) => {\n  try {\n    await ws.connect(session, seed, rememberMe, changePassword)\n  } catch (e) {\n    _parseGenericErrors(e)\n\n    if (e.message === 'Web Socket already connected') {\n      throw new errors.UserAlreadySignedIn(e.username)\n    }\n\n    throw e\n  }\n}\n\nconst _parseGenericUsernamePasswordError = (e) => {\n  if (e.response && e.response.data.error === 'UsernameTooLong') {\n    throw new errors.UsernameTooLong(e.response.data.maxLen)\n  } else if (e.response && e.response.data.error === 'PasswordAttemptLimitExceeded') {\n    throw new errors.PasswordAttemptLimitExceeded(e.response.data.delay)\n  }\n}\n\nconst _parseSessionLengthError = (e) => {\n  if (e.response && e.response.data) {\n    const data = e.response.data\n\n    switch (data.error) {\n      case 'SessionLengthTooShort':\n        throw new errors.SessionLengthTooShort(data.minLen)\n\n      case 'SessionLengthTooLong':\n        throw new errors.SessionLengthTooLong(data.maxLen)\n    }\n  }\n}\n\nconst _parseUserResponseError = (e, username) => {\n  _parseGenericErrors(e)\n  _parseGenericUsernamePasswordError(e)\n\n  if (e.response) {\n    const data = e.response.data\n\n    switch (data) {\n      case 'UsernameAlreadyExists':\n        throw new errors.UsernameAlreadyExists(username)\n\n      case 'TrialExceededLimit':\n        throw new errors.TrialExceededLimit\n\n      case 'CurrentPasswordIncorrect':\n        throw new errors.CurrentPasswordIncorrect\n\n      default:\n      // continue\n    }\n\n    switch (data.error) {\n      case 'EmailNotValid':\n        throw new errors.EmailNotValid\n\n      case 'ProfileMustBeObject':\n        throw new errors.ProfileMustBeObject\n\n      case 'ProfileKeyTooLong':\n        throw new errors.ProfileKeyTooLong(data.maxLen, data.key)\n\n      case 'ProfileValueMustBeString':\n        throw new errors.ProfileValueMustBeString(data.key, data.value)\n\n      case 'ProfileValueCannotBeBlank':\n        throw new errors.ProfileValueCannotBeBlank(data.key)\n\n      case 'ProfileValueTooLong':\n        throw new errors.ProfileValueTooLong(data.maxLen, data.key, data.value)\n\n      case 'ProfileHasTooManyKeys':\n        throw new errors.ProfileHasTooManyKeys(data.maxKeys)\n\n      case 'ProfileCannotBeEmpty':\n        throw new errors.ProfileCannotBeEmpty\n    }\n  }\n\n  throw e\n}\n\nconst _calculateSessionLengthMs = sessionLength => sessionLength && sessionLength * 60 * 60 * 1000\n\nconst _validateUsername = (username) => {\n  if (typeof username !== 'string') throw new errors.UsernameMustBeString\n  if (username.length === 0) throw new errors.UsernameCannotBeBlank\n}\n\nconst _validatePassword = (password) => {\n  if (typeof password !== 'string') throw new errors.PasswordMustBeString\n  if (password.length === 0) throw new errors.PasswordCannotBeBlank\n  if (password.length < MIN_PASSWORD_CHAR_LENGTH) throw new errors.PasswordTooShort(MIN_PASSWORD_CHAR_LENGTH)\n  if (password.length > MAX_PASSWORD_CHAR_LENGTH) throw new errors.PasswordTooLong(MAX_PASSWORD_CHAR_LENGTH)\n}\n\nconst _validateSignUpOrSignInInput = (params) => {\n  if (typeof params !== 'object') throw new errors.ParamsMustBeObject\n\n  if (!objectHasOwnProperty(params, 'username')) throw new errors.UsernameMissing\n  if (!objectHasOwnProperty(params, 'password')) throw new errors.PasswordMissing\n\n  _validateUsername(params.username)\n  _validatePassword(params.password)\n\n  if (objectHasOwnProperty(params, 'rememberMe') && !REMEMBER_ME_OPTIONS[params.rememberMe]) {\n    throw new errors.RememberMeValueNotValid(REMEMBER_ME_OPTIONS)\n  }\n\n  if (objectHasOwnProperty(params, 'sessionLength') && typeof params.sessionLength !== 'number') {\n    throw new errors.SessionLengthMustBeNumber\n  }\n}\n\nconst _generatePasswordToken = async (password, seed, passwordHashAlgo) => {\n  const passwordSalt = crypto.scrypt.generateSalt()\n  const passwordHash = await crypto.scrypt.hash(password, passwordSalt, passwordHashAlgo)\n\n  const passwordHkdfKey = await crypto.hkdf.importHkdfKeyFromString(passwordHash)\n\n  const passwordTokenSalt = crypto.hkdf.generateSalt()\n  const passwordToken = await crypto.hkdf.getPasswordToken(passwordHkdfKey, passwordTokenSalt)\n\n  const passwordBasedEncryptionKeySalt = crypto.hkdf.generateSalt()\n  const passwordBasedEncryptionKey = await crypto.aesGcm.getPasswordBasedEncryptionKey(\n    passwordHkdfKey, passwordBasedEncryptionKeySalt)\n\n  const passwordEncryptedSeed = await crypto.aesGcm.encrypt(passwordBasedEncryptionKey, seed)\n\n  const passwordSalts = {\n    passwordSalt: base64.encode(passwordSalt),\n    passwordTokenSalt: base64.encode(passwordTokenSalt)\n  }\n\n  const passwordBasedBackup = {\n    passwordBasedEncryptionKeySalt: base64.encode(passwordBasedEncryptionKeySalt),\n    passwordEncryptedSeed: base64.encode(passwordEncryptedSeed)\n  }\n\n  return {\n    passwordToken,\n    passwordSalts,\n    passwordBasedBackup\n  }\n}\n\nconst _generateKeys = async (seed) => {\n  const masterKey = await crypto.hkdf.importHkdfKey(seed)\n\n  const encryptionKeySalt = crypto.hkdf.generateSalt()\n  const hmacKeySalt = crypto.hkdf.generateSalt()\n  const keySalts = {\n    encryptionKeySalt: base64.encode(encryptionKeySalt),\n    hmacKeySalt: base64.encode(hmacKeySalt),\n  }\n\n  const ecdsaKeyData = await crypto.ecdsa.generateEcdsaKeyData(masterKey)\n  const ecdhKeyData = await crypto.ecdh.generateEcdhKeyData(masterKey, ecdsaKeyData.ecdsaPrivateKey)\n\n  delete ecdsaKeyData.ecdsaPrivateKey\n  delete ecdhKeyData.ecdhPrivateKey\n\n  const ecKeyData = {\n    ecdsaKeyData,\n    ecdhKeyData,\n  }\n\n  return { ecKeyData, keySalts }\n}\n\nconst _generateKeysAndSignUp = async (username, password, seed, passwordHashAlgo, email, profile, sessionLength) => {\n  const {\n    passwordToken,\n    passwordSalts,\n    passwordBasedBackup\n  } = await _generatePasswordToken(password, seed, passwordHashAlgo)\n\n  const { ecKeyData, keySalts } = await _generateKeys(seed)\n\n  try {\n    const session = await authApi.signUp(\n      username,\n      passwordToken,\n      ecKeyData,\n      passwordSalts,\n      keySalts,\n      email,\n      profile,\n      passwordBasedBackup,\n      sessionLength,\n    )\n    return session\n  } catch (e) {\n    _parseSessionLengthError(e)\n    _parseUserResponseError(e, username)\n  }\n}\n\nconst _validateProfile = (profile) => {\n  if (typeof profile !== 'object') throw new errors.ProfileMustBeObject\n\n  let keyExists = false\n  for (const key in profile) {\n    keyExists = true\n\n    const value = profile[key]\n    if (typeof value !== 'string') throw new errors.ProfileValueMustBeString(key, value)\n    if (!value) throw new errors.ProfileValueCannotBeBlank(key)\n  }\n\n  if (!keyExists) throw new errors.ProfileCannotBeEmpty\n}\n\nconst _validateSignUpInput = (params) => {\n  _validateSignUpOrSignInInput(params)\n\n  if (params.profile) _validateProfile(params.profile)\n  if (params.email && typeof params.email !== 'string') throw new errors.EmailNotValid\n}\n\nconst signUp = async (params) => {\n  try {\n    _validateSignUpInput(params)\n\n    const { password, profile, passwordHashAlgo, rememberMe = 'session' } = params\n\n    const username = params.username.toLowerCase()\n    const email = params.email && params.email.toLowerCase()\n\n    const appId = config.getAppId()\n    const seed = await crypto.generateSeed()\n\n    const sessionLength = _calculateSessionLengthMs(params.sessionLength)\n\n    const { sessionId, creationDate, expirationDate, userId, authToken } = await _generateKeysAndSignUp(username, password, seed, passwordHashAlgo, email, profile, sessionLength)\n    const session = { username, userId, sessionId, creationDate, expirationDate, authToken }\n\n    const seedString = base64.encode(seed)\n\n    localData.saveSeedString(rememberMe, appId, username, seedString)\n    localData.signInSession(rememberMe, username, sessionId, creationDate, expirationDate)\n\n    await _connectWebSocket(session, seedString, rememberMe)\n\n    return ws.buildUserResult({ username, userId, authToken, email, profile, userData: ws.userData })\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'UsernameMissing':\n      case 'UsernameAlreadyExists':\n      case 'UsernameCannotBeBlank':\n      case 'UsernameMustBeString':\n      case 'UsernameTooLong':\n      case 'PasswordMissing':\n      case 'PasswordCannotBeBlank':\n      case 'PasswordTooShort':\n      case 'PasswordTooLong':\n      case 'PasswordMustBeString':\n      case 'EmailNotValid':\n      case 'ProfileMustBeObject':\n      case 'ProfileCannotBeEmpty':\n      case 'ProfileHasTooManyKeys':\n      case 'ProfileKeyTooLong':\n      case 'ProfileValueMustBeString':\n      case 'ProfileValueCannotBeBlank':\n      case 'ProfileValueTooLong':\n      case 'RememberMeValueNotValid':\n      case 'SessionLengthMustBeNumber':\n      case 'SessionLengthTooShort':\n      case 'SessionLengthTooLong':\n      case 'TrialExceededLimit':\n      case 'AppIdNotSet':\n      case 'AppIdNotValid':\n      case 'DomainNotWhitelisted':\n      case 'UserAlreadySignedIn':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n\n  }\n}\n\nconst signOut = async () => {\n  try {\n    if (!ws.session.username) throw new errors.UserNotSignedIn\n\n    try {\n      await ws.signOut()\n    } catch (e) {\n      _parseGenericErrors(e)\n      throw e\n    }\n\n  } catch (e) {\n\n    switch (e.name) {\n      case 'UserNotSignedIn':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n  }\n}\n\nconst _getSeedStringFromPasswordBasedBackup = async (passwordHkdfKey, passwordBasedBackup) => {\n  const { passwordBasedEncryptionKeySalt, passwordEncryptedSeed } = passwordBasedBackup\n\n  const passwordBasedEncryptionKey = await crypto.aesGcm.getPasswordBasedEncryptionKey(\n    passwordHkdfKey, base64.decode(passwordBasedEncryptionKeySalt))\n\n  const seedFromBackup = await crypto.aesGcm.decrypt(passwordBasedEncryptionKey, base64.decode(passwordEncryptedSeed))\n  const seedStringFromBackup = base64.encode(seedFromBackup)\n\n  return seedStringFromBackup\n}\n\nconst _signInWrapper = async (username, passwordToken, sessionLength) => {\n  try {\n    const apiSignInResult = await authApi.signIn(username, passwordToken, sessionLength)\n    return apiSignInResult\n  } catch (e) {\n    _parseGenericErrors(e)\n    _parseGenericUsernamePasswordError(e)\n    _parseSessionLengthError(e)\n\n    if (e.response && e.response.data === 'Invalid password') {\n      throw new errors.UsernameOrPasswordMismatch\n    } else if (e.response && e.response.data === 'User pending deletion') {\n      throw new errors.UserPendingDeletion\n    }\n\n    throw e\n  }\n}\n\nconst _getPasswordSaltsOverRestEndpoint = async (username) => {\n  try {\n    const passwordSalts = await authApi.getPasswordSalts(username)\n    return passwordSalts\n  } catch (e) {\n    _parseGenericErrors(e)\n    _parseGenericUsernamePasswordError(e)\n\n    if (e.response && e.response.data === 'User not found') {\n      throw new errors.UsernameOrPasswordMismatch\n    }\n\n    throw e\n  }\n}\n\nconst _getPasswordSaltsOverWebSocket = async () => {\n  try {\n    const action = 'GetPasswordSalts'\n    const passwordSaltsResponse = await ws.request(action)\n    return passwordSaltsResponse.data\n  } catch (e) {\n    _parseGenericErrors(e)\n    throw e\n  }\n}\n\nconst _rebuildPasswordToken = async (password, passwordSalts, passwordHashAlgo) => {\n  const { passwordSalt, passwordTokenSalt } = passwordSalts\n\n  const passwordHash = await crypto.scrypt.hash(password, new Uint8Array(base64.decode(passwordSalt)), passwordHashAlgo)\n  const passwordHkdfKey = await crypto.hkdf.importHkdfKeyFromString(passwordHash)\n  const passwordToken = await crypto.hkdf.getPasswordToken(passwordHkdfKey, base64.decode(passwordTokenSalt))\n\n  return { passwordHkdfKey, passwordToken }\n}\n\nconst signIn = async (params) => {\n  try {\n    _validateSignUpOrSignInInput(params)\n\n    const username = params.username.toLowerCase()\n    const { password, passwordHashAlgo, rememberMe = 'session' } = params\n\n    const appId = config.getAppId()\n\n    const passwordSalts = await _getPasswordSaltsOverRestEndpoint(username)\n    const { passwordHkdfKey, passwordToken } = await _rebuildPasswordToken(password, passwordSalts, passwordHashAlgo)\n\n    const sessionLength = _calculateSessionLengthMs(params.sessionLength)\n\n    const apiSignInResult = await _signInWrapper(username, passwordToken, sessionLength)\n    const { userId, email, profile, passwordBasedBackup, protectedProfile, usedTempPassword, changePassword } = apiSignInResult\n    const session = {\n      ...apiSignInResult.session,\n      username,\n      userId,\n    }\n\n    let seedString\n    if (!changePassword) {\n      const savedSeedString = localData.getSeedString(appId, username)\n\n      let seedStringFromBackup\n      if (!savedSeedString && usedTempPassword) {\n        throw new errors.KeyNotFound(KEY_NOT_FOUND_ON_SIGN_IN)\n      } else if (!usedTempPassword) {\n        // always use seed from backup in case it's changed and local copy is out of date\n        seedStringFromBackup = await _getSeedStringFromPasswordBasedBackup(passwordHkdfKey, passwordBasedBackup)\n        localData.saveSeedString(rememberMe, appId, username, seedStringFromBackup)\n      }\n\n      seedString = seedStringFromBackup || savedSeedString\n    }\n\n    localData.signInSession(rememberMe, username, session.sessionId, session.creationDate, session.expirationDate)\n\n    try {\n      await _connectWebSocket(session, seedString, rememberMe, changePassword)\n    } catch (e) {\n      if (usedTempPassword && e.message === 'Invalid seed') throw new errors.KeyNotFound(KEY_NOT_FOUND_ON_SIGN_IN)\n      throw e\n    }\n\n    return ws.buildUserResult({\n      username, userId, authToken: session.authToken, email,\n      profile, protectedProfile, usedTempPassword, changePassword, userData: ws.userData\n    })\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'UsernameMissing':\n      case 'UsernameOrPasswordMismatch':\n      case 'UserPendingDeletion':\n      case 'UsernameCannotBeBlank':\n      case 'UsernameTooLong':\n      case 'UsernameMustBeString':\n      case 'PasswordMissing':\n      case 'PasswordCannotBeBlank':\n      case 'PasswordTooShort':\n      case 'PasswordTooLong':\n      case 'PasswordMustBeString':\n      case 'PasswordAttemptLimitExceeded':\n      case 'RememberMeValueNotValid':\n      case 'SessionLengthMustBeNumber':\n      case 'SessionLengthTooShort':\n      case 'SessionLengthTooLong':\n      case 'KeyNotFound':\n      case 'AppIdNotSet':\n      case 'AppIdNotValid':\n      case 'DomainNotWhitelisted':\n      case 'UserAlreadySignedIn':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n\n  }\n}\n\nconst init = async (params) => {\n  try {\n    if (!window.crypto.subtle) throw new errors.WebCryptoUnavailable\n\n    if (typeof params !== 'object') throw new errors.ParamsMustBeObject\n\n    if (!objectHasOwnProperty(params, 'appId')) throw new errors.AppIdMissing\n    if (typeof params.appId !== 'string') throw new errors.AppIdMustBeString\n    if (params.appId.length === 0) throw new errors.AppIdCannotBeBlank\n\n    if (objectHasOwnProperty(params, 'updateUserHandler') && typeof params.updateUserHandler !== 'function') {\n      throw new errors.UpdateUserHandlerMustBeFunction\n    }\n\n    if (objectHasOwnProperty(params, 'sessionLength') && typeof params.sessionLength !== 'number') {\n      throw new errors.SessionLengthMustBeNumber\n    }\n\n    if (objectHasOwnProperty(params, 'allowServerSideEncryption') && typeof params.allowServerSideEncryption !== 'boolean') {\n      throw new errors.AllowServerSideEncryptionMustBeBoolean\n    }\n\n    config.configure(params)\n\n    const session = await signInWithSession(params.appId, _calculateSessionLengthMs(params.sessionLength))\n    return session\n  } catch (e) {\n\n    switch (e.name) {\n      case 'WebCryptoUnavailable':\n      case 'ParamsMustBeObject':\n      case 'AppIdMissing':\n      case 'AppIdAlreadySet':\n      case 'AppIdMustBeString':\n      case 'AppIdCannotBeBlank':\n      case 'AppIdNotValid':\n      case 'DomainNotWhitelisted':\n      case 'UpdateUserHandlerMustBeFunction':\n      case 'SessionLengthMustBeNumber':\n      case 'SessionLengthTooShort':\n      case 'SessionLengthTooLong':\n      case 'AllowServerSideEncryptionMustBeBoolean':\n      case 'UserAlreadySignedIn':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n\n  }\n}\n\nconst signInWithSession = async (appId, sessionLength) => {\n  let lastUsedUsername\n  try {\n    const currentSession = localData.getCurrentSession()\n    if (!currentSession) return {}\n\n    const { signedIn, sessionId, creationDate, expirationDate, rememberMe } = currentSession\n    lastUsedUsername = currentSession.username\n    const savedSeedString = localData.getSeedString(appId, lastUsedUsername)\n\n    if (!signedIn || !savedSeedString || new Date() > new Date(expirationDate)) {\n      return { lastUsedUsername }\n    }\n\n    let apiSignInWithSessionResult\n    try {\n      apiSignInWithSessionResult = await authApi.signInWithSession(sessionId, sessionLength)\n    } catch (e) {\n      _parseGenericErrors(e)\n      _parseSessionLengthError(e)\n\n      if (e.response && e.response.data === 'Session invalid') {\n        return { lastUsedUsername }\n      }\n\n      throw e\n    }\n    const { userId, authToken, username, email, profile, protectedProfile } = apiSignInWithSessionResult\n\n    // overwrite local data if username has been changed on server\n    if (username !== lastUsedUsername) {\n      localData.saveSeedString(rememberMe, appId, username, savedSeedString)\n      localData.removeSeedString(appId, lastUsedUsername)\n    }\n\n    // expirationDate should have been extended\n    localData.signInSession(rememberMe, username, sessionId, creationDate, apiSignInWithSessionResult.expirationDate)\n\n    // enable idempotent calls to init()\n    if (ws.connectionResolved) {\n      if (ws.session.sessionId === sessionId) {\n        return { user: ws.buildUserResult({ username, userId, authToken: ws.session.authToken, email, profile, protectedProfile, userData: ws.userData }) }\n      } else {\n        throw new errors.UserAlreadySignedIn(ws.session.username)\n      }\n    }\n\n    const session = { ...currentSession, username, userId, authToken }\n    await _connectWebSocket(session, savedSeedString, rememberMe)\n\n    return { user: ws.buildUserResult({ username, userId, authToken, email, profile, protectedProfile, userData: ws.userData }) }\n  } catch (e) {\n    if (e.message === 'Invalid seed') return { lastUsedUsername }\n    _parseGenericErrors(e)\n    throw e\n  }\n}\n\nconst _validateUpdatedUserInput = (params) => {\n  if (!objectHasOwnProperty(params, 'username')\n    && !objectHasOwnProperty(params, 'newPassword')\n    && !objectHasOwnProperty(params, 'email')\n    && !objectHasOwnProperty(params, 'profile')\n  ) {\n    throw new errors.ParamsMissing\n  }\n\n  const { username, currentPassword, newPassword, email, profile } = params\n\n  if (objectHasOwnProperty(params, 'username')) _validateUsername(username)\n  if (objectHasOwnProperty(params, 'newPassword')) {\n    if (!objectHasOwnProperty(params, 'currentPassword')) throw new errors.CurrentPasswordMissing\n\n    _validatePassword(currentPassword)\n    _validatePassword(newPassword)\n  }\n\n  // if email or profile are falsey, will be set to false\n  if (email && typeof email !== 'string') throw new errors.EmailNotValid\n  if (profile) _validateProfile(profile)\n}\n\nconst _buildUpdateUserParams = async (params, newSeed) => {\n  if (params.username) params.username = params.username.toLowerCase()\n\n  if (params.newPassword) {\n    const [currentPasswordSalts, newPasswordPromise, newKeyData] = await Promise.all([\n      _getPasswordSaltsOverWebSocket(),\n      _generatePasswordToken(params.newPassword, newSeed || base64.decode(ws.seedString)),\n      newSeed && _generateKeys(newSeed)\n    ])\n\n    // current password\n    const { passwordToken } = await _rebuildPasswordToken(params.currentPassword, currentPasswordSalts, params.passwordHashAlgo)\n    params.currentPasswordToken = passwordToken\n    delete params.currentPassword\n\n    // new password\n    params.passwordToken = newPasswordPromise.passwordToken\n    params.passwordSalts = newPasswordPromise.passwordSalts\n    params.passwordBasedBackup = newPasswordPromise.passwordBasedBackup\n    delete params.newPassword\n\n    if (newKeyData) params.newKeyData = newKeyData\n  }\n\n  if (params.email) params.email = params.email.toLowerCase()\n  else if (objectHasOwnProperty(params, 'email')) params.email = false // marks email for deletion\n\n  if (!params.profile && objectHasOwnProperty(params, 'profile')) params.profile = false // marks profile for deletion\n\n  return params\n}\n\nconst updateUser = async (params) => {\n  try {\n    if (typeof params !== 'object') throw new errors.ParamsMustBeObject\n\n    _validateUpdatedUserInput(params)\n\n    if (ws.reconnecting) throw new errors.Reconnecting\n    if (!ws.connectionResolved) throw new errors.UserNotSignedIn\n    const startingUserId = ws.session.userId\n\n    // need to generate new seed to rotate keys if user signed in with temp password to delete private data\n    const newSeed = params.newPassword && !ws.keys.init && ws.changePassword && await crypto.generateSeed()\n\n    const action = 'UpdateUser'\n    const finalParams = await _buildUpdateUserParams({ ...params }, newSeed)\n\n    if (ws.reconnecting) throw new errors.Reconnecting\n    if (!ws.connectionResolved) throw new errors.UserNotSignedIn\n\n    // ensures same user still attempting to update\n    if (!ws.session || startingUserId !== ws.session.userId) throw new errors.ServiceUnavailable\n\n    try {\n      if (finalParams.username) {\n        localData.saveSeedString(ws.rememberMe, config.getAppId(), finalParams.username, ws.seedString)\n      }\n\n      const response = await ws.request(action, finalParams)\n      const updatedUser = response.data.updatedUser\n      ws.handleUpdateUser(updatedUser)\n\n      // must have rotated keys successfully\n      if (newSeed && ws.session && startingUserId === ws.session.userId) {\n        const newSeedString = base64.encode(newSeed)\n        await ws.rotateKeys(newSeedString, finalParams.newKeyData)\n        localData.saveSeedString(ws.rememberMe, config.getAppId(), updatedUser.username, newSeedString)\n\n        const { sessionId, creationDate, expirationDate } = ws.session\n        localData.signInSession(ws.rememberMe, updatedUser.username, sessionId, creationDate, expirationDate)\n      }\n    } catch (e) {\n      _parseUserResponseError(e, finalParams.username)\n    }\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'ParamsMissing':\n      case 'UsernameAlreadyExists':\n      case 'UsernameMustBeString':\n      case 'UsernameCannotBeBlank':\n      case 'UsernameTooLong':\n      case 'CurrentPasswordMissing':\n      case 'CurrentPasswordIncorrect':\n      case 'PasswordAttemptLimitExceeded':\n      case 'PasswordMustBeString':\n      case 'PasswordCannotBeBlank':\n      case 'PasswordTooShort':\n      case 'PasswordTooLong':\n      case 'EmailNotValid':\n      case 'ProfileMustBeObject':\n      case 'ProfileCannotBeEmpty':\n      case 'ProfileHasTooManyKeys':\n      case 'ProfileKeyTooLong':\n      case 'ProfileValueMustBeString':\n      case 'ProfileValueCannotBeBlank':\n      case 'ProfileValueTooLong':\n      case 'AppIdNotSet':\n      case 'AppIdNotValid':\n      case 'UserNotFound':\n      case 'UserNotSignedIn':\n      case 'TooManyRequests':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n\n  }\n}\n\nconst deleteUser = async () => {\n  try {\n    _checkSignedInState()\n\n    const username = ws.session.username\n    localData.removeSeedString(config.getAppId(), username)\n    localData.removeCurrentSession()\n\n    try {\n      const action = 'DeleteUser'\n      await ws.request(action)\n    } catch (e) {\n      _parseGenericErrors(e)\n      throw e\n    }\n\n    ws.close()\n\n  } catch (e) {\n\n    switch (e.name) {\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'UserNotFound':\n      case 'TooManyRequests':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n\n  }\n}\n\nconst _getMasterKeyAndKeyNotFoundMessage = async (appId, username) => {\n  const seedString = localData.getSeedString(appId, username)\n  if (!seedString) throw new errors.KeyNotFound(KEY_NOT_FOUND_ON_FORGOT_PASSWORD)\n  const seed = base64.decode(seedString)\n  const masterKey = await crypto.hkdf.importHkdfKey(seed)\n  return masterKey\n}\n\nconst forgotPassword = async (params) => {\n  try {\n    if (typeof params !== 'object') throw new errors.ParamsMustBeObject\n    if (objectHasOwnProperty(params, 'deleteEndToEndEncryptedData') && typeof params.deleteEndToEndEncryptedData !== 'boolean') {\n      throw new errors.DeleteEndToEndEncryptedDataMustBeBoolean\n    }\n    if (!objectHasOwnProperty(params, 'username')) throw new errors.UsernameMissing\n\n    _validateUsername(params.username)\n    const username = params.username.toLowerCase()\n\n    const appId = config.getAppId()\n\n    const url = `${getWsUrl(config.getEndpoint())}/api/auth/forgot-password?appId=${appId}&username=${encodeURIComponent(username)}&userbaseJsVersion=${config.USERBASE_JS_VERSION}`\n    const forgotPasswordWs = new WebSocket(url + (objectHasOwnProperty(params, 'deleteEndToEndEncryptedData')\n      ? `&deleteEndToEndEncryptedData=${params.deleteEndToEndEncryptedData}` : ''))\n\n    await new Promise((resolve, reject) => {\n      setTimeout(() => reject(new errors.Timeout), 15000)\n\n      forgotPasswordWs.onerror = () => reject(new errors.ServiceUnavailable)\n\n      forgotPasswordWs.onmessage = async (e) => {\n        try {\n          const message = JSON.parse(e.data)\n\n          switch (message.route) {\n\n            // users created with userbase-js < v2.0.0 that have not signed in yet will need to prove access to DH key by decrypting token\n            case 'ReceiveEncryptedToken': {\n              const masterKey = await _getMasterKeyAndKeyNotFoundMessage(appId, username)\n\n              // if client decrypts encrypted token successfully, proves to server it has the user's key\n              const encryptedForgotPasswordToken = new Uint8Array(message.encryptedForgotPasswordToken.data)\n\n              const dhPrivateKey = await crypto.diffieHellman.importKeyFromMaster(masterKey, base64.decode(message.dhKeySalt))\n              const sharedKey = await crypto.diffieHellman.getSharedKeyWithServer(dhPrivateKey)\n\n              let forgotPasswordToken\n              try {\n                // if it fails to decrypt, it's almost certainly because key is incorrect\n                forgotPasswordToken = base64.encode(await crypto.aesGcm.decrypt(sharedKey, encryptedForgotPasswordToken))\n              } catch {\n                throw new errors.KeyNotFound(KEY_NOT_FOUND_ON_FORGOT_PASSWORD)\n              }\n\n              forgotPasswordWs.send(JSON.stringify({\n                action: 'ForgotPassword',\n                params: { forgotPasswordToken }\n              }))\n\n              break\n            }\n\n            // users signed in with userbase-js >= v2.0.1 will need to prove access to ECDSA key by signing token\n            case 'ReceiveToken': {\n              const masterKey = await _getMasterKeyAndKeyNotFoundMessage(appId, username)\n\n              const {\n                ecdsaKeyEncryptionKeySalt,\n                encryptedEcdsaPrivateKey,\n                forgotPasswordToken,\n              } = message\n\n              const ecdsaKeyEncryptionKey = await crypto.ecdsa.importEcdsaKeyEncryptionKeyFromMaster(masterKey, base64.decode(ecdsaKeyEncryptionKeySalt))\n\n              let ecdsaPrivateKey\n              try {\n                // if it fails to decrypt, it's almost certainly because key is incorrect\n                const rawEcdsaPrivateKey = await crypto.aesGcm.decrypt(ecdsaKeyEncryptionKey, base64.decode(encryptedEcdsaPrivateKey))\n                ecdsaPrivateKey = await crypto.ecdsa.getPrivateKeyFromRawPrivateKey(rawEcdsaPrivateKey)\n              } catch {\n                throw new errors.KeyNotFound(KEY_NOT_FOUND_ON_FORGOT_PASSWORD)\n              }\n\n              const signedForgotPasswordToken = base64.encode(await crypto.ecdsa.sign(ecdsaPrivateKey, base64.decode(forgotPasswordToken)))\n\n              forgotPasswordWs.send(JSON.stringify({\n                action: 'ForgotPassword',\n                params: { signedForgotPasswordToken }\n              }))\n\n              break\n            }\n\n            case 'SuccessfullyForgotPassword': {\n              // server has sent the email\n              resolve()\n              break\n            }\n\n            case 'Error': {\n              const data = message.data\n\n              switch (data.name) {\n                case 'UsernameTooLong': throw new errors.UsernameTooLong(data.maxLen)\n                case 'AppIdNotValid': throw new errors.AppIdNotValid\n                case 'UserNotFound': throw new errors.UserNotFound\n                case 'UserEmailNotFound': throw new errors.UserEmailNotFound\n\n                default: {\n                  if (message.status === statusCodes['Internal Server Error']) throw new errors.ServiceUnavailable\n                  else throw new errors.UnknownServiceUnavailable(data)\n                }\n              }\n            }\n\n            case 'Ping': {\n              // ignore -- websocket connection should only exist for the life of the forgot password request\n              break\n            }\n\n            default:\n              reject(new Error(`Received unknown message from userbase-server: ${e.data}`))\n          }\n        } catch (e) {\n          reject(e)\n        }\n      }\n    })\n\n    forgotPasswordWs.close()\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'UsernameMissing':\n      case 'UsernameMustBeString':\n      case 'UsernameCannotBeBlank':\n      case 'UsernameTooLong':\n      case 'AppIdNotSet':\n      case 'AppIdNotValid':\n      case 'KeyNotFound':\n      case 'UserNotFound':\n      case 'UserEmailNotFound':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n\n    }\n  }\n}\n\nexport default {\n  signUp,\n  signOut,\n  signIn,\n  init,\n  updateUser,\n  deleteUser,\n  forgotPassword,\n}\n","import uuidv4 from 'uuid/v4'\nimport SortedArray from 'sorted-array'\nimport base64 from 'base64-arraybuffer'\nimport crypto from './Crypto'\nimport ws from './ws'\nimport errors from './errors'\nimport statusCodes from './statusCodes'\nimport { byteSizeOfString, Queue, objectHasOwnProperty } from './utils'\nimport { appendBuffer, arrayBufferToString, stringToArrayBuffer } from './Crypto/utils'\nimport authApi from './api/auth'\nimport config from './config'\n\nconst success = 'Success'\n\nconst MAX_DB_NAME_CHAR_LENGTH = 100\nconst MAX_ITEM_ID_CHAR_LENGTH = 100\n\nconst MAX_ITEM_KB = 10\nconst TEN_KB = MAX_ITEM_KB * 1024\nconst MAX_ITEM_BYTES = TEN_KB\n\nconst UUID_CHAR_LENGTH = 36\n\nconst FILE_CHUNK_SIZE = 1024 * 512 // 512kb\nconst FILE_CHUNKS_PER_BATCH = 10\n\nconst VERIFIED_USERS_DATABASE_NAME = '__userbase_verified_users'\n\nconst ENCRYPTION_MODE_OPTIONS = {\n  'end-to-end': true,\n  'server-side': true\n}\n\nconst TX_TIMEOUT = 30 * 1000\n\nconst _checkSignedInState = () => {\n  if (ws.reconnecting) throw new errors.Reconnecting\n  if (!ws.keys.init && ws.changePassword) throw new errors.UserMustChangePassword\n  if (!ws.keys.init || !ENCRYPTION_MODE_OPTIONS[ws.encryptionMode]) throw new errors.UserNotSignedIn\n}\n\nconst _parseGenericErrors = (e) => {\n  if (e.response) {\n    if (e.response.data === 'UserNotFound') {\n      throw new errors.UserNotFound\n    } else if (e.response.status === statusCodes['Internal Server Error']) {\n      throw new errors.InternalServerError\n    } else if (e.response.status === statusCodes['Gateway Timeout']) {\n      throw new errors.Timeout\n    }\n  } else if (e.message && e.message.indexOf('timeout') !== -1) {\n    throw new errors.Timeout\n  }\n}\n\nclass UnverifiedTransaction {\n  constructor(startSeqNo) {\n    this.startSeqNo = startSeqNo\n    this.txSeqNo = null\n    this.transactions = {}\n    this.promiseResolve = null\n    this.promiseReject = null\n    this.index = null\n  }\n\n  getStartSeqNo() {\n    return this.startSeqNo\n  }\n\n  getIndex() {\n    return this.index\n  }\n\n  setIndex(index) {\n    this.index = index\n  }\n\n  async getResult(seqNo) {\n    this.txSeqNo = seqNo\n\n    const promise = new Promise((resolve, reject) => {\n      this.promiseResolve = resolve\n      this.promiseReject = reject\n\n      setTimeout(() => { reject(new Error('timeout')) }, TX_TIMEOUT)\n    })\n\n    this.verifyPromise()\n\n    return promise\n  }\n\n  verifyPromise() {\n    if (!this.txSeqNo && this.txSeqNo != 0) {\n      return\n    }\n\n    if (!this.promiseResolve || !this.promiseReject) {\n      return\n    }\n\n    if (this.transactions[this.txSeqNo]) {\n      if (this.transactions[this.txSeqNo] == 'Success') {\n        this.promiseResolve()\n      } else {\n        this.promiseReject(this.transactions[this.txSeqNo])\n      }\n    }\n  }\n\n  addTransaction(transaction, code) {\n    if (this.transactions[transaction.seqNo]) return\n    this.transactions[transaction.seqNo] = code\n    this.verifyPromise()\n  }\n}\n\nclass Database {\n  constructor(changeHandler, receivedMessage, shareTokenId, shareTokenHkdfKey) {\n    this.onChange = _setChangeHandler(changeHandler)\n\n    this.items = {}\n    this.itemsPlaintextMetadata = {}\n    this.fileIds = {}\n\n    const compareItems = (a, b) => {\n      if (a.seqNo < b.seqNo || (a.seqNo === b.seqNo && a.operationIndex < b.operationIndex)) {\n        return -1\n      }\n      if (a.seqNo > b.seqNo || (a.seqNo === b.seqNo && a.operationIndex > b.operationIndex)) {\n        return 1\n      }\n      return 0\n    }\n\n    this.itemsIndex = new SortedArray([], compareItems)\n    this.unverifiedTransactions = []\n    this.lastSeqNo = 0\n    this.init = false\n    this.dbKey = null\n    this.receivedMessage = receivedMessage\n    this.usernamesByUserId = new Map()\n    this.attributionEnabled = false\n\n    this.shareTokenId = shareTokenId\n    this.shareTokenHkdfKey = shareTokenHkdfKey\n\n    // Queue that ensures 'ApplyTransactions' executes one at a time\n    this.applyTransactionsQueue = new Queue()\n\n    this.bundleChunks = {}\n  }\n\n  async applyTransactions(transactions, ownerId, dbId, dbNameHash) {\n    for (let i = 0; i < transactions.length; i++) {\n      const transaction = transactions[i]\n      const seqNo = transaction.seqNo\n\n      // client must only apply transcations in sequence\n      if (seqNo !== this.lastSeqNo + 1) {\n        console.warn(`Client attempted to apply transaction with seq no ${seqNo} when last seq no is ${this.lastSeqNo}`)\n        continue\n      }\n\n      const transactionCode = await this.applyTransaction(this.dbKey, transaction, ownerId)\n      this.lastSeqNo = seqNo\n\n      for (let j = 0; j < this.unverifiedTransactions.length; j++) {\n        if (!this.unverifiedTransactions[j] || seqNo < this.unverifiedTransactions[j].getStartSeqNo()) {\n          continue\n        }\n        this.unverifiedTransactions[j].addTransaction(transactions[i], transactionCode)\n      }\n\n      if (this.init && transactionCode === 'Success') {\n        this.onChange(this.getItems())\n      }\n    }\n\n    if (!this.init) {\n      this.init = true // allows triggers and loaders to be called from within client's changeHandler on database load\n      this.dbId = dbId\n      this.dbNameHash = dbNameHash\n      this.onChange(this.getItems())\n      this.receivedMessage() // wait to resolve openDatabase() until changeHandler has received all data\n    }\n  }\n\n  async applyBundle(bundle, bundleSeqNo) {\n    // client must only apply bundle when opening state\n    if (this.lastSeqNo !== 0) {\n      console.warn(`Client attempted to apply bundle when last seq no is ${this.lastSeqNo}`)\n      return\n    }\n\n    for (let i = 0; i < bundle.itemsIndex.length; i++) {\n      const itemIndex = bundle.itemsIndex[i]\n      const itemId = bundle.itemsIndex[i].itemId\n      const item = bundle.items[i]\n      const itemsPlaintextMetadata = bundle.itemsPlaintextMetadata[i]\n\n      if (item.file && item.file.fileEncryptionKeyString) {\n        item.file.fileEncryptionKey = await crypto.aesGcm.getKeyFromKeyString(item.file.fileEncryptionKeyString)\n        this.fileIds[item.file.fileId] = itemId\n      }\n\n      this.items[itemId] = item\n      this.itemsPlaintextMetadata[itemId] = itemsPlaintextMetadata\n      this.itemsIndex.insert(itemIndex)\n    }\n\n    this.lastSeqNo = bundleSeqNo\n  }\n\n  async applyTransaction(key, transaction, ownerId) {\n    const seqNo = transaction.seqNo\n    const command = transaction.command\n\n    switch (command) {\n      case 'Insert': {\n        try {\n          const record = await crypto.aesGcm.decryptJson(key, transaction.record)\n          const itemId = record.id\n          const item = record.item\n          const createdBy = this.attributionFromTransaction(transaction)\n          const writeAccess = transaction.writeAccess\n\n          this.validateInsert(itemId)\n          return this.applyInsert(itemId, seqNo, item, createdBy, writeAccess)\n        } catch (transactionCode) {\n          return transactionCode\n        }\n      }\n\n      case 'Update': {\n        try {\n          const record = await crypto.aesGcm.decryptJson(key, transaction.record)\n          const itemId = record.id\n          const item = record.item\n          const updatedBy = this.attributionFromTransaction(transaction)\n          const __v = record.__v\n          const writeAccess = transaction.writeAccess\n\n          this.validateUpdate(itemId, __v, updatedBy, ownerId, writeAccess, 'updateItem')\n          return this.applyUpdate(itemId, item, __v, updatedBy, writeAccess)\n        } catch (transactionCode) {\n          return transactionCode\n        }\n      }\n\n      case 'Delete': {\n        try {\n          const record = await crypto.aesGcm.decryptJson(key, transaction.record)\n          const itemId = record.id\n          const deletedBy = this.attributionFromTransaction(transaction)\n          const __v = record.__v\n\n          this.validateUpdateOrDelete(itemId, __v, deletedBy, ownerId, 'deleteItem')\n          return this.applyDelete(itemId)\n        } catch (transactionCode) {\n          return transactionCode\n        }\n      }\n\n      case 'BatchTransaction': {\n        try {\n          const batch = transaction.operations\n          const attribution = this.attributionFromTransaction(transaction)\n          const recordPromises = []\n\n          for (const operation of batch) {\n            recordPromises.push(operation.record && crypto.aesGcm.decryptJson(key, operation.record))\n          }\n          const records = await Promise.all(recordPromises)\n\n          this.validateBatchTransaction(batch, records, attribution, ownerId)\n          return this.applyBatchTransaction(seqNo, batch, records, attribution)\n        } catch (transactionCode) {\n          return transactionCode\n        }\n      }\n\n      case 'UploadFile': {\n        try {\n          const fileEncryptionKeyRaw = await crypto.aesGcm.decrypt(key, base64.decode(transaction.fileEncryptionKey))\n          const fileEncryptionKey = await crypto.aesGcm.getKeyFromRawKey(fileEncryptionKeyRaw)\n          const fileEncryptionKeyString = await crypto.aesGcm.getKeyStringFromKey(fileEncryptionKey)\n          const fileMetadata = await crypto.aesGcm.decryptJson(fileEncryptionKey, transaction.fileMetadata)\n\n          const itemId = fileMetadata.itemId\n          const fileVersion = fileMetadata.__v\n          const { fileName, fileSize, fileType } = fileMetadata\n          const fileId = transaction.fileId\n          const fileUploadedBy = this.attributionFromTransaction(transaction)\n\n          this.validateUploadFile(itemId, fileVersion, fileUploadedBy, ownerId, 'uploadFile')\n          return this.applyUploadFile(itemId, fileUploadedBy, fileVersion, fileEncryptionKey, fileEncryptionKeyString, fileName, fileId, fileSize, fileType)\n        } catch (transactionCode) {\n          return transactionCode\n        }\n      }\n\n      case 'Rollback': {\n        // no-op\n        return\n      }\n\n      default: {\n        console.warn(`Unknown command: ${command}`)\n        return\n      }\n    }\n  }\n\n  attributionFromTransaction(transaction) {\n    if (!this.attributionEnabled) return undefined\n    return {\n      timestamp: transaction.timestamp,\n      userId: transaction.userId,\n    }\n  }\n\n  validateInsert(itemId) {\n    if (this.items[itemId]) {\n      throw new errors.ItemAlreadyExists\n    }\n  }\n\n  validateUpdate(itemId, __v, updatedBy, ownerId, writeAccess, command) {\n    this.validateUpdateOrDelete(itemId, __v, updatedBy, ownerId, command)\n\n    // writeAccess can only be set or removed by either the item creator or database owner\n    const { createdBy } = this.itemsPlaintextMetadata[itemId]\n\n    if (writeAccess || writeAccess === false) {\n      if (!createdBy) return // if no attribution on item set, can't set write access\n      const createdByUserId = createdBy.userId\n      const updatedByUserId = updatedBy.userId\n\n      if (createdByUserId !== updatedByUserId && updatedByUserId !== ownerId) {\n        throw new errors.WriteAccessParamNotAllowed\n      }\n    }\n  }\n\n  validateUpdateOrDelete(itemId, __v, attribution, ownerId, command) {\n    const item = this.items[itemId]\n    if (!item) throw new errors.ItemDoesNotExist\n\n    const currentVersion = this.getItemVersionNumber(itemId)\n    if (__v <= currentVersion) {\n      throw new errors.ItemUpdateConflict\n    }\n\n    this.validateAccessPermissions(itemId, attribution, ownerId, command)\n  }\n\n  validateUploadFile(itemId, __v, fileUploadedBy, ownerId, command) {\n    const item = this.items[itemId]\n    if (!item) throw new errors.ItemDoesNotExist\n\n    const currentVersion = this.getFileVersionNumber(itemId)\n\n    if (__v <= currentVersion) {\n      throw new errors.FileUploadConflict\n    }\n\n    this.validateAccessPermissions(itemId, fileUploadedBy, ownerId, command)\n  }\n\n  validateAccessPermissions(itemId, attribution, ownerId, command) {\n    const { createdBy, writeAccess } = this.itemsPlaintextMetadata[itemId]\n    if (createdBy && attribution && writeAccess) {\n      const createdByUserId = createdBy.userId\n      const modifiedByUserId = attribution.userId\n\n      let userIsAuthorized = false\n      const { onlyCreator, users } = writeAccess\n\n      if (modifiedByUserId === ownerId || modifiedByUserId === createdByUserId) {\n        userIsAuthorized = true\n      } else if (!onlyCreator && users) {\n        for (const { userId } of users) {\n          userIsAuthorized = modifiedByUserId === userId\n          if (userIsAuthorized) break\n        }\n      }\n\n      if (!userIsAuthorized) throw new errors.TransactionUnauthorized(command)\n    }\n  }\n\n  itemExists(itemId) {\n    return objectHasOwnProperty(this.items, itemId)\n  }\n\n  applyInsert(itemId, seqNo, record, createdBy, writeAccess, operationIndex) {\n    const item = { seqNo }\n    if (typeof operationIndex === 'number') item.operationIndex = operationIndex\n\n    this.items[itemId] = {\n      ...item,\n      record,\n      __v: 0\n    }\n    this.itemsPlaintextMetadata[itemId] = {\n      createdBy,\n      writeAccess,\n    }\n    this.itemsIndex.insert({ ...item, itemId })\n\n    if (writeAccess && writeAccess.users) {\n      for (const { userId, username } of writeAccess.users) {\n        this.usernamesByUserId.set(userId, username)\n      }\n    }\n\n    return success\n  }\n\n  applyUpdate(itemId, record, __v, updatedBy, writeAccess) {\n    this.items[itemId].record = record\n    this.items[itemId].__v = __v\n\n    this.itemsPlaintextMetadata[itemId].updatedBy = updatedBy\n\n    if (writeAccess === false) {\n      delete this.itemsPlaintextMetadata[itemId].writeAccess\n    } else if (writeAccess) {\n      this.itemsPlaintextMetadata[itemId].writeAccess = writeAccess\n\n      if (writeAccess.users) {\n        for (const { userId, username } of writeAccess.users) {\n          this.usernamesByUserId.set(userId, username)\n        }\n      }\n    }\n\n    return success\n  }\n\n  applyUploadFile(itemId, fileUploadedBy, __v, fileEncryptionKey, fileEncryptionKeyString, fileName, fileId, fileSize, fileType) {\n    const existingFile = this.items[itemId].file\n    if (existingFile) delete this.fileIds[existingFile.fileId]\n\n    this.items[itemId].file = {\n      fileName,\n      fileId,\n      fileSize,\n      fileType,\n      fileEncryptionKey,\n      fileEncryptionKeyString,\n      __v,\n    }\n    this.itemsPlaintextMetadata[itemId].fileUploadedBy = fileUploadedBy\n    this.fileIds[fileId] = itemId\n    return success\n  }\n\n  applyDelete(itemId) {\n    this.itemsIndex.remove(this.items[itemId])\n    delete this.items[itemId]\n    delete this.itemsPlaintextMetadata[itemId]\n    return success\n  }\n\n  validateBatchTransaction(batch, records, attribution, ownerId) {\n    const uniqueItemIds = {}\n\n    for (let i = 0; i < batch.length; i++) {\n      const operation = batch[i]\n      const { command, writeAccess } = operation\n\n      const itemId = records[i].id\n      const __v = records[i].__v\n\n      if (uniqueItemIds[itemId]) throw new errors.OperationsConflict\n      uniqueItemIds[itemId] = true\n\n      switch (command) {\n        case 'Insert':\n          this.validateInsert(itemId)\n          break\n\n        case 'Update':\n          this.validateUpdate(itemId, __v, attribution, ownerId, writeAccess, command)\n          break\n\n        case 'Delete':\n          this.validateUpdateOrDelete(itemId, __v, attribution, ownerId, command)\n          break\n      }\n    }\n  }\n\n  applyBatchTransaction(seqNo, batch, records, attribution) {\n    for (let i = 0; i < batch.length; i++) {\n      const operation = batch[i]\n\n      const itemId = records[i].id\n      const item = records[i].item\n      const __v = records[i].__v\n      const writeAccess = operation.writeAccess\n\n      switch (operation.command) {\n        case 'Insert':\n          this.applyInsert(itemId, seqNo, item, attribution, writeAccess, i)\n          break\n\n        case 'Update':\n          this.applyUpdate(itemId, item, __v, attribution, writeAccess)\n          break\n\n        case 'Delete':\n          this.applyDelete(itemId, __v)\n          break\n      }\n    }\n\n    return success\n  }\n\n  registerUnverifiedTransaction() {\n    const unverifiedTransaction = new UnverifiedTransaction(this.lastSeqNo)\n    const i = this.unverifiedTransactions.push(unverifiedTransaction)\n    unverifiedTransaction.setIndex(i - 1)\n    return unverifiedTransaction\n  }\n\n  unregisterUnverifiedTransaction(pendingTransaction) {\n    delete this.unverifiedTransactions[pendingTransaction.getIndex()]\n  }\n\n  getItems() {\n    const result = []\n    for (let i = 0; i < this.itemsIndex.array.length; i++) {\n      const itemId = this.itemsIndex.array[i].itemId\n      const record = this.items[itemId].record\n      const item = { itemId, item: record }\n\n      // set file metadata\n      if (this.items[itemId].file) {\n        const { fileId, fileName, fileSize } = this.items[itemId].file\n        item.fileId = fileId\n        item.fileName = fileName\n        item.fileSize = fileSize\n      }\n\n      // set attribution metadata\n      for (const prop of ['createdBy', 'updatedBy', 'fileUploadedBy']) {\n        if (this.itemsPlaintextMetadata[itemId][prop]) {\n          const { timestamp, userId } = this.itemsPlaintextMetadata[itemId][prop]\n          const attribution = { timestamp }\n          const username = this.usernamesByUserId.get(userId)\n          if (username == null) {\n            attribution.userDeleted = true\n          } else {\n            attribution.username = username\n          }\n          item[prop] = attribution\n        }\n      }\n\n      // set write access permissions\n      if (this.itemsPlaintextMetadata[itemId].writeAccess) {\n        const { onlyCreator, users } = this.itemsPlaintextMetadata[itemId].writeAccess\n        const writeAccess = {}\n        if (onlyCreator) writeAccess.onlyCreator = onlyCreator\n\n        if (users) {\n          writeAccess.users = []\n          for (const { userId } of users) {\n            const username = this.usernamesByUserId.get(userId)\n            if (username) writeAccess.users.push({ username })\n          }\n        }\n\n        item.writeAccess = writeAccess\n      }\n\n      result.push(item)\n    }\n    return result\n  }\n\n  getItemVersionNumber(itemId) {\n    return this.items[itemId].__v\n  }\n\n  getFileVersionNumber(itemId) {\n    return this.items[itemId].file && this.items[itemId].file.__v\n  }\n\n  async decryptShareTokenEncryptedDbKey(shareTokenEncryptedDbKey, shareTokenEncryptionKeySalt) {\n    const shareTokenEncryptionKey = await crypto.aesGcm.importKeyFromMaster(this.shareTokenHkdfKey, base64.decode(shareTokenEncryptionKeySalt))\n    const dbKeyString = await crypto.aesGcm.decryptString(shareTokenEncryptionKey, shareTokenEncryptedDbKey)\n    return dbKeyString\n  }\n}\n\nconst _setChangeHandler = (changeHandler) => {\n  return (items) => {\n    try {\n      changeHandler(items)\n    } catch (e) {\n      console.error('There was an error in your changeHandler.\\n\\n', e)\n    }\n  }\n}\n\nconst _idempotentOpenDatabase = (database, changeHandler, receivedMessage) => {\n  // safe to replace -- enables idempotent calls to openDatabase\n  database.onChange = _setChangeHandler(changeHandler)\n\n  // if 1 call succeeds, all idempotent calls succeed\n  const currentReceivedMessage = database.receivedMessage\n  database.receivedMessage = () => {\n    currentReceivedMessage()\n    receivedMessage()\n  }\n\n  // database is already open, can return successfully\n  if (database.init) {\n    database.onChange(database.getItems())\n    database.receivedMessage()\n    return true\n  }\n\n  return false\n}\n\nconst _getShareTokenIdFromShareToken = (shareTokenArrayBuffer) => {\n  const shareTokenIdArrayBuffer = shareTokenArrayBuffer.slice(0, UUID_CHAR_LENGTH)\n  const shareTokenId = arrayBufferToString(shareTokenIdArrayBuffer, true)\n  if (!shareTokenId || shareTokenId.length !== UUID_CHAR_LENGTH) throw new errors.ShareTokenInvalid\n  return shareTokenId\n}\n\nconst _getShareTokenIdAndShareTokenSeed = (shareTokenResult) => {\n  const shareTokenArrayBuffer = base64.decode(shareTokenResult)\n  const shareTokenId = _getShareTokenIdFromShareToken(shareTokenArrayBuffer)\n  const shareTokenSeed = shareTokenArrayBuffer.slice(UUID_CHAR_LENGTH)\n  return { shareTokenId, shareTokenSeed }\n}\n\nconst _openDatabaseByShareToken = async (shareToken, changeHandler, receivedMessage) => {\n  let shareTokenIdAndShareTokenSeed, shareTokenHkdfKey\n  try {\n    shareTokenIdAndShareTokenSeed = _getShareTokenIdAndShareTokenSeed(shareToken)\n    shareTokenHkdfKey = await crypto.hkdf.importHkdfKey(shareTokenIdAndShareTokenSeed.shareTokenSeed)\n  } catch {\n    throw new errors.ShareTokenInvalid\n  }\n  const { shareTokenId } = shareTokenIdAndShareTokenSeed\n\n  const { databaseId, validationMessage, signedValidationMessage } = await ws.authenticateShareToken(shareTokenId, shareTokenHkdfKey)\n  ws.state.shareTokenIdToDbId[shareTokenId] = databaseId\n\n  await _openDatabaseByDatabaseId(databaseId, changeHandler, receivedMessage, shareTokenId, shareTokenHkdfKey, validationMessage, signedValidationMessage)\n}\n\nconst _openDatabaseByDatabaseId = async (databaseId, changeHandler, receivedMessage, shareTokenId, shareTokenHkdfKey, validationMessage, signedValidationMessage) => {\n  const database = ws.state.databasesByDbId[databaseId]\n\n  if (!database) {\n    ws.state.databasesByDbId[databaseId] = new Database(changeHandler, receivedMessage, shareTokenId, shareTokenHkdfKey)\n  } else {\n    if (_idempotentOpenDatabase(database, changeHandler, receivedMessage)) return\n  }\n\n  const action = 'OpenDatabaseByDatabaseId'\n  const params = { databaseId, validationMessage, signedValidationMessage }\n  await ws.request(action, params)\n}\n\nconst _openDatabaseByNameHash = async (dbNameHash, newDatabaseParams, changeHandler, receivedMessage) => {\n  const database = ws.state.databases[dbNameHash]\n\n  if (!database) {\n    ws.state.databases[dbNameHash] = new Database(changeHandler, receivedMessage)\n  } else {\n    if (_idempotentOpenDatabase(database, changeHandler, receivedMessage)) return\n  }\n\n  const action = 'OpenDatabase'\n  const params = { dbNameHash, newDatabaseParams }\n  await ws.request(action, params)\n}\n\nconst _openDatabase = async (changeHandler, params) => {\n  try {\n    let receivedMessage\n    let timeout\n    const firstMessageFromWebSocket = new Promise((resolve, reject) => {\n      receivedMessage = resolve\n      timeout = setTimeout(() => reject(new Error('timeout')), TX_TIMEOUT)\n    })\n\n    const { dbNameHash, newDatabaseParams, databaseId, shareToken } = params\n    try {\n\n      if (dbNameHash) await _openDatabaseByNameHash(dbNameHash, newDatabaseParams, changeHandler, receivedMessage)\n      else if (databaseId) await _openDatabaseByDatabaseId(databaseId, changeHandler, receivedMessage)\n      else if (shareToken) await _openDatabaseByShareToken(shareToken, changeHandler, receivedMessage)\n\n      await firstMessageFromWebSocket\n    } catch (e) {\n      clearTimeout(timeout)\n\n      if (e.response && e.response.data) {\n        const data = e.response.data\n\n        if (data === 'Database already creating') {\n          throw new errors.DatabaseAlreadyOpening\n        } else if (data === 'Database is owned by user') {\n          if (databaseId) throw new errors.DatabaseIdNotAllowedForOwnDatabase\n          else if (shareToken) throw new errors.ShareTokenNotAllowedForOwnDatabase\n        } else if (data === 'Database key not found' || data === 'Database not found') {\n          throw new errors.DatabaseNotFound\n        }\n\n        switch (data.name) {\n          case 'SubscriptionNotFound':\n            throw new errors.SubscriptionNotFound\n          case 'SubscriptionInactive':\n            throw new errors.SubscriptionInactive(data.subscriptionStatus)\n          case 'TrialExpired':\n            throw new errors.TrialExpired\n        }\n\n      }\n\n      throw e\n    }\n\n  } catch (e) {\n    _parseGenericErrors(e)\n    throw e\n  }\n}\n\nconst _createDatabase = async (dbName, encryptionMode) => {\n  const dbId = uuidv4()\n\n  const dbKey = await crypto.aesGcm.generateKey()\n  const dbKeyString = await crypto.aesGcm.getKeyStringFromKey(dbKey)\n\n  const [encryptedDbKey, encryptedDbName] = await Promise.all([\n    crypto.aesGcm.encryptString(ws.keys.encryptionKey, dbKeyString),\n    crypto.aesGcm.encryptString(dbKey, dbName)\n  ])\n\n  const newDatabaseParams = {\n    dbId,\n    encryptedDbKey,\n    encryptedDbName,\n    attribution: true,\n  }\n\n  if (encryptionMode === 'server-side') newDatabaseParams.plaintextDbKey = dbKeyString\n\n  // tie database to user's fingerprint at time of creation\n  newDatabaseParams.fingerprint = await _getMyFingerprint()\n\n  return newDatabaseParams\n}\n\nconst _validateEncryptionMode = (encryptionMode) => {\n  if (encryptionMode === 'server-side' && !config.isServerSideEncryptionModeAllowed()) {\n    throw new errors.ServerSideEncryptionNotEnabledInClient\n  }\n}\n\nconst _validateDbName = (dbName) => {\n  if (typeof dbName !== 'string') throw new errors.DatabaseNameMustBeString\n  if (dbName.length === 0) throw new errors.DatabaseNameCannotBeBlank\n  if (dbName.length > MAX_DB_NAME_CHAR_LENGTH) throw new errors.DatabaseNameTooLong(MAX_DB_NAME_CHAR_LENGTH)\n}\n\nconst _validateDbId = (dbId) => {\n  if (typeof dbId !== 'string') throw new errors.DatabaseIdMustBeString\n  if (dbId.length === 0) throw new errors.DatabaseIdCannotBeBlank\n  if (dbId.length !== UUID_CHAR_LENGTH) throw new errors.DatabaseIdInvalidLength(UUID_CHAR_LENGTH)\n}\n\nconst _validateDbInput = (params) => {\n  if (typeof params !== 'object') throw new errors.ParamsMustBeObject\n\n  if (objectHasOwnProperty(params, 'databaseName')) {\n\n    _validateDbName(params.databaseName)\n    if (objectHasOwnProperty(params, 'databaseId')) throw new errors.DatabaseIdNotAllowed\n    if (objectHasOwnProperty(params, 'shareToken')) throw new errors.ShareTokenNotAllowed\n\n    // try to block usage of verified users database. If user works around this and modifies this database,\n    // they could mess up the database for themself.\n    if (!params.allowVerifiedUsersDatabase && params.databaseName === VERIFIED_USERS_DATABASE_NAME) {\n      throw new errors.DatabaseNameRestricted(VERIFIED_USERS_DATABASE_NAME)\n    }\n\n  } else if (objectHasOwnProperty(params, 'databaseId')) {\n\n    _validateDbId(params.databaseId)\n    if (objectHasOwnProperty(params, 'shareToken')) throw new errors.ShareTokenNotAllowed\n\n  } else if (objectHasOwnProperty(params, 'shareToken')) {\n    if (typeof params.shareToken !== 'string') throw new errors.ShareTokenInvalid\n  } else {\n    throw new errors.DatabaseNameMissing\n  }\n\n  if (objectHasOwnProperty(params, 'encryptionMode') && !ENCRYPTION_MODE_OPTIONS[params.encryptionMode]) {\n    throw new errors.EncryptionModeNotValid(ENCRYPTION_MODE_OPTIONS)\n  }\n\n  _checkSignedInState()\n}\n\nconst openDatabase = async (params) => {\n  try {\n    _validateDbInput(params)\n    if (!objectHasOwnProperty(params, 'changeHandler')) throw new errors.ChangeHandlerMissing\n\n    const { databaseName, databaseId, shareToken, changeHandler, encryptionMode = ws.encryptionMode } = params\n\n    if (typeof changeHandler !== 'function') throw new errors.ChangeHandlerMustBeFunction\n    _validateEncryptionMode(encryptionMode)\n\n    if (databaseName) {\n      const dbNameHash = encryptionMode === 'server-side'\n        ? databaseName // Hashing is meant to keep it secret, no need to hash if encryption mode is server-side\n        : (ws.state.dbNameToHash[databaseName] || await crypto.hmac.signString(ws.keys.hmacKey, databaseName))\n\n      if (encryptionMode === 'end-to-end') ws.state.dbNameToHash[databaseName] = dbNameHash // eslint-disable-line require-atomic-updates\n\n      const newDatabaseParams = await _createDatabase(databaseName, encryptionMode)\n\n      const openByDbNameHashParams = { dbNameHash, newDatabaseParams }\n      await _openDatabase(changeHandler, openByDbNameHashParams)\n    } else if (databaseId) {\n      const openByDbIdParams = { databaseId }\n      await _openDatabase(changeHandler, openByDbIdParams)\n    } else {\n      const openByShareToken = { shareToken }\n      await _openDatabase(changeHandler, openByShareToken)\n    }\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'DatabaseAlreadyOpening':\n      case 'DatabaseNameMustBeString':\n      case 'DatabaseNameMissing':\n      case 'DatabaseNameCannotBeBlank':\n      case 'DatabaseNameTooLong':\n      case 'DatabaseNameRestricted':\n      case 'DatabaseIdMustBeString':\n      case 'DatabaseIdCannotBeBlank':\n      case 'DatabaseIdInvalidLength':\n      case 'DatabaseIdNotAllowed':\n      case 'DatabaseIdNotAllowedForOwnDatabase':\n      case 'ShareTokenNotAllowed':\n      case 'ShareTokenInvalid':\n      case 'ShareTokenNotFound':\n      case 'ShareTokenNotAllowedForOwnDatabase':\n      case 'DatabaseNotFound':\n      case 'ChangeHandlerMissing':\n      case 'ChangeHandlerMustBeFunction':\n      case 'EncryptionModeNotValid':\n      case 'ServerSideEncryptionNotEnabledInClient':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'UserNotFound':\n      case 'SubscriptionNotFound':\n      case 'SubscriptionInactive':\n      case 'TrialExpired':\n      case 'TooManyRequests':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n  }\n}\n\nconst getOpenDb = (dbName, databaseId, shareToken, encryptionMode = 'end-to-end') => {\n  _validateEncryptionMode(encryptionMode)\n\n  const shareTokenId = shareToken && _getShareTokenIdFromShareToken(base64.decode(shareToken))\n\n  const dbNameHash = encryptionMode === 'server-side' ? dbName : ws.state.dbNameToHash[dbName]\n  const database = dbName\n    ? ws.state.databases[dbNameHash]\n    : ws.state.databasesByDbId[databaseId || ws.state.shareTokenIdToDbId[shareTokenId]]\n\n  if (!database || !database.init) throw new errors.DatabaseNotOpen\n  return database\n}\n\nconst insertItem = async (params) => {\n  try {\n    _validateDbInput(params)\n\n    const database = getOpenDb(params.databaseName, params.databaseId, params.shareToken, params.encryptionMode || ws.encryptionMode)\n\n    const action = 'Insert'\n    const insertParams = await _buildInsertParams(database, params)\n\n    await postTransaction(database, action, insertParams)\n\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'DatabaseNotOpen':\n      case 'DatabaseNameMissing':\n      case 'DatabaseNameMustBeString':\n      case 'DatabaseNameCannotBeBlank':\n      case 'DatabaseNameTooLong':\n      case 'DatabaseNameRestricted':\n      case 'DatabaseIdMustBeString':\n      case 'DatabaseIdCannotBeBlank':\n      case 'DatabaseIdInvalidLength':\n      case 'DatabaseIdNotAllowed':\n      case 'ShareTokenNotAllowed':\n      case 'ShareTokenInvalid':\n      case 'DatabaseIsReadOnly':\n      case 'EncryptionModeNotValid':\n      case 'ServerSideEncryptionNotEnabledInClient':\n      case 'ItemIdMustBeString':\n      case 'ItemIdCannotBeBlank':\n      case 'ItemIdTooLong':\n      case 'ItemMissing':\n      case 'ItemInvalid':\n      case 'ItemTooLarge':\n      case 'ItemAlreadyExists':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'UserNotFound':\n      case 'TooManyRequests':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n\n  }\n}\n\nconst _buildInsertParams = async (database, params) => {\n  if (!objectHasOwnProperty(params, 'item')) throw new errors.ItemMissing\n\n  const { item, itemId, writeAccess } = params\n\n  if (objectHasOwnProperty(params, 'itemId')) {\n    if (typeof itemId !== 'string') throw new errors.ItemIdMustBeString\n    if (itemId.length === 0) throw new errors.ItemIdCannotBeBlank\n    if (itemId.length > MAX_ITEM_ID_CHAR_LENGTH) throw new errors.ItemIdTooLong(MAX_ITEM_ID_CHAR_LENGTH)\n  }\n\n  const itemString = JSON.stringify(item)\n  if (!itemString) throw new errors.ItemInvalid\n  if (byteSizeOfString(itemString) > MAX_ITEM_BYTES) throw new errors.ItemTooLarge(MAX_ITEM_KB)\n\n  const id = itemId || uuidv4()\n\n  const itemKey = await crypto.hmac.signString(ws.keys.hmacKey, id)\n  const itemRecord = { id, item }\n  const encryptedItem = await crypto.aesGcm.encryptJson(database.dbKey, itemRecord)\n\n  return { itemKey, encryptedItem, writeAccess }\n}\n\nconst updateItem = async (params) => {\n  try {\n    _validateDbInput(params)\n\n    const database = getOpenDb(params.databaseName, params.databaseId, params.shareToken, params.encryptionMode || ws.encryptionMode)\n\n    const action = 'Update'\n    const updateParams = await _buildUpdateParams(database, params)\n\n    await postTransaction(database, action, updateParams)\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'DatabaseNotOpen':\n      case 'DatabaseNameMissing':\n      case 'DatabaseNameMustBeString':\n      case 'DatabaseNameCannotBeBlank':\n      case 'DatabaseNameTooLong':\n      case 'DatabaseNameRestricted':\n      case 'DatabaseIdMustBeString':\n      case 'DatabaseIdCannotBeBlank':\n      case 'DatabaseIdInvalidLength':\n      case 'DatabaseIdNotAllowed':\n      case 'ShareTokenNotAllowed':\n      case 'ShareTokenInvalid':\n      case 'DatabaseIsReadOnly':\n      case 'EncryptionModeNotValid':\n      case 'ServerSideEncryptionNotEnabledInClient':\n      case 'ItemIdMissing':\n      case 'ItemIdMustBeString':\n      case 'ItemIdCannotBeBlank':\n      case 'ItemIdTooLong':\n      case 'ItemMissing':\n      case 'ItemInvalid':\n      case 'ItemTooLarge':\n      case 'ItemDoesNotExist':\n      case 'ItemUpdateConflict':\n      case 'WriteAccessParamNotAllowed':\n      case 'TransactionUnauthorized':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'UserNotFound':\n      case 'TooManyRequests':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n\n  }\n}\n\nconst _buildUpdateParams = async (database, params) => {\n  if (!objectHasOwnProperty(params, 'item')) throw new errors.ItemMissing\n  if (!objectHasOwnProperty(params, 'itemId')) throw new errors.ItemIdMissing\n\n  if (!params.writeAccess && objectHasOwnProperty(params, 'writeAccess')) params.writeAccess = false // marks writeAccess for deletion\n\n  const { item, itemId, writeAccess } = params\n\n  if (typeof itemId !== 'string') throw new errors.ItemIdMustBeString\n  if (itemId.length === 0) throw new errors.ItemIdCannotBeBlank\n  if (itemId.length > MAX_ITEM_ID_CHAR_LENGTH) throw new errors.ItemIdTooLong(MAX_ITEM_ID_CHAR_LENGTH)\n\n  if (!database.itemExists(itemId)) throw new errors.ItemDoesNotExist\n\n  const itemString = JSON.stringify(item)\n  if (!itemString) throw new errors.ItemInvalid\n  if (byteSizeOfString(itemString) > MAX_ITEM_BYTES) throw new errors.ItemTooLarge(MAX_ITEM_KB)\n\n  const currentVersion = database.getItemVersionNumber(itemId)\n  const itemKey = await crypto.hmac.signString(ws.keys.hmacKey, itemId)\n  const itemRecord = { id: itemId, item, __v: currentVersion + 1 }\n  const encryptedItem = await crypto.aesGcm.encryptJson(database.dbKey, itemRecord)\n\n  return { itemKey, encryptedItem, writeAccess }\n}\n\nconst deleteItem = async (params) => {\n  try {\n    _validateDbInput(params)\n\n    const database = getOpenDb(params.databaseName, params.databaseId, params.shareToken, params.encryptionMode || ws.encryptionMode)\n\n    const action = 'Delete'\n    const deleteParams = await _buildDeleteParams(database, params)\n\n    await postTransaction(database, action, deleteParams)\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'DatabaseNotOpen':\n      case 'DatabaseNameMissing':\n      case 'DatabaseNameMustBeString':\n      case 'DatabaseNameCannotBeBlank':\n      case 'DatabaseNameTooLong':\n      case 'DatabaseNameRestricted':\n      case 'DatabaseIdMustBeString':\n      case 'DatabaseIdCannotBeBlank':\n      case 'DatabaseIdInvalidLength':\n      case 'DatabaseIdNotAllowed':\n      case 'ShareTokenNotAllowed':\n      case 'ShareTokenInvalid':\n      case 'DatabaseIsReadOnly':\n      case 'EncryptionModeNotValid':\n      case 'ServerSideEncryptionNotEnabledInClient':\n      case 'ItemIdMissing':\n      case 'ItemIdMustBeString':\n      case 'ItemIdCannotBeBlank':\n      case 'ItemIdTooLong':\n      case 'ItemDoesNotExist':\n      case 'ItemUpdateConflict':\n      case 'TransactionUnauthorized':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'UserNotFound':\n      case 'TooManyRequests':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n\n  }\n}\n\nconst _buildDeleteParams = async (database, params) => {\n  if (!objectHasOwnProperty(params, 'itemId')) throw new errors.ItemIdMissing\n\n  const { itemId } = params\n\n  if (typeof itemId !== 'string') throw new errors.ItemIdMustBeString\n  if (itemId.length === 0) throw new errors.ItemIdCannotBeBlank\n  if (itemId.length > MAX_ITEM_ID_CHAR_LENGTH) throw new errors.ItemIdTooLong(MAX_ITEM_ID_CHAR_LENGTH)\n\n  if (!database.itemExists(itemId)) throw new errors.ItemDoesNotExist\n\n  const currentVersion = database.getItemVersionNumber(itemId)\n  const itemKey = await crypto.hmac.signString(ws.keys.hmacKey, itemId)\n  const itemRecord = { id: itemId, __v: currentVersion + 1 }\n  const encryptedItem = await crypto.aesGcm.encryptJson(database.dbKey, itemRecord)\n\n  return { itemKey, encryptedItem }\n}\n\nconst putTransaction = async (params) => {\n  try {\n    _validateDbInput(params)\n    if (!objectHasOwnProperty(params, 'operations')) throw new errors.OperationsMissing\n\n    const { databaseName, databaseId, shareToken, operations, encryptionMode = ws.encryptionMode } = params\n\n    if (!Array.isArray(operations)) throw new errors.OperationsMustBeArray\n\n    const database = getOpenDb(databaseName, databaseId, shareToken, encryptionMode)\n\n    const action = 'BatchTransaction'\n\n    const operationParamsPromises = await Promise.all(operations.map(operation => {\n      const command = operation.command\n\n      switch (command) {\n        case 'Insert': {\n          return _buildInsertParams(database, operation)\n        }\n\n        case 'Update': {\n          return _buildUpdateParams(database, operation)\n        }\n\n        case 'Delete': {\n          return _buildDeleteParams(database, operation)\n        }\n\n        default: throw new errors.CommandNotRecognized(command)\n      }\n    }))\n    const operationParamsPromiseResults = await Promise.all(operationParamsPromises)\n\n    const operationParams = {\n      operations: operations.map((operation, i) => ({\n        command: operation.command,\n        ...operationParamsPromiseResults[i]\n      }))\n    }\n\n    try {\n      await postTransaction(database, action, operationParams)\n    } catch (e) {\n      if (e.response && e.response.data.error === 'OperationsExceedLimit') {\n        throw new errors.OperationsExceedLimit(e.response.data.limit)\n      }\n      throw e\n    }\n\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'DatabaseNotOpen':\n      case 'DatabaseNameMissing':\n      case 'DatabaseNameMustBeString':\n      case 'DatabaseNameCannotBeBlank':\n      case 'DatabaseNameTooLong':\n      case 'DatabaseNameRestricted':\n      case 'DatabaseIdMustBeString':\n      case 'DatabaseIdCannotBeBlank':\n      case 'DatabaseIdInvalidLength':\n      case 'DatabaseIdNotAllowed':\n      case 'ShareTokenNotAllowed':\n      case 'ShareTokenInvalid':\n      case 'DatabaseIsReadOnly':\n      case 'EncryptionModeNotValid':\n      case 'ServerSideEncryptionNotEnabledInClient':\n      case 'OperationsMissing':\n      case 'OperationsMustBeArray':\n      case 'OperationsConflict':\n      case 'OperationsExceedLimit':\n      case 'CommandNotRecognized':\n      case 'ItemIdMissing':\n      case 'ItemIdMustBeString':\n      case 'ItemIdCannotBeBlank':\n      case 'ItemIdTooLong':\n      case 'ItemMissing':\n      case 'ItemInvalid':\n      case 'ItemTooLarge':\n      case 'ItemAlreadyExists':\n      case 'ItemDoesNotExist':\n      case 'ItemUpdateConflict':\n      case 'WriteAccessParamNotAllowed':\n      case 'TransactionUnauthorized':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'UserNotFound':\n      case 'TooManyRequests':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n  }\n}\n\nconst postTransaction = async (database, action, params) => {\n  try {\n    const pendingTx = database.registerUnverifiedTransaction()\n\n    const paramsWithDbData = {\n      ...params,\n      dbId: database.dbId,\n      dbNameHash: database.dbNameHash\n    }\n\n    const response = await ws.request(action, paramsWithDbData)\n    const seqNo = response.data.sequenceNo\n\n    await pendingTx.getResult(seqNo)\n\n    database.unregisterUnverifiedTransaction(pendingTx)\n\n    return seqNo\n  } catch (e) {\n    _parseGenericErrors(e)\n\n    if (e.response) {\n      if (e.response.data.name === 'DatabaseIsReadOnly') {\n        throw new errors.DatabaseIsReadOnly\n      } else if (e.response.data.message === 'UserNotFound') {\n        throw new errors.UserNotFound(e.response.data.username)\n      }\n    }\n\n    throw e\n  }\n}\n\nconst _completeFileUpload = async (database, fileId, itemKey, encryptedFileMetadata, encryptedFileEncryptionKey) => {\n  const params = {\n    dbId: database.dbId,\n    fileId,\n    itemKey,\n    fileMetadata: encryptedFileMetadata,\n    fileEncryptionKey: base64.encode(encryptedFileEncryptionKey)\n  }\n\n  const action = 'CompleteFileUpload'\n  await postTransaction(database, action, params)\n}\n\nconst _readBlob = async (blob) => {\n  const reader = new FileReader()\n\n  return new Promise((resolve, reject) => {\n    reader.onload = (e) => {\n      if (!e.target.error) {\n        resolve(e.target.result)\n      } else {\n        reject(e.target.error)\n      }\n    }\n\n    reader.readAsArrayBuffer(blob)\n  })\n}\n\nconst _uploadChunkRequest = async (request, bytesTransferredObject, progressHandler, chunkSize) => {\n  await request\n  bytesTransferredObject.bytesTransferred += chunkSize\n  if (progressHandler) progressHandler({ ...bytesTransferredObject })\n}\n\nconst _uploadChunk = async (batch, chunk, dbId, fileId, fileEncryptionKey, chunkNumber, bytesTransferredObject, progressHandler) => {\n  const plaintextChunk = await _readBlob(chunk)\n\n  // encrypt each chunk with new encryption key to maintain lower usage of file encryption key\n  const [chunkEncryptionKey, encryptedChunkEncryptionKey] = await crypto.aesGcm.generateAndEncryptKeyEncryptionKey(fileEncryptionKey)\n  const encryptedChunk = await crypto.aesGcm.encrypt(chunkEncryptionKey, plaintextChunk)\n\n  const uploadChunkParams = {\n    dbId,\n    chunkNumber,\n    fileId,\n\n    // arrayBufferToString takes up less space than base64 encoding. Uint8Array format required so that encrypted\n    // chunks that are odd number sized get converted to string properly\n    chunk: arrayBufferToString(new Uint8Array(encryptedChunk)),\n    chunkEncryptionKey: arrayBufferToString(new Uint8Array(encryptedChunkEncryptionKey)),\n  }\n\n  // queue UploadFileChunk request into batch of requests\n  const action = 'UploadFileChunk'\n\n  const uploadChunkRequest = _uploadChunkRequest(ws.request(action, uploadChunkParams), bytesTransferredObject, progressHandler, chunk.size)\n\n  batch.push(uploadChunkRequest)\n\n  // wait for batch of UploadFileChunk requests to finish before moving on to upload the next batch of chunks\n  if (batch.length === FILE_CHUNKS_PER_BATCH) {\n    await Promise.all(batch)\n    batch.length = 0\n  }\n}\n\nconst _buildFileMetadata = async (params, database) => {\n  if (!objectHasOwnProperty(params, 'itemId')) throw new errors.ItemIdMissing\n  if (!objectHasOwnProperty(params, 'file')) throw new errors.FileMissing\n\n  const { itemId, file } = params\n\n  if (typeof itemId !== 'string') throw new errors.ItemIdMustBeString\n  if (itemId.length === 0) throw new errors.ItemIdCannotBeBlank\n  if (itemId.length > MAX_ITEM_ID_CHAR_LENGTH) throw new errors.ItemIdTooLong(MAX_ITEM_ID_CHAR_LENGTH)\n\n  if (!database.itemExists(itemId)) throw new errors.ItemDoesNotExist\n\n  if (!(file instanceof File)) throw new errors.FileMustBeFile\n  if (file.size === 0) throw new errors.FileCannotBeEmpty\n\n  const itemKey = await crypto.hmac.signString(ws.keys.hmacKey, itemId)\n  const currentVersion = database.getFileVersionNumber(itemId)\n  const fileMetadata = {\n    itemId,\n    __v: currentVersion === undefined ? 0 : currentVersion + 1,\n    fileName: file.name,\n    fileSize: file.size,\n    fileType: file.type,\n  }\n  return { itemKey, fileMetadata }\n}\n\nconst _validateUploadFile = (params) => {\n  _validateDbInput(params)\n  if (objectHasOwnProperty(params, 'progressHandler') && typeof params.progressHandler !== 'function') {\n    throw new errors.ProgressHandlerMustBeFunction\n  }\n}\n\nconst uploadFile = async (params) => {\n  try {\n    _validateUploadFile(params)\n\n    const database = getOpenDb(params.databaseName, params.databaseId, params.shareToken, params.encryptionMode || ws.encryptionMode)\n    const { dbId } = database\n\n    try {\n      const { itemKey, fileMetadata } = await _buildFileMetadata(params, database)\n\n      // generate a new key particular to this file to maintain lower usage of dbKey\n      const [fileEncryptionKey, encryptedFileEncryptionKey] = await crypto.aesGcm.generateAndEncryptKeyEncryptionKey(database.dbKey)\n      const encryptedFileMetadata = await crypto.aesGcm.encryptJson(fileEncryptionKey, fileMetadata)\n\n      // server generates unique file identifier\n      const { data: { fileId } } = await ws.request('GenerateFileId', { dbId: database.dbId })\n\n      // upload file in chunks of size FILE_CHUNK_SIZE\n      const file = params.file\n      let position = 0\n      let chunkNumber = 0\n      let batch = [] // will use this to send chunks to server in batches of FILE_CHUNKS_PER_BATCH\n      const bytesTransferredObject = {\n        bytesTransferred: 0\n      }\n\n      while (position < file.size) {\n        // read a chunk at a time to keep memory overhead low\n        const chunk = file.slice(position, position + FILE_CHUNK_SIZE)\n        await _uploadChunk(batch, chunk, dbId, fileId, fileEncryptionKey, chunkNumber, bytesTransferredObject, params.progressHandler)\n\n        chunkNumber += 1\n        position += FILE_CHUNK_SIZE\n      }\n\n      await Promise.all(batch)\n      await _completeFileUpload(database, fileId, itemKey, encryptedFileMetadata, encryptedFileEncryptionKey)\n    } catch (e) {\n      _parseGenericErrors(e)\n\n      if (e.response && e.response.data === 'DatabaseIsReadOnly') {\n        throw new errors.DatabaseIsReadOnly\n      }\n\n      throw e\n    }\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'DatabaseNotOpen':\n      case 'DatabaseNameMissing':\n      case 'DatabaseNameMustBeString':\n      case 'DatabaseNameCannotBeBlank':\n      case 'DatabaseNameTooLong':\n      case 'DatabaseNameRestricted':\n      case 'DatabaseIdMustBeString':\n      case 'DatabaseIdCannotBeBlank':\n      case 'DatabaseIdInvalidLength':\n      case 'DatabaseIdNotAllowed':\n      case 'ShareTokenNotAllowed':\n      case 'ShareTokenInvalid':\n      case 'DatabaseIsReadOnly':\n      case 'EncryptionModeNotValid':\n      case 'ServerSideEncryptionNotEnabledInClient':\n      case 'ItemIdMissing':\n      case 'ItemIdMustBeString':\n      case 'ItemIdCannotBeBlank':\n      case 'ItemIdTooLong':\n      case 'ItemDoesNotExist':\n      case 'TransactionUnauthorized':\n      case 'FileMustBeFile':\n      case 'FileCannotBeEmpty':\n      case 'FileMissing':\n      case 'FileUploadConflict':\n      case 'ProgressHandlerMustBeFunction':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'TooManyRequests':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n\n  }\n}\n\nconst _getChunk = async (dbId, fileId, chunkNumber, fileEncryptionKey) => {\n  try {\n    const action = 'GetChunk'\n    const params = {\n      dbId,\n      fileId,\n      chunkNumber,\n    }\n    const response = await ws.request(action, params)\n    const data = response.data\n\n    const chunkRawBuffer = new Uint8Array(new Uint16Array(stringToArrayBuffer(data.chunk))).buffer\n    const chunkEncryptionKeyRawBuffer = new Uint8Array(new Uint16Array(stringToArrayBuffer(data.chunkEncryptionKey))).buffer\n\n    const chunkEncryptionKeyRaw = await crypto.aesGcm.decrypt(fileEncryptionKey, chunkEncryptionKeyRawBuffer)\n    const chunkEncryptionKey = await crypto.aesGcm.getKeyFromRawKey(chunkEncryptionKeyRaw)\n\n    const chunk = await crypto.aesGcm.decrypt(chunkEncryptionKey, chunkRawBuffer)\n    return chunk\n  } catch (e) {\n    _parseGenericErrors(e)\n    throw e\n  }\n}\n\nconst _getByteRange = async (dbId, fileId, fileEncryptionKey, range) => {\n  const { start, end } = range\n\n  const chunks = []\n  const startChunkNumber = Math.floor(start / FILE_CHUNK_SIZE)\n  const endChunkNumber = Math.floor(end / FILE_CHUNK_SIZE) - (end % FILE_CHUNK_SIZE === 0 ? 1 : 0)\n\n  let chunkNumber = startChunkNumber\n  while (chunkNumber <= endChunkNumber) {\n    let chunk = await _getChunk(dbId, fileId, chunkNumber, fileEncryptionKey)\n\n    if (chunkNumber === startChunkNumber && chunkNumber === endChunkNumber && end % FILE_CHUNK_SIZE) {\n      chunk = chunk.slice(start % FILE_CHUNK_SIZE, end % FILE_CHUNK_SIZE)\n    } else if (chunkNumber === startChunkNumber) {\n      chunk = chunk.slice(start % FILE_CHUNK_SIZE)\n    } else if (chunkNumber === endChunkNumber && end % FILE_CHUNK_SIZE) {\n      chunk = chunk.slice(0, end % FILE_CHUNK_SIZE)\n    }\n\n    chunks.push(chunk)\n    chunkNumber += 1\n  }\n\n  return chunks\n}\n\nconst _getFile = async (dbId, fileId, fileEncryptionKey, fileSize) => {\n  const chunks = []\n  let chunkNumber = 0\n\n  const finalChunkNumber = fileSize < FILE_CHUNK_SIZE\n    ? 0\n    : Math.floor(fileSize / FILE_CHUNK_SIZE) - (fileSize % FILE_CHUNK_SIZE === 0 ? 1 : 0)\n\n  while (chunkNumber <= finalChunkNumber) {\n    const chunk = await _getChunk(dbId, fileId, chunkNumber, fileEncryptionKey)\n    chunks.push(chunk)\n    chunkNumber += 1\n  }\n\n  return chunks\n}\n\nconst _validateGetFileParams = (params) => {\n  _validateDbInput(params)\n\n  if (!objectHasOwnProperty(params, 'fileId')) throw new errors.FileIdMissing\n\n  const { fileId, range } = params\n\n  if (typeof fileId !== 'string') throw new errors.FileIdMustBeString\n  if (fileId.length === 0) throw new errors.FileIdCannotBeBlank\n  if (fileId.length > MAX_ITEM_ID_CHAR_LENGTH) throw new errors.FileIdTooLong(MAX_ITEM_ID_CHAR_LENGTH)\n\n  if (objectHasOwnProperty(params, 'range')) {\n    if (typeof range !== 'object') throw new errors.RangeMustBeObject\n\n    if (!objectHasOwnProperty(range, 'start')) throw new errors.RangeMissingStart\n    if (!objectHasOwnProperty(range, 'end')) throw new errors.RangeMissingEnd\n\n    const { start, end } = range\n\n    if (typeof start !== 'number') throw new errors.RangeStartMustBeNumber\n    if (typeof end !== 'number') throw new errors.RangeEndMustBeNumber\n\n    if (start < 0) throw new errors.RangeStartMustBeGreaterThanZero\n    if (end <= start) throw new errors.RangeEndMustBeGreaterThanRangeStart\n  }\n}\n\nconst getFile = async (params) => {\n  try {\n    _validateGetFileParams(params)\n\n    const database = getOpenDb(params.databaseName, params.databaseId, params.shareToken, params.encryptionMode || ws.encryptionMode)\n    const { dbId } = database\n    const { fileId, range } = params\n\n    const itemId = database.fileIds[fileId]\n    const item = database.items[itemId]\n\n    if (!item || !item.file) throw new errors.FileNotFound\n\n    const { file: { fileName, fileSize, fileType, fileEncryptionKey } } = item\n\n    if (range && range.end > fileSize) throw new errors.RangeEndMustBeLessThanFileSize\n\n    const chunks = range\n      ? await _getByteRange(dbId, fileId, fileEncryptionKey, range)\n      : await _getFile(dbId, fileId, fileEncryptionKey, fileSize)\n\n    return {\n      file: new File(chunks, fileName, { type: fileType })\n    }\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'DatabaseNotOpen':\n      case 'DatabaseNameMissing':\n      case 'DatabaseNameMustBeString':\n      case 'DatabaseNameCannotBeBlank':\n      case 'DatabaseNameTooLong':\n      case 'DatabaseNameRestricted':\n      case 'DatabaseIdMustBeString':\n      case 'DatabaseIdCannotBeBlank':\n      case 'DatabaseIdInvalidLength':\n      case 'DatabaseIdNotAllowed':\n      case 'ShareTokenNotAllowed':\n      case 'ShareTokenInvalid':\n      case 'DatabaseIsReadOnly':\n      case 'EncryptionModeNotValid':\n      case 'ServerSideEncryptionNotEnabledInClient':\n      case 'FileIdMissing':\n      case 'FileIdMustBeString':\n      case 'FileIdCannotBeBlank':\n      case 'FileIdTooLong':\n      case 'FileNotFound':\n      case 'RangeMustBeObject':\n      case 'RangeMissingStart':\n      case 'RangeMissingEnd':\n      case 'RangeStartMustBeNumber':\n      case 'RangeEndMustBeNumber':\n      case 'RangeStartMustBeGreaterThanZero':\n      case 'RangeEndMustBeGreaterThanRangeStart':\n      case 'RangeEndMustBeLessThanFileSize':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'UserNotFound':\n      case 'TooManyRequests':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n\n  }\n}\n\nconst _verifyUsersParent = async (dbKey, verifiedUsers, databaseUser) => {\n  const { username, senderUsername, verificationValues } = databaseUser\n  const { sentSignature, receivedSignature, senderEcdsaPublicKey } = verificationValues\n\n  const verifiedFingerprint = verifiedUsers[username] && verifiedUsers[username].record.fingerprint\n\n  const parentRawEcdsaPublicKey = base64.decode(senderEcdsaPublicKey)\n  const parentFingerprint = (verifiedUsers[senderUsername] && verifiedUsers[senderUsername].record.fingerprint)\n    || await _getFingerprint(parentRawEcdsaPublicKey)\n  const parentEcdsaPublicKey = await crypto.ecdsa.getPublicKeyFromRawPublicKey(parentRawEcdsaPublicKey)\n\n  // verify parent's claim that sent the dbKey to user\n  const expectedSentSignature = await _signFingerprintWithDbKey(dbKey, verifiedFingerprint)\n  const verifiedParentSent = await crypto.ecdsa.verifyString(parentEcdsaPublicKey, sentSignature, expectedSentSignature)\n\n  // verify user's claim that received the dbKey from parent\n  const recipientEcdsaPublicKey = await crypto.ecdsa.getPublicKeyFromRawPublicKey(base64.decode(verificationValues.recipientEcdsaPublicKey))\n  const expectedReceivedSignature = await _signFingerprintWithDbKey(dbKey, parentFingerprint)\n  const verifiedReceivedFromParent = await crypto.ecdsa.verifyString(recipientEcdsaPublicKey, receivedSignature, expectedReceivedSignature)\n\n  return verifiedParentSent && verifiedReceivedFromParent\n}\n\nconst _verifyReceivedDatabaseFromUser = async (dbKey, verifiedFingerprint, myFingerprint, myEcdsaPublicKey, verificationValues) => {\n  const { mySentSignature, myReceivedSignature } = verificationValues\n\n  // verify my claim that I received dbKey from this user\n  const expectedReceivedSignature = await _signFingerprintWithDbKey(dbKey, verifiedFingerprint)\n  const verifiedReceived = await crypto.ecdsa.verifyString(myEcdsaPublicKey, myReceivedSignature, expectedReceivedSignature)\n\n  if (!verifiedReceived) return verifiedReceived\n\n  // verify user's claim that sent dbKey to me\n  const expectedSentSignature = await _signFingerprintWithDbKey(dbKey, myFingerprint)\n  const senderEcdsaPublicKey = await crypto.ecdsa.getPublicKeyFromRawPublicKey(base64.decode(verificationValues.mySenderEcdsaPublicKey))\n  const verifiedSent = await crypto.ecdsa.verifyString(senderEcdsaPublicKey, mySentSignature, expectedSentSignature)\n\n  return verifiedSent && verifiedReceived\n}\n\nconst _verifySentDatabaseToUser = async (dbKey, verifiedFingerprint, myFingerprint, myEcdsaPublicKey, verificationValues) => {\n  const { sentSignature, receivedSignature } = verificationValues\n\n  // verify my claim that I sent dbKey to this user\n  const expectedSentSignature = await _signFingerprintWithDbKey(dbKey, verifiedFingerprint)\n  const verifiedSent = await crypto.ecdsa.verifyString(myEcdsaPublicKey, sentSignature, expectedSentSignature)\n\n  if (!verifiedSent) return verifiedSent\n\n  // verify user's claim that received dbKey from me\n  const expectedReceivedSignature = await _signFingerprintWithDbKey(dbKey, myFingerprint)\n  const recipientEcdsaPublicKey = await crypto.ecdsa.getPublicKeyFromRawPublicKey(base64.decode(verificationValues.recipientEcdsaPublicKey))\n  const verifiedReceived = await crypto.ecdsa.verifyString(recipientEcdsaPublicKey, receivedSignature, expectedReceivedSignature)\n\n  return verifiedSent && verifiedReceived\n}\n\nconst _buildDatabaseUserResult = async (dbKey, databaseUsers, verifiedUsers, myUsername, mySenderUsername) => {\n  const myEcdsaPublicKey = await crypto.ecdsa.getPublicKeyFromPrivateKey(ws.keys.ecdsaPrivateKey)\n  const myFingerprint = await _getMyFingerprint()\n\n  // iterate over all database users to verify each user individually\n  for (let i = 0; i < databaseUsers.length; i++) {\n    const databaseUser = databaseUsers[i]\n    const { username, isOwner, senderUsername, verificationValues } = databaseUser\n\n    try {\n      const verifiedFingerprint = verifiedUsers[username] && verifiedUsers[username].record.fingerprint\n\n      const sentDatabaseToUser = verificationValues.isChild\n      const receivedDatabaseFromUser = mySenderUsername === username\n\n      if (verifiedFingerprint) {\n        if (sentDatabaseToUser) {\n          databaseUsers[i].verified = await _verifySentDatabaseToUser(dbKey, verifiedFingerprint, myFingerprint, myEcdsaPublicKey, verificationValues)\n        } else if (receivedDatabaseFromUser) {\n          const verifiedReceivedDatabaseFromUser = await _verifyReceivedDatabaseFromUser(dbKey, verifiedFingerprint, myFingerprint, myEcdsaPublicKey, verificationValues)\n\n          // verify user's relationship to parent if has a parent\n          if (verifiedReceivedDatabaseFromUser && senderUsername) {\n            const verifiedGrandparent = await _verifyUsersParent(dbKey, verifiedUsers, databaseUser)\n            databaseUsers[i].verified = verifiedGrandparent\n          } else {\n            databaseUsers[i].verified = verifiedReceivedDatabaseFromUser\n          }\n\n        } else if (!isOwner) {\n          // verify unrelated user's parent sent dbKey to user and user received dbKey from their parent\n          const verifiedUsersParent = await _verifyUsersParent(dbKey, verifiedUsers, databaseUser)\n          databaseUsers[i].verified = verifiedUsersParent\n        } else {\n          // must be an owner that is not my child or parent, and owner is automatically verified\n          databaseUsers[i].verified = isOwner\n        }\n      }\n    } catch {\n      // continue without setting verified boolean\n    }\n\n    // \"receivedFromUsername\" is easier to understand to end developer\n    delete databaseUsers[i].senderUsername\n    if (!isOwner) {\n      if (verificationValues && verificationValues.isChild) databaseUsers[i].receivedFromUsername = myUsername\n      else if (senderUsername) databaseUsers[i].receivedFromUsername = senderUsername\n    }\n\n    // these values are not useful to user\n    delete databaseUsers[i].verificationValues\n  }\n\n  return databaseUsers\n}\n\nconst _databaseHasOwner = (databaseUsers) => {\n  for (let i = 0; i < databaseUsers.length; i++) {\n    const user = databaseUsers[i]\n    if (user.isOwner) return true\n  }\n\n  return false\n}\n\nconst _getDatabaseUsers = async (databaseId, databaseNameHash, dbKey, verifiedUsers, username, senderUsername) => {\n  const users = []\n  const action = 'GetDatabaseUsers'\n  const params = { databaseId, databaseNameHash }\n  let databaseUsersResponse = await ws.request(action, params)\n\n  users.push(...await _buildDatabaseUserResult(dbKey, databaseUsersResponse.data.users, verifiedUsers, username, senderUsername))\n\n  while (databaseUsersResponse.data.nextPageTokenLessThanUserId || databaseUsersResponse.data.nextPageTokenMoreThanUserId) {\n    params.nextPageTokenLessThanUserId = databaseUsersResponse.data.nextPageTokenLessThanUserId\n    params.nextPageTokenMoreThanUserId = databaseUsersResponse.data.nextPageTokenMoreThanUserId\n    databaseUsersResponse = await ws.request(action, params)\n    users.push(...await _buildDatabaseUserResult(dbKey, databaseUsersResponse.data.users, verifiedUsers, username, senderUsername))\n  }\n\n  return users\n}\n\nconst _buildDatabaseResult = async (db, encryptionKey, ecdhPrivateKey, verifiedUsers, username) => {\n  const { databaseId, databaseNameHash, isOwner, readOnly, resharingAllowed, senderUsername } = db\n\n  let dbKey, databaseName\n  if (db.encryptedDbKey || db.plaintextDbKey) {\n    // user must already have access to database\n    const dbKeyString = db.plaintextDbKey || await crypto.aesGcm.decryptString(encryptionKey, db.encryptedDbKey)\n    dbKey = await crypto.aesGcm.getKeyFromKeyString(dbKeyString)\n    databaseName = await crypto.aesGcm.decryptString(dbKey, db.databaseName)\n\n    // don't expose the user's own verified users database to user -- it's used internally\n    if (isOwner && databaseName === VERIFIED_USERS_DATABASE_NAME) return null\n  } else if (db.wrappedDbKey) {\n    // user using userbase-js v2.0.0 shared with user using userbase-js >= v2.0.1. Updated client\n    // cannot receive access to databases shared via userbase-js v2.0.0\n    return null\n  } else {\n    // user is seeing the database for the first time\n    let senderRawEcdsaPublicKey\n    try {\n      const { ephemeralPublicKey, signedEphemeralPublicKey, sharedEncryptedDbKey } = db\n\n      // verify sender signed the ephemeral public key\n      senderRawEcdsaPublicKey = base64.decode(db.senderEcdsaPublicKey)\n      const senderEcdsaPublicKey = await crypto.ecdsa.getPublicKeyFromRawPublicKey(senderRawEcdsaPublicKey)\n      const senderSignedEphemeralPublicKey = await crypto.ecdsa.verify(senderEcdsaPublicKey, base64.decode(signedEphemeralPublicKey), base64.decode(ephemeralPublicKey))\n      if (!senderSignedEphemeralPublicKey) throw new errors.ServiceUnavailable\n\n      // compute shared key encryption key with other user and decrypt database encryption key\n      const senderEphemeralEcdhPublicKey = await crypto.ecdh.getPublicKeyFromRawPublicKey(base64.decode(ephemeralPublicKey))\n      const sharedKeyEncryptionKey = await crypto.ecdh.computeSharedKeyEncryptionKey(senderEphemeralEcdhPublicKey, ecdhPrivateKey)\n      const dbKeyString = await crypto.aesGcm.decryptString(sharedKeyEncryptionKey, sharedEncryptedDbKey)\n      dbKey = await crypto.aesGcm.getKeyFromKeyString(dbKeyString)\n\n      // make sure dbKey the sender sent works\n      databaseName = await crypto.aesGcm.decryptString(dbKey, db.databaseName)\n    } catch (e) {\n      // if for whatever reason the above process fails (e.g. malicious sender or version upgrade breaks the above implementation),\n      // simply return a null spot for database\n      return null\n    }\n\n    // compute receivedSignature to maintain record of who received dbKey from\n    const senderFingerprint = await _getFingerprint(senderRawEcdsaPublicKey)\n    const receivedSignature = await _signDbKeyAndFingerprint(dbKey, senderFingerprint)\n\n    // tell server to store encrypted db key & delete ephemeral key data\n    const dbKeyString = await crypto.aesGcm.getKeyStringFromKey(dbKey)\n    const encryptedDbKey = await crypto.aesGcm.encryptString(encryptionKey, dbKeyString)\n\n    const action = 'SaveDatabase'\n    const params = { databaseNameHash, encryptedDbKey, receivedSignature }\n    ws.request(action, params)\n  }\n\n  const result = {\n    databaseName,\n    databaseId,\n    isOwner,\n    readOnly,\n    resharingAllowed,\n    encryptionMode: db.plaintextDbKey ? 'server-side' : 'end-to-end',\n  }\n\n  const users = await _getDatabaseUsers(databaseId, databaseNameHash, dbKey, verifiedUsers, username, senderUsername)\n\n  // if database has no owner, owner must have been deleted and database should not be accessible to user\n  if (isOwner || _databaseHasOwner(users)) result.users = users\n  else return null\n\n  if (!isOwner && senderUsername) result.receivedFromUsername = senderUsername\n\n  return result\n}\n\nconst getDatabases = async (params) => {\n  try {\n    if (params !== undefined) _validateDbInput(params)\n    _checkSignedInState()\n\n    const { encryptionKey, ecdhPrivateKey } = ws.keys\n    const username = ws.session.username\n\n    if (params && objectHasOwnProperty(params, 'shareToken')) throw new errors.ShareTokenNotAllowed\n\n    const encryptionMode = (params && params.encryptionMode) || ws.encryptionMode\n    _validateEncryptionMode(encryptionMode)\n\n    try {\n      const databases = []\n      const action = 'GetDatabases'\n      const requestParams = params && {\n        databaseId: params.databaseId,\n        dbNameHash: encryptionMode === 'server-side'\n          ? params.databaseName\n          : params.databaseName && await crypto.hmac.signString(ws.keys.hmacKey, params.databaseName)\n      }\n\n      let [databasesResponse, verifiedUsers] = await Promise.all([ws.request(action, requestParams), _openVerifiedUsersDatabase()])\n      let databaseResults = await Promise.all(databasesResponse.data.databases.map(db => _buildDatabaseResult(db, encryptionKey, ecdhPrivateKey, verifiedUsers, username)))\n      databases.push(...databaseResults)\n\n      while (databasesResponse.data.nextPageToken) {\n        const params = { nextPageToken: databasesResponse.data.nextPageToken }\n        databasesResponse = await ws.request(action, params)\n        databaseResults = await Promise.all(databasesResponse.data.databases.map(db => _buildDatabaseResult(db, encryptionKey, ecdhPrivateKey, verifiedUsers, username)))\n        databases.push(...databaseResults)\n      }\n\n      return { databases: databases.filter(database => database !== null) }\n    } catch (e) {\n      _parseGenericErrors(e)\n      throw e\n    }\n\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'DatabaseNameMustBeString':\n      case 'DatabaseNameCannotBeBlank':\n      case 'DatabaseNameTooLong':\n      case 'DatabaseNameRestricted':\n      case 'DatabaseIdMustBeString':\n      case 'DatabaseIdCannotBeBlank':\n      case 'DatabaseIdInvalidLength':\n      case 'DatabaseIdNotAllowed':\n      case 'ShareTokenNotAllowed':\n      case 'EncryptionModeNotValid':\n      case 'ServerSideEncryptionNotEnabledInClient':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n  }\n}\n\nconst _getDatabase = async (databaseName, databaseId, encryptionMode = 'end-to-end') => {\n  _validateEncryptionMode(encryptionMode)\n\n  let database\n  try {\n    // check if database is already open in memory. shareToken = null because not possible to pass shareToken here\n    database = getOpenDb(databaseName, databaseId, null, encryptionMode)\n  } catch {\n    // if not already open in memory, it's ok. Just get the values we need from backend\n    const action = 'GetDatabases'\n    const requestParams = databaseName\n      ? { dbNameHash: encryptionMode === 'server-side' ? databaseName : await crypto.hmac.signString(ws.keys.hmacKey, databaseName) }\n      : { databaseId }\n\n    const databaseResponse = await ws.request(action, requestParams)\n\n    const databases = databaseResponse.data.databases\n    if (!databases || !databases.length) throw new errors.DatabaseNotFound\n    database = databases[0]\n\n    // type conversion :/\n    database.dbNameHash = database.databaseNameHash\n    database.dbId = database.databaseId\n  }\n  return database\n}\n\nconst _signFingerprintWithDbKey = async (dbKey, fingerprint) => {\n  // convert dbKey into hmacKey\n  const rawDbKey = await crypto.aesGcm.getRawKeyFromKey(dbKey)\n  const dbKeyHash = await crypto.sha256.hash(rawDbKey)\n  const hmacKey = await crypto.hmac.importKeyFromRawBits(dbKeyHash)\n\n  // sign fingerprint with hmacKey\n  const signedFingerprint = await crypto.hmac.signString(hmacKey, fingerprint)\n  return signedFingerprint\n}\n\nconst _signDbKeyAndFingerprint = async (dbKey, fingerprint) => {\n  const signedFingerprint = await _signFingerprintWithDbKey(dbKey, fingerprint)\n\n  // digitally sign the signedFingerprint to enable a user to verify that\n  // this user has sent/received dbKey to/from intended recipient/sender\n  const signedDbKeyAndFingerprint = await crypto.ecdsa.signString(ws.keys.ecdsaPrivateKey, signedFingerprint)\n  return signedDbKeyAndFingerprint\n}\n\nconst _verifyDatabaseRecipientFingerprint = async (username, recipientFingerprint, verifiedUsers) => {\n  // find recipient's fingerprint in verified users database\n  let verifiedRecipientFingerprint, foundOldFingerprint\n  const verifiedUsersArray = Object.keys(verifiedUsers)\n  for (let i = 0; i < verifiedUsersArray.length; i++) {\n    const verifiedUsername = verifiedUsersArray[i]\n    const verifiedFingerprint = verifiedUsers[verifiedUsername].record.fingerprint\n    if (username === verifiedUsername && recipientFingerprint === verifiedFingerprint) {\n      verifiedRecipientFingerprint = verifiedFingerprint\n      break\n    } else if (verifiedFingerprint === recipientFingerprint) {\n      foundOldFingerprint = true\n    }\n  }\n\n  // must have an outdated username stored in verified users database and therefore must reverify recipient\n  if (!verifiedRecipientFingerprint && foundOldFingerprint) throw new errors.UserMustBeReverified\n  if (!verifiedRecipientFingerprint) throw new errors.UserNotVerified\n}\n\nconst _getDatabaseEncryptionKey = async (database) => {\n  let dbKeyString\n  if (!database.dbKey) {\n    dbKeyString = database.plaintextDbKey || await crypto.aesGcm.decryptString(ws.keys.encryptionKey, database.encryptedDbKey)\n    database.dbKey = await crypto.aesGcm.getKeyFromKeyString(dbKeyString)\n  } else {\n    dbKeyString = await crypto.aesGcm.getKeyStringFromKey(database.dbKey)\n  }\n  return dbKeyString\n}\n\nconst _getShareToken = async (params, readOnly, encryptionMode) => {\n  try {\n    const { databaseName, databaseId } = params\n\n    if (objectHasOwnProperty(params, 'requireVerified')) throw new errors.RequireVerifiedParamNotNecessary\n    if (objectHasOwnProperty(params, 'resharingAllowed')) throw new errors.ResharingAllowedParamNotAllowed('when retrieving a share token')\n\n    // generate share token seed and associated keys\n    const shareTokenSeed = crypto.generateSeed()\n    const shareTokenHkdfKey = await crypto.hkdf.importHkdfKey(shareTokenSeed)\n\n    // generate share token encryption key\n    const shareTokenEncryptionKeySalt = crypto.hkdf.generateSalt()\n    const shareTokenEncryptionKey = await crypto.aesGcm.importKeyFromMaster(shareTokenHkdfKey, shareTokenEncryptionKeySalt)\n\n    // encrypt the database key using shareTokenEncryptionKey\n    const database = await _getDatabase(databaseName, databaseId, encryptionMode)\n    const dbKeyString = await _getDatabaseEncryptionKey(database)\n    const shareTokenEncryptedDbKeyString = await crypto.aesGcm.encryptString(shareTokenEncryptionKey, dbKeyString)\n\n    // generate share token ECDSA key data\n    const { ecdsaPublicKey, encryptedEcdsaPrivateKey, ecdsaKeyEncryptionKeySalt } = await crypto.ecdsa.generateEcdsaKeyData(shareTokenHkdfKey)\n\n    const action = 'ShareDatabaseToken'\n    const requestParams = {\n      databaseId: database.dbId,\n      databaseNameHash: database.dbNameHash,\n      readOnly,\n      keyData: {\n        shareTokenEncryptedDbKey: shareTokenEncryptedDbKeyString,\n        shareTokenEncryptionKeySalt: base64.encode(shareTokenEncryptionKeySalt),\n        shareTokenPublicKey: ecdsaPublicKey,\n        shareTokenEncryptedEcdsaPrivateKey: encryptedEcdsaPrivateKey,\n        shareTokenEcdsaKeyEncryptionKeySalt: ecdsaKeyEncryptionKeySalt,\n      }\n    }\n    const shareTokenResponse = await ws.request(action, requestParams)\n\n    // server generates unique ID\n    const { shareTokenId } = shareTokenResponse.data\n\n    // prepend shareTokenId to shareTokenSeed to get final shareToken to return to user, all in base64\n    const shareTokenIdArrayBuffer = stringToArrayBuffer(shareTokenId, true)\n    const shareToken = base64.encode(appendBuffer(shareTokenIdArrayBuffer, shareTokenSeed))\n    return shareToken\n  } catch (e) {\n    _parseGenericErrors(e)\n\n    if (e.response && e.response.data) {\n      switch (e.response.data.message) {\n        case 'DatabaseNotFound': throw new errors.DatabaseNotFound\n        case 'ResharingNotAllowed': throw new errors.ResharingNotAllowed('Only the owner can generate a share token')\n      }\n    }\n\n    throw e\n  }\n}\n\nconst _shareDatabaseWithUsername = async (params, readOnly, resharingAllowed, requireVerified, encryptionMode) => {\n  const { databaseName, databaseId } = params\n  const username = params.username.toLowerCase()\n\n  try {\n    // get recipient's public key to use to generate a shared key, and retrieve verified users list if requireVerified set to true\n    const [recipientPublicKey, verifiedUsers, database] = await Promise.all([\n      authApi.getPublicKey(username),\n      requireVerified && _openVerifiedUsersDatabase(),\n      _getDatabase(databaseName, databaseId, encryptionMode),\n    ])\n\n    // recipient must have required keys so client can share database key\n    if (!recipientPublicKey.ecdhPublicKey || !recipientPublicKey.ecdsaPublicKey) throw new errors.UserUnableToReceiveDatabase\n\n    // compute recipient's fingerprint of ECDSA public key stored on server\n    const recipientRawEcdsaPublicKey = base64.decode(recipientPublicKey.ecdsaPublicKey)\n    const recipientFingerprint = await _getFingerprint(recipientRawEcdsaPublicKey)\n\n    // verify that the recipient is in the user's list of verified users\n    if (requireVerified) await _verifyDatabaseRecipientFingerprint(username, recipientFingerprint, verifiedUsers)\n\n    // verify recipient signed the ECDH public key that sender will be using to share database\n    const recipientEcdsaPublicKey = await crypto.ecdsa.getPublicKeyFromRawPublicKey(recipientRawEcdsaPublicKey)\n    const { signedEcdhPublicKey, ecdhPublicKey } = recipientPublicKey\n    const isVerified = await crypto.ecdsa.verify(recipientEcdsaPublicKey, base64.decode(signedEcdhPublicKey), base64.decode(ecdhPublicKey))\n\n    // this should never happen. If this happens, the server is serving conflicting keys and client should not sign anything\n    if (!isVerified) throw new errors.ServiceUnavailable\n\n    const recipientEcdhPublicKey = await crypto.ecdh.getPublicKeyFromRawPublicKey(base64.decode(recipientPublicKey.ecdhPublicKey))\n\n    // generate ephemeral ECDH key pair to ensure forward secrecy for future shares between users if shared key is leaked\n    const ephemeralEcdhKeyPair = await crypto.ecdh.generateKeyPair()\n    const rawEphemeralEcdhPublicKey = await crypto.ecdh.getRawPublicKeyFromPublicKey(ephemeralEcdhKeyPair.publicKey)\n    const signedEphemeralEcdhPublicKey = await crypto.ecdsa.sign(ws.keys.ecdsaPrivateKey, rawEphemeralEcdhPublicKey)\n\n    // compute shared key encryption key with recipient so can use it to encrypt database encryption key\n    const sharedKeyEncryptionKey = await crypto.ecdh.computeSharedKeyEncryptionKey(recipientEcdhPublicKey, ephemeralEcdhKeyPair.privateKey)\n\n    // encrypt the database encryption key using shared ephemeral ECDH key\n    const dbKeyString = await _getDatabaseEncryptionKey(database)\n    const sharedEncryptedDbKeyString = await crypto.aesGcm.encryptString(sharedKeyEncryptionKey, dbKeyString)\n\n    const action = 'ShareDatabase'\n    const requestParams = {\n      databaseId: database.dbId,\n      databaseNameHash: database.dbNameHash,\n      username,\n      readOnly,\n      resharingAllowed,\n      sharedEncryptedDbKey: sharedEncryptedDbKeyString,\n      ephemeralPublicKey: base64.encode(rawEphemeralEcdhPublicKey),\n      signedEphemeralPublicKey: base64.encode(signedEphemeralEcdhPublicKey),\n      sentSignature: await _signDbKeyAndFingerprint(database.dbKey, recipientFingerprint),\n      recipientEcdsaPublicKey: recipientPublicKey.ecdsaPublicKey\n    }\n    await ws.request(action, requestParams)\n  } catch (e) {\n    _parseGenericErrors(e)\n\n    if (e.response && e.response.data) {\n      switch (e.response.data.message) {\n        case 'SharingWithSelfNotAllowed':\n          throw new errors.SharingWithSelfNotAllowed\n        case 'DatabaseNotFound':\n          throw new errors.DatabaseNotFound\n        case 'ResharingNotAllowed':\n          throw new errors.ResharingNotAllowed('Must have permission to reshare the database with another user')\n        case 'ResharingWithWriteAccessNotAllowed':\n          throw new errors.ResharingWithWriteAccessNotAllowed\n        case 'UserNotFound':\n          throw new errors.UserNotFound\n        case 'DatabaseAlreadyShared':\n          // safe to return\n          return\n      }\n    }\n\n    throw e\n  }\n}\n\nconst _validateUsername = (username) => {\n  if (typeof username !== 'string') throw new errors.UsernameMustBeString\n  if (username.length === 0) throw new errors.UsernameCannotBeBlank\n}\n\nconst _validateDbSharingInput = (params) => {\n  if (objectHasOwnProperty(params, 'shareToken')) throw new errors.ShareTokenNotAllowed\n\n  if (objectHasOwnProperty(params, 'username')) _validateUsername(params.username)\n\n  if (objectHasOwnProperty(params, 'readOnly') && typeof params.readOnly !== 'boolean') {\n    throw new errors.ReadOnlyMustBeBoolean\n  }\n\n  if (objectHasOwnProperty(params, 'resharingAllowed') && typeof params.resharingAllowed !== 'boolean') {\n    throw new errors.ResharingAllowedMustBeBoolean\n  }\n\n  if (objectHasOwnProperty(params, 'requireVerified') && typeof params.requireVerified !== 'boolean') {\n    throw new errors.RequireVerifiedMustBeBoolean\n  }\n}\n\nconst shareDatabase = async (params) => {\n  try {\n    _validateDbInput(params)\n    _validateDbSharingInput(params)\n\n    const readOnly = objectHasOwnProperty(params, 'readOnly') ? params.readOnly : true\n    const resharingAllowed = objectHasOwnProperty(params, 'resharingAllowed') ? params.resharingAllowed : false\n    const requireVerified = objectHasOwnProperty(params, 'requireVerified') ? params.requireVerified : true\n\n    const encryptionMode = params.encryptionMode || ws.encryptionMode\n    _validateEncryptionMode(encryptionMode)\n\n    let result = {}\n    if (objectHasOwnProperty(params, 'username')) await _shareDatabaseWithUsername(params, readOnly, resharingAllowed, requireVerified, encryptionMode)\n    else result.shareToken = await _getShareToken(params, readOnly, encryptionMode)\n\n    return result\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'DatabaseNameMissing':\n      case 'DatabaseNameMustBeString':\n      case 'DatabaseNameCannotBeBlank':\n      case 'DatabaseNameTooLong':\n      case 'DatabaseNameRestricted':\n      case 'DatabaseIdMustBeString':\n      case 'DatabaseIdCannotBeBlank':\n      case 'DatabaseIdInvalidLength':\n      case 'DatabaseIdNotAllowed':\n      case 'ShareTokenNotAllowed':\n      case 'DatabaseNotFound':\n      case 'EncryptionModeNotValid':\n      case 'ServerSideEncryptionNotEnabledInClient':\n      case 'UsernameCannotBeBlank':\n      case 'UsernameMustBeString':\n      case 'ReadOnlyMustBeBoolean':\n      case 'ResharingAllowedMustBeBoolean':\n      case 'ResharingNotAllowed':\n      case 'ResharingWithWriteAccessNotAllowed':\n      case 'ResharingAllowedParamNotAllowed':\n      case 'RequireVerifiedMustBeBoolean':\n      case 'RequireVerifiedParamNotNecessary':\n      case 'SharingWithSelfNotAllowed':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'UserUnableToReceiveDatabase':\n      case 'UserNotFound':\n      case 'UserNotVerified':\n      case 'UserMustBeReverified':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n  }\n}\n\nconst modifyDatabasePermissions = async (params) => {\n  try {\n    _validateDbInput(params)\n    _validateDbSharingInput(params)\n\n    if (!objectHasOwnProperty(params, 'username')) throw new errors.UsernameMissing\n\n    if (objectHasOwnProperty(params, 'revoke')) {\n      if (typeof params.revoke !== 'boolean') throw new errors.RevokeMustBeBoolean\n\n      // readOnly and resharingAllowed booleans have no use if revoking database from user\n      if (params.revoke) {\n        if (objectHasOwnProperty(params, 'readOnly')) throw new errors.ReadOnlyParamNotAllowed\n        if (objectHasOwnProperty(params, 'resharingAllowed')) throw new errors.ResharingAllowedParamNotAllowed('when revoking access to a database')\n      }\n    } else if (!objectHasOwnProperty(params, 'readOnly') && !objectHasOwnProperty(params, 'resharingAllowed')) {\n      throw new errors.ParamsMissing\n    }\n\n    const { databaseName, databaseId, readOnly, resharingAllowed, revoke, encryptionMode = ws.encryptionMode } = params\n    const username = params.username.toLowerCase()\n\n    try {\n      const database = await _getDatabase(databaseName, databaseId, encryptionMode)\n\n      const action = 'ModifyDatabasePermissions'\n      const requestParams = {\n        databaseId: database.dbId,\n        databaseNameHash: database.dbNameHash,\n        username,\n        readOnly,\n        resharingAllowed,\n        revoke,\n      }\n      await ws.request(action, requestParams)\n    } catch (e) {\n      _parseGenericErrors(e)\n\n      if (e.response && e.response.data) {\n        switch (e.response.data.message) {\n          case 'SharingWithSelfNotAllowed':\n            throw new errors.ModifyingOwnPermissionsNotAllowed\n          case 'ModifyingOwnerPermissionsNotAllowed':\n            throw new errors.ModifyingOwnerPermissionsNotAllowed\n          case 'ResharingNotAllowed':\n            throw new errors.ModifyingPermissionsNotAllowed\n          case 'ResharingWithWriteAccessNotAllowed':\n            throw new errors.GrantingWriteAccessNotAllowed\n          case 'DatabaseNotFound':\n            throw new errors.DatabaseNotFound\n          case 'UserNotFound':\n            throw new errors.UserNotFound\n        }\n      }\n\n      throw e\n    }\n\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'ParamsMissing':\n      case 'DatabaseNameMissing':\n      case 'DatabaseNameMustBeString':\n      case 'DatabaseNameCannotBeBlank':\n      case 'DatabaseNameTooLong':\n      case 'DatabaseNameRestricted':\n      case 'DatabaseIdMustBeString':\n      case 'DatabaseIdCannotBeBlank':\n      case 'DatabaseIdInvalidLength':\n      case 'DatabaseIdNotAllowed':\n      case 'ShareTokenNotAllowed':\n      case 'DatabaseNotFound':\n      case 'EncryptionModeNotValid':\n      case 'ServerSideEncryptionNotEnabledInClient':\n      case 'UsernameMissing':\n      case 'UsernameCannotBeBlank':\n      case 'UsernameMustBeString':\n      case 'ReadOnlyMustBeBoolean':\n      case 'ReadOnlyParamNotAllowed':\n      case 'ResharingAllowedMustBeBoolean':\n      case 'ResharingAllowedParamNotAllowed':\n      case 'RevokeMustBeBoolean':\n      case 'ModifyingOwnPermissionsNotAllowed':\n      case 'ModifyingOwnerPermissionsNotAllowed':\n      case 'ModifyingPermissionsNotAllowed':\n      case 'GrantingWriteAccessNotAllowed':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'UserNotFound':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n  }\n}\n\nconst _packVerificationMessage = (username, fingerprint) => {\n  return btoa(JSON.stringify({ username, fingerprint }))\n}\n\nconst _unpackVerificationMessage = (verificationMessage) => {\n  try {\n    const { username, fingerprint } = JSON.parse(atob(verificationMessage))\n\n    _validateUsername(username)\n    if (!fingerprint) throw new errors.VerificationMessageInvalid\n\n    return { username, fingerprint }\n  } catch {\n    throw new errors.VerificationMessageInvalid\n  }\n}\n\nconst _getFingerprint = async (ecdsaRawPublicKey) => {\n  const ecdsaPublicKeyHash = await crypto.sha256.hash(ecdsaRawPublicKey)\n  const fingerprint = base64.encode(ecdsaPublicKeyHash)\n  return fingerprint\n}\n\nconst _getMyFingerprint = async () => {\n  const ecdsaPublicKey = await crypto.ecdsa.getPublicKeyFromPrivateKey(ws.keys.ecdsaPrivateKey)\n  const ecdsaRawPublicKey = await crypto.ecdsa.getRawPublicKeyFromPublicKey(ecdsaPublicKey)\n  const fingerprint = await _getFingerprint(ecdsaRawPublicKey)\n  return fingerprint\n}\n\nconst getVerificationMessage = async () => {\n  try {\n    _checkSignedInState()\n\n    const username = ws.session.username\n    const fingerprint = await _getMyFingerprint()\n\n    const verificationMessage = _packVerificationMessage(username, fingerprint)\n    return { verificationMessage }\n  } catch (e) {\n\n    switch (e.name) {\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n  }\n}\n\nconst _openVerifiedUsersDatabase = async () => {\n  const databaseName = VERIFIED_USERS_DATABASE_NAME\n  const changeHandler = () => { } // not used\n  const allowVerifiedUsersDatabase = true\n  const encryptionMode = 'end-to-end' // if server has access, opens attack vector because can withold and/or replace verified users\n  await openDatabase({ databaseName, changeHandler, allowVerifiedUsersDatabase, encryptionMode })\n  const dbNameHash = ws.state.dbNameToHash[databaseName]\n  const verifiedUsers = ws.state.databases[dbNameHash].items\n  return verifiedUsers\n}\n\nconst verifyUser = async (params) => {\n  try {\n    if (typeof params !== 'object') throw new errors.ParamsMustBeObject\n    _checkSignedInState()\n\n    if (!objectHasOwnProperty(params, 'verificationMessage')) throw new errors.VerificationMessageMissing\n    const { verificationMessage } = params\n    if (typeof verificationMessage !== 'string') throw new errors.VerificationMessageMustBeString\n    if (verificationMessage.length === 0) throw new errors.VerificationMessageCannotBeBlank\n\n    const { username, fingerprint } = _unpackVerificationMessage(verificationMessage)\n\n    if (username === ws.session.username || fingerprint === await _getMyFingerprint()) throw new errors.VerifyingSelfNotAllowed\n\n    // upsert the verification message into the user's encrypted database that stores verified users\n    await _openVerifiedUsersDatabase()\n\n    const databaseName = VERIFIED_USERS_DATABASE_NAME\n    const allowVerifiedUsersDatabase = true\n    const itemId = username\n    const item = { fingerprint }\n    try {\n      await insertItem({ databaseName, itemId, item, allowVerifiedUsersDatabase })\n    } catch (e) {\n      if (e.name === 'ItemAlreadyExists') await updateItem({ databaseName, itemId, item, allowVerifiedUsersDatabase })\n      else throw e\n    }\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'VerificationMessageMissing':\n      case 'VerificationMessageMustBeString':\n      case 'VerificationMessageCannotBeBlank':\n      case 'VerificationMessageInvalid':\n      case 'VerifyingSelfNotAllowed':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n  }\n}\n\nexport default {\n  openDatabase,\n  getDatabases,\n\n  insertItem,\n  updateItem,\n  deleteItem,\n  putTransaction,\n\n  uploadFile,\n  getFile,\n\n  shareDatabase,\n  modifyDatabasePermissions,\n\n  getVerificationMessage,\n  verifyUser,\n}\n","import ws from './ws'\nimport errors from './errors'\nimport statusCodes from './statusCodes'\nimport { objectHasOwnProperty, getProtocolFromEndpoint } from './utils'\nimport config from './config'\n\nconst _checkSignedInState = () => {\n  if (ws.reconnecting) throw new errors.Reconnecting\n  if (!ws.keys.init && ws.changePassword) throw new errors.UserMustChangePassword\n  if (!ws.keys.init) throw new errors.UserNotSignedIn\n}\n\nconst _parseGenericErrors = (e) => {\n  if (e.response) {\n    if (e.response.status === statusCodes['Internal Server Error']) {\n      throw new errors.InternalServerError\n    } else if (e.response.status === statusCodes['Gateway Timeout']) {\n      throw new errors.Timeout\n    }\n  } else if (e.message && e.message.indexOf('timeout') !== -1) {\n    throw new errors.Timeout\n  }\n}\n\nconst _validatePurchaseOrUpdate = (params) => {\n  _checkSignedInState()\n\n  const stripeData = ws.userData.stripeData\n  if (!stripeData.stripeAccountId) throw new errors.StripeAccountNotConnected\n  if (stripeData.paymentsMode === 'disabled') throw new errors.PaymentsDisabled\n\n  if (!objectHasOwnProperty(window, 'Stripe')) throw new errors.StripeJsLibraryMissing\n\n  if (typeof params !== 'object') throw new errors.ParamsMustBeObject\n\n  if (!objectHasOwnProperty(params, 'successUrl')) throw new errors.SuccessUrlMissing\n  if (typeof params.successUrl !== 'string') throw new errors.SuccessUrlMustBeString\n  const successUrlProtocol = getProtocolFromEndpoint(params.successUrl)\n  if (successUrlProtocol !== 'http' && successUrlProtocol !== 'https') {\n    const invalidProtocol = true\n    throw new errors.SuccessUrlInvalid(invalidProtocol)\n  }\n\n  if (!objectHasOwnProperty(params, 'cancelUrl')) throw new errors.CancelUrlMissing\n  if (typeof params.cancelUrl !== 'string') throw new errors.CancelUrlMustBeString\n  const cancelUrlProtocol = getProtocolFromEndpoint(params.cancelUrl)\n  if (cancelUrlProtocol !== 'http' && cancelUrlProtocol !== 'https') {\n    const invalidProtocol = true\n    throw new errors.CancelUrlInvalid(invalidProtocol)\n  }\n}\n\nconst purchaseSubscription = async (params) => {\n  try {\n    const stripeData = ws.userData.stripeData\n    if (!stripeData.cancelSubscriptionAt && stripeData.subscriptionStatus && stripeData.subscriptionStatus !== 'canceled') {\n      throw new errors.SubscriptionPlanAlreadyPurchased\n    }\n    _validatePurchaseOrUpdate(params)\n\n    try {\n      const action = 'PurchaseSubscription'\n      const sessionIdResponse = await ws.request(action, params)\n      const stripeSessionId = sessionIdResponse.data\n\n      const stripePk = config.getStripePublishableKey(stripeData.paymentsMode === 'prod')\n\n      const result = await window\n        .Stripe(stripePk, { stripeAccount: stripeData.stripeAccountId })\n        .redirectToCheckout({ sessionId: stripeSessionId })\n\n      if (result.error) throw result.error\n\n    } catch (e) {\n      _parseGenericErrors(e)\n\n      if (e.response) {\n        switch (e.response.data) {\n          case 'PriceIdOrPlanIdAllowed': throw new errors.PriceIdOrPlanIdAllowed\n          case 'PriceIdOrPlanIdMissing': throw new errors.PriceIdOrPlanIdMissing\n          case 'SubscriptionPlanAlreadyPurchased': throw new errors.SubscriptionPlanAlreadyPurchased\n          case 'SuccessUrlInvalid': throw new errors.SuccessUrlInvalid\n          case 'CancelUrlInvalid': throw new errors.CancelUrlInvalid\n          default: {\n            if (e.response.data && e.response.data.name === 'StripeError') {\n              throw new errors.StripeError(e.response.data)\n            }\n          }\n        }\n      }\n\n      throw e\n    }\n\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'SuccessUrlMissing':\n      case 'SuccessUrlMustBeString':\n      case 'SuccessUrlInvalid':\n      case 'CancelUrlMissing':\n      case 'CancelUrlMustBeString':\n      case 'CancelUrlInvalid':\n      case 'StripeError':\n      case 'StripeJsLibraryMissing':\n      case 'PriceIdOrPlanIdAllowed':\n      case 'PriceIdOrPlanIdMissing':\n      case 'SubscriptionPlanAlreadyPurchased':\n      case 'StripeAccountNotConnected':\n      case 'PaymentsDisabled':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'TooManyRequests':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n  }\n}\n\nconst _validateModifySubscriptionConditions = () => {\n  _checkSignedInState()\n\n  const stripeData = ws.userData.stripeData\n  if (!stripeData.stripeAccountId) throw new errors.StripeAccountNotConnected\n  if (stripeData.paymentsMode === 'disabled') throw new errors.PaymentsDisabled\n\n  if (stripeData.subscriptionStatus === 'canceled') throw new errors.SubscriptionAlreadyCanceled\n}\n\nconst cancelSubscription = async () => {\n  try {\n    _validateModifySubscriptionConditions()\n\n    try {\n      const action = 'CancelSubscription'\n      const cancelResponse = await ws.request(action)\n      const cancelSubscriptionAt = cancelResponse.data\n\n      ws.userData.stripeData.cancelSubscriptionAt = cancelSubscriptionAt\n      return { cancelSubscriptionAt }\n    } catch (e) {\n      _parseGenericErrors(e)\n\n      if (e.response && e.response.data === 'SubscriptionNotFound') {\n        throw new errors.SubscriptionNotFound\n      }\n\n      throw e\n    }\n\n  } catch (e) {\n\n    switch (e.name) {\n      case 'SubscriptionNotFound':\n      case 'StripeAccountNotConnected':\n      case 'PaymentsDisabled':\n      case 'SubscriptionAlreadyCanceled':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'TooManyRequests':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n  }\n}\n\nconst resumeSubscription = async () => {\n  try {\n    _validateModifySubscriptionConditions()\n\n    try {\n      const action = 'ResumeSubscription'\n      await ws.request(action)\n\n      delete ws.userData.stripeData.cancelSubscriptionAt\n    } catch (e) {\n      _parseGenericErrors(e)\n\n      if (e.response && e.response.data === 'SubscriptionNotFound') {\n        throw new errors.SubscriptionNotFound\n      }\n\n      throw e\n    }\n\n  } catch (e) {\n\n    switch (e.name) {\n      case 'SubscriptionNotFound':\n      case 'StripeAccountNotConnected':\n      case 'PaymentsDisabled':\n      case 'SubscriptionAlreadyCanceled':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'TooManyRequests':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n  }\n}\n\nconst updatePaymentMethod = async (params) => {\n  try {\n    _validatePurchaseOrUpdate(params)\n\n    const stripeData = ws.userData.stripeData\n    if (!stripeData.subscriptionStatus) throw new errors.SubscriptionNotPurchased\n\n    try {\n      const action = 'UpdatePaymentMethod'\n      const sessionIdResponse = await ws.request(action, params)\n      const stripeSessionId = sessionIdResponse.data\n\n      const stripePk = config.getStripePublishableKey(stripeData.paymentsMode === 'prod')\n\n      const result = await window\n        .Stripe(stripePk, { stripeAccount: stripeData.stripeAccountId })\n        .redirectToCheckout({ sessionId: stripeSessionId })\n\n      if (result.error) throw result.error\n\n    } catch (e) {\n      _parseGenericErrors(e)\n\n      if (e.response) {\n        if (e.response.data === 'SuccessUrlInvalid') {\n          throw new errors.SuccessUrlInvalid\n        } else if (e.response.data === 'CancelUrlInvalid') {\n          throw new errors.CancelUrlInvalid\n        }\n      }\n\n      throw e\n    }\n\n  } catch (e) {\n\n    switch (e.name) {\n      case 'ParamsMustBeObject':\n      case 'SuccessUrlMissing':\n      case 'SuccessUrlMustBeString':\n      case 'SuccessUrlInvalid':\n      case 'CancelUrlMissing':\n      case 'CancelUrlMustBeString':\n      case 'CancelUrlInvalid':\n      case 'StripeJsLibraryMissing':\n      case 'SubscriptionNotPurchased':\n      case 'StripeAccountNotConnected':\n      case 'PaymentsDisabled':\n      case 'UserMustChangePassword':\n      case 'UserNotSignedIn':\n      case 'TooManyRequests':\n      case 'ServiceUnavailable':\n        throw e\n\n      default:\n        throw new errors.UnknownServiceUnavailable(e)\n    }\n  }\n}\n\nexport default {\n  purchaseSubscription,\n  cancelSubscription,\n  resumeSubscription,\n  updatePaymentMethod,\n}\n","import auth from './auth'\nimport db from './db'\nimport payments from './payments'\n\nexport default {\n  init: auth.init,\n\n  signUp: auth.signUp,\n  signIn: auth.signIn,\n  signOut: auth.signOut,\n  updateUser: auth.updateUser,\n  deleteUser: auth.deleteUser,\n  forgotPassword: auth.forgotPassword,\n\n  openDatabase: db.openDatabase,\n\n  insertItem: db.insertItem,\n  updateItem: db.updateItem,\n  deleteItem: db.deleteItem,\n  putTransaction: db.putTransaction,\n\n  uploadFile: db.uploadFile,\n  getFile: db.getFile,\n\n  getDatabases: db.getDatabases,\n  shareDatabase: db.shareDatabase,\n  modifyDatabasePermissions: db.modifyDatabasePermissions,\n  getVerificationMessage: db.getVerificationMessage,\n  verifyUser: db.verifyUser,\n\n  purchaseSubscription: payments.purchaseSubscription,\n  cancelSubscription: payments.cancelSubscription,\n  resumeSubscription: payments.resumeSubscription,\n  updatePaymentMethod: payments.updatePaymentMethod,\n}\n"],"sourceRoot":""}